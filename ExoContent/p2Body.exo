##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
##   {META} FUNCTIONS
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Func IdMods(){ Identified True; }
Func Clean(){ Corrupted False; Mirrored False; }
Func Typical(){ Quality = 0; Sockets <= 0; }
Func LVL() { AreaLevel < eglevel; }
Func EG() { AreaLevel >= eglevel }
Func TopMods() { ItemLevel >= egTopMods; }
Func FromTo(minItemLevel, maxArea) { ItemLevel >= minItemLevel; AreaLevel < maxArea; }

Func AR()  { BaseArmour > 0; BaseEvasion = 0; BaseEnergyShield = 0;}
Func EV()  { BaseArmour = 0; BaseEvasion > 0; BaseEnergyShield = 0;}
Func ES()  { BaseArmour = 0; BaseEvasion = 0; BaseEnergyShield > 0;}
Func AREV(){ BaseArmour > 0; BaseEvasion > 0; BaseEnergyShield = 0;}
Func ARES(){ BaseArmour > 0; BaseEvasion = 0; BaseEnergyShield > 0;}
Func EVES(){ BaseArmour = 0; BaseEvasion > 0; BaseEnergyShield > 0;}

Func FlaskHighlight(level, b){ AreaLevel <= level; BaseType b; }

#===============================================================================================================
# [[0200]] Gold
#===============================================================================================================
#!! Waypoint c0.start : "Start - Override ALL rules"

Section Gold : Auto("Gold"), BaseType == "Gold"
{
	Show stack3 { !goldHuge;  StackSize >= 5000; }
	Show stack2 { !goldLarge;  StackSize >= 3000; }
	Show stack1 { !goldMedium;  StackSize >= 500; }
	
	Show stack1lvl { !goldMedium; StackSize >= 250; LVL(); }

	Show any   { !goldSmall; Empty(); }
}

#===============================================================================================================
# [[0200]] Exotic Bases
#===============================================================================================================
#!! Waypoint c2.exotic.all : "Exotic Items - Breach Rings, Fishing Rods, Quest Items"

# These bases don't usually drop during normal gameplay and are usually only acquired form certain sources

Section ExoticBases : Auto("ExoticBases"), !exotic
{
	# Currently contains mostly undroppable bases
	Show SuperExoticBases { !exotic.t1; BaseType == bases.exotic.misc.t1; Rarity <= Rare; }
	# Currently contains breach rings
	Show CommonExoticBases { !exotic.t2; BaseType == bases.exotic.misc.t2; Rarity <= Magic; }
}

Section QuestItemException : Auto("QuestlikeException"), !questlike
{
	# Sanctum keys
	Show QuestLike  { BaseType == questLikeDrops; }
	Show QuestItems { Class == "Quest Items"; }
}

Section Artifacts : Auto("Artifact"), Rarity <= Rare, !Artifact
{
	Show FishingRod { Class == "Fishing Rods"; }
	Show Pieces { Class == "Pieces"; }
}

#===============================================================================================================
# [[0200]] Exotic Item States
#===============================================================================================================
#!! Waypoint c3.exotic.state.all : "Exotic State - Double Corrupted, Overquality"

Section OtherExotics : Auto("exotic->others"), Rarity <= Rare, !exotic
{
	Show DoubleCorruptedAny { !exotic.t2; !corruptstrong; Corrupted True; CorruptedMods >= 2; }
	Show OverQualityAny { !exotic.t2; Quality >= 21; Corrupted False; }
}

#===============================================================================================================
# [[0200]] Crafting - Normal and Magic Bases
#===============================================================================================================

##------------------------------------
## [1234] Economy Based Crafting Bases
##------------------------------------
##
##Section Valuable : Clean(), Auto("Crafting->Expensive"), ItemLevel >= 86, Rarity <= Rare
##{
##	Show Any { !exotic.t1; BaseType == expensivebases.any; }
##}

#------------------------------------
# [1234] Crafting and Chancing Bases
#------------------------------------
Section EndgameCraftingBases : Clean()
{
	#!! Waypoint c4.gear.crafting.decorators : "Crafting Decorators - Visual override for crafting items"

	Section CraftNormalDecorators : Auto("Endgame->normalcraft->Decorator"), Rarity <= Magic, EG()
	{
		Cont NormalDecoratorJwlry { !tierS; Class == classes_jewellery; };
		Cont NormalDecorator      { Class == classes_nonJwlryEquip; };
	}

	#!! Waypoint c4.gear.crafting.all : "Crafting Bases - Handpicked Magic and Normal Bases"
	Section NormalCrafting : Auto("Endgame->normalcraft->any"), Rarity <= Magic
	{
		# Best itemlevel bases (82)
		Show t1idealLevel { ItemLevel >= egTopMods; BaseType == bases.general.unbiased.t1; }

		Show t1 		  { EG(); BaseType == bases.general.unbiased.t1; }
		Show t2 		  { EG(); BaseType == bases.general.unbiased.t2; AreaLevel <= 74;  }
		Show t3 		  { EG(); BaseType == bases.general.unbiased.t3; AreaLevel <= 70; }
	}

	#!! Waypoint c4.gear.chancing : "Chancing bases"
	Section Chancing : Clean(), Rarity Normal, Auto("Chancing")
	{
		Show any { BaseType == bases.chancing.any; }
	}

	#!! Waypoint c4.gear.jewellery : "Jewellery - Endgame Magic&Normal"
	Section Jewellery : Rarity <= Magic, Auto("Endgame->Jewellery"), EG(), Clean()
	{
		Show SelectAmulets { Class == "Amulets"; BaseType == bases.crafting.components.topamulets.t1; }
		Show Amulets { Class == "Amulets"; }

		Show SelectRings   { Class == "Rings"; BaseType == bases.crafting.components.toprings.t1; }
		Show Rings   { Class == "Rings"; }

		Show SelectBelts   { Class == "Belts"; BaseType == bases.crafting.components.topbelts.t1; }
		Show Belts   { Class == "Belts"; }
	}

	Section DecoratorRemover : Auto("Endgame->normalcraft->Decorator"), Class == classes_equip, EG()
	{
		Cont MagicDecoratorRemover { Rarity Magic; }
		Cont NormalDecoratorRemover { Rarity Normal; }
	}
}

#===============================================================================================================
# [[0200]] Salvagable
#===============================================================================================================
#!! Waypoint c4.gear.salvagable : "Salvagable bases (Endgame)"

Section Salvagable : Rarity <= Magic, Auto("Endgame->Salvagable"), EG()
{
	Show QualityMartialAny { Class == classes_attack; Quality >= 1; }
	Show QualityCasterAny  { Class == classes_cast; Quality >= 1; }
	Show QualityArmorAny   { Class == classes_armor; Quality >= 1; }
	Show SocketsLarge 	   { Class == classes_equip; Sockets > 0; Height >= 3; }
	Show SocketsSmall 	   { Class == classes_equip; Sockets > 0; Height < 3 }
}

#===============================================================================================================
# [[0200]] Endgame Flasks
#===============================================================================================================
#!! Waypoint c5.flasks.endgame : "Flasks (Endgame)"

Section EndgameFlasks : Auto("Endgame->Flasks"), Rarity <= Magic, EG(), Clean(), BaseType == bases.flask.lifemanaassorted
{
	Show Any20QualFlask 	  { Quality >= 15; }
	Show AnyQualFlask 		  { Quality >= 1; }
	Show EarlyMappingLifeMana { FromTo(eglevel, eglevel); }
}

#===============================================================================================================
# [[0200]] Endgame Charms
#===============================================================================================================
#!! Waypoint c5.charms.endgame : "Charms (Endgame)"

Section EndgameCharms : Auto("Endgame->Charms"), Rarity <= Rare, EG(), Clean(), Class == class_charms
{
	Show OptimalLevelQualityCharms { BaseType == bases.charms.optimal; Quality > 1; }
	Show EarlyMappingCharms 	   { AreaLevel <= earlyEgLevelEnd; BaseType == bases.charms.optimal; }
	Show AnyCharm { Empty(); }
}

#===============================================================================================================
# [[0200]] Hide Layer 1 - Normal and Magic Endgame Gear
#===============================================================================================================
#!! Waypoint c5.hidelayer.normalmagic : "HIDELAYER - All other endgame equipment normal&magic items"

Section HideLayer1 : Auto("HideLayer")
{
	Show NormalMagicEndgame { %H0; EG(); Rarity < Rare; Class == classes_equip; }
}

#===============================================================================================================
# [[0200]] Rare Item Decorators
#===============================================================================================================
#!! Waypoint c6.rare.decorator.all : "Rare Endgame Items - Decorators"

Section RareDecorators : Auto("Decorators->rareeg"), Rarity Rare, EG(), Class == classes_equip, !raredeco
{
	Cont LargeRares 	{ !*large;  Height >= 3; Width >= 2; }
	Cont MediumRares1 	{ !*medium; Height >= 3; Width = 1; }
	Cont MediumRares2 	{ !*medium; Height = 2; Width = 2; }
	Cont TinyRares 		{ !*tiny;   Height = 1; Width <= 2; }

	Cont ILVL82 { !*ilvl82; ItemLevel >= 82; }

	Cont CorruptedRares { !*corruptbad; Corrupted True; CorruptedMods 0; }
	Cont CorruptedRaresImplicit { !*corrupt; Corrupted True; CorruptedMods >= 1; }
}

Section EndgameRares : Rarity Rare, ItemLevel >= eglevel
{

#===============================================================================================================
# [[0200]] Optional Hide Modules
#===============================================================================================================
#!! Waypoint c6.rare.generic.all : "Rare Endgame Items - (Optional) Hiding identified rares"

Section OptionalRare : Auto("RareOptional")
{
	HideD IdHider { !Shrink; Identified True; Class == classes_equip; }
}

#===============================================================================================================
# [[0200]] Endgame - Conditional Hide Layers
#===============================================================================================================

#!! Waypoint c6.rare.corrupthider : "Rare Endgame Items - (Optional) Hiding Corrupted and Mirrored Items"

Section ConditionalRareHider : Auto("HideLayer")
{
	HideD CorruptedRares { !shrink; Corrupted True; CorruptedMods 0; Identified False; Class == classes_nonJwlryEquip; }
	HideD MirroredRares { !shrink; Mirrored True; CorruptedMods 0; Identified False; Class == classes_nonJwlryEquip; }
}

#===============================================================================================================
# [[0200]] Endgame - Rare - Jewellery
#===============================================================================================================
#!! Waypoint c6.rare.jewellery.all : "Rare Endgame Items - Amulets, Rings"

	Section EndgameRareRingsAmulets : Class == "Rings" "Amulets", Auto("rr->amuring")
	{
		Show T1 { BaseType == derived.rares.jwl.ringsamu.t1; }
		Show T2 { BaseType == derived.rares.jwl.ringsamu.t2; }
		Show T3 { BaseType == derived.rares.jwl.ringsamu.t3; }
	}

#!! Waypoint c6.rare.belts.all : "Rare Endgame Items - Belts"
	Section EndgameRareBelts : Class == "Belts", Auto("rr->belts")
	{
		Show T1 { BaseType == derived.rares.jwl.belts.t1; }
		Show T2 { BaseType == derived.rares.jwl.belts.t2; }
		Show T3 { BaseType == derived.rares.jwl.belts.t3; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - Droplevel Hiding
#===============================================================================================================

#!! Waypoint c6.rare.drophiders : "Rare Endgame Items - Hide low items on high levels"

	Section HideLayerRareRuleIncremental : Auto("HideLayer")
	{
		HideD RRIHide1 { AreaLevel >= 82; DropLevel < 75; Class == classes_nonJwlryEquip; }
		HideD RRIHide2 { AreaLevel >= 82; DropLevel < 60; Class == classes_nonJwlryEquip; }
		HideD RRIHide3 { AreaLevel >= 78; DropLevel < 50; Class == classes_nonJwlryEquip; }
		HideD RRIHide4 { AreaLevel >= 73; DropLevel < 40; Class == classes_nonJwlryEquip; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear
#===============================================================================================================

#!! Waypoint c6.rare.t1.all : "Rare Endgame Items - T1 (gear)"

	Section EndgameRareGear : Auto("rr")
	{
		Show T1_s { BaseType == bases.general.unbiased.t1; TopMods(); }
		Show T1_a { BaseType == bases.general.unbiased.t1; ItemLevel >= 79; }
		Show T1_r { BaseType == bases.general.unbiased.t1; }

#!! Waypoint c6.rare.t2.all : "Rare Endgame Items - T2 (gear)"
		
		Show T2_s { BaseType == bases.general.unbiased.t2; TopMods(); }
		Show T2_a { BaseType == bases.general.unbiased.t2; ItemLevel >= 79; }
		Show T2_b { BaseType == bases.general.unbiased.t2; ItemLevel >= 75; }
		Show T2_r { BaseType == bases.general.unbiased.t2; }

#!! Waypoint c6.rare.t3.all : "Rare Endgame Items - T3 (gear)"

		Show T3_s { BaseType == bases.general.unbiased.t3; TopMods(); }
		Show T3_a { BaseType == bases.general.unbiased.t3; ItemLevel >= 79; }
		Show T3_b { BaseType == bases.general.unbiased.t3; ItemLevel >= 70; }
		Show T3_r { BaseType == bases.general.unbiased.t3; }

#!! Waypoint c6.rare.t4.all : "Rare Endgame Items - T4 (gear)"

		Show T4_a { BaseType == bases.general.unbiased.t4; ItemLevel >= 70; }
		Show T4_r { BaseType == bases.general.unbiased.t4; }

#!! Waypoint c6.rare.t5.all : "Rare Endgame Items - T5 (gear)"

		Show T5_a { Class == classes_nonJwlryEquip; ItemLevel >= 70; }
		Show T5_r { Class == classes_nonJwlryEquip; }
	}
}

#===============================================================================================================
# [[0200]] Untiered Rare Catcher
#===============================================================================================================
#!! Waypoint c6.rare.rest : "Rare Endgame Items - Others, Salvagable bases"

Section Salvagable : Rarity Rare, Auto("Leveling->Salvagable"), ItemLevel >= eglevel
{
	Show QualityMartialAny { Class == classes_attack; Quality >= 1; }
	Show QualityCasterAny { Class == classes_cast; Quality >= 1; }
	Show QualityArmorAny { Class == classes_armor; Quality >= 1; }
	Show Sockets { Class == classes_equip; Sockets > 0; }
}

#===============================================================================================================
# [[0200]] Hide Layer 2 - Rare Gear
#===============================================================================================================
Section HideLayer2 : Auto("HideLayer")
{
	Show RaresEndgame { ItemLevel >= eglevel; Rarity Rare; Class == classes_equip; }
}

#===============================================================================================================
# [[0200]] Socketables - Runes and Soul Cores
#===============================================================================================================
#!! Waypoint c7.miscgear.socketables : "Socketables - Runes and Soul Cores"

Section SocketsRunes : Auto("sockets->runes")
{
	Show t3 { BaseType == sockets.runes.t3; }
	Show t4 { BaseType == sockets.runes.t4; }
	Show t5 { BaseType == sockets.runes.t5; }
}

Section SocketsCores : Auto("sockets->cores")
{ 
	Show t1  { BaseType == sockets.cores.t1; }
	Show t2  { BaseType == sockets.cores.t2; }
	Show t3  { BaseType == sockets.cores.t3; }
	Show t4  { BaseType == sockets.cores.t4; }
	Show t5  { BaseType == sockets.cores.t5; }
}

#===============================================================================================================
# [[0200]] Jewels
#===============================================================================================================
#!! Waypoint c7.jewels.generic.all : "Jewels"

Section Jewels : Class "Jewel", Auto("jewels->generic")
{
	Show AnyTimeless  { Rarity <= Rare; BaseType == timeLostJewels; }
	Show AnyRare  	  { Rarity Rare; BaseType == genericJewels; }
	Show AnyMagic 	  { Rarity <= Magic; BaseType == genericJewels; }
}

#===============================================================================================================
# [[0200]] Relics
#===============================================================================================================
#!! Waypoint c7.relics.generic.all : "Relics (Trial of the Sekhema)"

Section TrialRelics : Auto("relics->generic")
{
	Show Any { Rarity <= Rare; BaseType == bases.exotic.relics; }
}

#===============================================================================================================
# [[3900]] Gems and Uncut Gems
#===============================================================================================================
#!! Waypoint c8.gems.uncut : "Gems - Uncut"

Section UncutGems : Auto("gems->uncut")
{
	# Level20
	Show Spirit20 { !TIERS; BaseType == "Uncut Spirit Gem"; ItemLevel >= 20; }
	Show Skill20  { !TIERS; BaseType == "Uncut Skill Gem"; ItemLevel >= 20; }

	# Level19
	Show Spirit19 { BaseType == "Uncut Spirit Gem"; ItemLevel = 19; }
	Show Skill19 { BaseType == "Uncut Skill Gem"; ItemLevel = 19; }

	# All gems during campaign with sounds
	Show SpiritCampaign { BaseType == "Uncut Spirit Gem"; LVL(); }
	Show SkillCampaign { BaseType == "Uncut Skill Gem"; LVL(); }
	Show SupportCampaign { BaseType == "Uncut Support Gem"; LVL(); }

	# Lower highlight for lower level gems in campaign
	Show OtherSpiritEg { BaseType == "Uncut Spirit Gem"; EG(); }
	Show OtherSkillEg { BaseType == "Uncut Skill Gem"; EG(); }
	Show OtherSupportEg { BaseType == "Uncut Support Gem"; EG(); }
}

#!! Waypoint c8.gems.others : "Gems - Specific"

Section Gems : Auto("gems"), Class == class_gems
{
	Show any { Empty(); }
}

#===============================================================================================================
# [[4400]] Waystones
#===============================================================================================================
#!! Waypoint c9.waystones.all : "Waystones - Override All"

Section Waystones : Class == "Waystones", !Maps
{
#===============================================================================================================
# [[0200]] Normal Waystone Progression
#===============================================================================================================

#!! Waypoint c9.waystone.special : "Waystones - Override Hider Rules"

	Section MapHiders : Auto("waystone->hiders")
	{		
		HideD corruptedMapHider { !shrink; Corrupted True; Rarity <= Magic; }
		HideD mirroredMapHider { !shrink; Mirrored True; Rarity <= Magic; }
	}

#------------------------------------
# [4403] Generic Decorators
#------------------------------------

#!! Waypoint c9.waystone.decorators.all : "Waystones - Decorators"

	Section GenericWaystones : Auto("waystones")
	{		
		Cont deco_zone1general { !*deco_map_zone12; WaystoneTier >= 14; }
		Cont deco_zone2general { !*deco_map_zone12; WaystoneTier >= 11; WaystoneTier <= 13; }
		Cont deco_zone3general { !*deco_map_zone34; WaystoneTier >= 6; WaystoneTier <= 10; }
		Cont deco_zone4general { !*deco_map_zone34; WaystoneTier >= 1; WaystoneTier <= 5; }

		Cont deco_wsup_t16 { WaystoneTier >= 16; AreaLevel < 80; }
		Cont deco_wsup_t15 { WaystoneTier >= 15; AreaLevel < 79; }
		Cont deco_wsup_t14 { WaystoneTier >= 14; AreaLevel < 78; }
		Cont deco_wsup_t13 { WaystoneTier >= 13; AreaLevel < 76; }
		Cont deco_wsup_t12 { WaystoneTier >= 12; AreaLevel < 75; }
		Cont deco_wsup_t11 { WaystoneTier >= 11; AreaLevel < 74; }
		Cont deco_wsup_t10 { WaystoneTier >= 10; AreaLevel < 73; }
		Cont deco_wsup_t9  { WaystoneTier >= 9; AreaLevel < 72; }
		Cont deco_wsup_t8  { WaystoneTier >= 8; AreaLevel < 72; }
		Cont deco_wsup_t7  { WaystoneTier >= 7; AreaLevel < 71; }
		Cont deco_wsup_t6  { WaystoneTier >= 6; AreaLevel < 70; }
		Cont deco_wsup_t5  { WaystoneTier >= 5; AreaLevel < 69; }
		Cont deco_wsup_t4  { WaystoneTier >= 4; AreaLevel < 68; }
		Cont deco_wsup_t3  { WaystoneTier >= 3; AreaLevel < 67; }
		Cont deco_wsup_t2  { WaystoneTier >= 2; AreaLevel < 66; }
		Cont deco_wsup_t1  { WaystoneTier >= 1; AreaLevel < eglevel; }

		Cont decor_implicit  	{ HasImplicitMod True; !*NoteAcc; }
		Cont deco_corruptedMod  { CorruptedMods >= 1;  !*NoteAcc; }

#------------------------------------
# [4403] Waystone progression
#------------------------------------

#!! Waypoint c9.waystone.generic.t16 : "Waystones - t14-t16"

		Show waystone_a_t16 { !*z1; WaystoneTier >= 16; }
		Show waystone_a_t15 { !*z1; WaystoneTier = 15; }
		Show waystone_a_t14 { !*z1; WaystoneTier = 14; }

#!! Waypoint c9.waystone.generic.t14 : "Waystones - t11-t13"

		Show waystone_b_t13 { !*z2; WaystoneTier = 13; }
		Show waystone_b_t12 { !*z2; WaystoneTier = 12; }
		Show waystone_b_t11 { !*z2; WaystoneTier = 11; }

#!! Waypoint c9.waystone.generic.t10 : "Waystones - t6-t10"

		Show waystone_c_t10 { !*z3; WaystoneTier = 10; }
		Show waystone_c_t9  { !*z3; WaystoneTier = 9; }
		Show waystone_c_t8  { !*z3; WaystoneTier = 8; }
		Show waystone_c_t7  { !*z3; WaystoneTier = 7; }
		Show waystone_c_t6  { !*z3; WaystoneTier = 6; }

#!! Waypoint c9.waystone.generic.t5 : "Waystones - T1-T5"

		Show waystone_d_t5  { !*z4; WaystoneTier = 5; }
		Show waystone_d_t4  { !*z4; WaystoneTier = 4; }
		Show waystone_d_t3  { !*z4; WaystoneTier = 3; }
		Show waystone_d_t2  { !*z4; WaystoneTier = 2; }
		Show waystone_d_t1  { !*z4; WaystoneTier = 1; }

		Show restex { Empty(); }
	}
}

#===============================================================================================================
# [[4900]] Currency - Exceptions - Leveling Currencies
#===============================================================================================================
#!! Waypoint c9.currency.leveling.nonstacked : "Tierlist - Currency - Leveling Currency"
Section LevelingCurrencies : Auto("Currency->Leveling"), Class == class_currency, LVL(), !Currency
{
	Show rare 	  { BaseType == currency.leveling.rare; }
	Show magic    { BaseType == currency.leveling.magic; }
	Show wisdom   { BaseType == currency.leveling.wisdom; }
}

#===============================================================================================================
# [[4900]] Currency - Regular Currency Tiering
#===============================================================================================================
#!! Waypoint c9.currency.single : "Tierlist - Currency - General"

Section CurrencyTiering : Auto("currency"), Class == class_currency, !Currency
{
	Show t1 { !TIERS; BaseType == currency.generic.t1; }
	Show t2 { !CurrTierA; BaseType == currency.generic.t2; }
	Show t3 { !CurrTierB; BaseType == currency.generic.t3; }
	Show t4 { !CurrTierC; BaseType == currency.generic.t4; }
	Show t5 { !CurrTierD; BaseType == currency.generic.t5; }
	Show t6 { BaseType == currency.generic.t6; }
	Show t7 { BaseType == currency.generic.t7; }
	Show t8 { BaseType == currency.generic.t8; }
	Show twisdom { BaseType == currency.generic.twisdom; }
}

#===============================================================================================================
# [[4900]] Currency - SPECIAL
#===============================================================================================================

#------------------------------------
# [5104] Distilled Emotions (Delirium)
#------------------------------------
#!! Waypoint c9.currency.emotions.all : "Tierlist - Distilled Emotions (Delirium)"

Section CurrencyEmotions : Auto("currency->emotions"), Class == class_currency, !Currency
{
	Show t1 { !TIERS; BaseType == currency.emotions.t1; }
	Show t2 { !CurrTierA; BaseType == currency.emotions.t2; }
	Show t3 { !CurrTierB; BaseType == currency.emotions.t3; }
	Show t4 { !CurrTierC; BaseType == currency.emotions.t4; }
	Show t5 { BaseType == currency.emotions.t5; }
	Hide exHide { !shrink; BaseType == currency.emotions.t1 + currency.emotions.t2 + currency.emotions.t3 + currency.emotions.t4  + currency.emotions.t5; }
	Show restex { BaseType "Distilled "; }
}

#------------------------------------
# [5104] Catalysts (breach)
#------------------------------------
#!! Waypoint c9.currency.catalysts.all : "Tierlist - Catalysts (Breach)"

Section CurrencyCatalysts : Auto("currency->catalysts"), Class == class_currency, !Currency
{
	Show t1 { !TIERS; BaseType == currency.catalysts.t1; }
	Show t2 { BaseType == currency.catalysts.t2; }
	Show t3 { BaseType == currency.catalysts.t3; }
	Show t4 { BaseType == currency.catalysts.t4; }
	Show t5 { BaseType == currency.catalysts.t5; }
	Hide exHide { !shrink; BaseType == currency.catalysts.t1 + currency.catalysts.t2 + currency.catalysts.t3 + currency.catalysts.t4  + currency.catalysts.t5; }
	Show restex { BaseType "Catalyst"; }
}

#------------------------------------
# [5104] Essences
#------------------------------------
#!! Waypoint c9.currency.essences.all : "Tierlist - Essences"

Section CurrencyEssence : Auto("currency->essence"), Class == class_currency, !Currency
{
	Show t1 { !TIERS; BaseType == currency.essence.t1; }
	Show t2 { BaseType == currency.essence.t2; }
	Show t3 { BaseType == currency.essence.t3; }
	Show t4 { BaseType == currency.essence.t4; }
	Show t5 { BaseType == currency.essence.t5; }
	Show restex { BaseType "Essence"; }
}

#------------------------------------
# [5104] Omen (ritual)
#------------------------------------
#!! Waypoint c9.currency.omen.all : "Tierlist - Omen (Ritual)"

Section CurrencyOmen : Auto("currency->omen"), Class == class_currency, !Currency
{
	Show t1 { !TIERS; BaseType == currency.omen.t1; }
	Show t2 { BaseType == currency.omen.t2; }
	Show t3 { BaseType == currency.omen.t3; }
	Show t4 { BaseType == currency.omen.t4; }
	Show t5 { BaseType == currency.omen.t5; }
	Show restex { BaseType "Omen "; }
}

#------------------------------------
# [5104] Others
#------------------------------------

Section CurrencyExotic : Auto("currency->others"), Class == class_currency, !Currency
{
	Show misc { BaseType == currency.exotic.undroppable; }
}

#===============================================================================================================
# [[4900]] Tablets
#===============================================================================================================
#!! Waypoint c10.tablets.all : "Tierlist - Tablets"

Section Tablets : Auto("fragments->tablets->generic"), Class "Tablet"
{
	Show t1 { BaseType == fragments.tablets.t1; }
	Show t2 { BaseType == fragments.tablets.t2; }
	Show t3 { BaseType == fragments.tablets.t3; }
	Show t4 { BaseType == fragments.tablets.t4; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4900]] Misc Map Like
#===============================================================================================================
#!! Waypoint c10.fragments.special : "Special Keys - Pinnacle, Logbook"

Section SpecialMapLike : Auto("maplike->special"), !artifact
{
	Show superkeys { Class == "Pinnacle Keys" }
	Show logbooks  { Class "Logbook" }
}

#===============================================================================================================
# [[4900]] Splinters and Fragments (Currencylike)
#===============================================================================================================
#!! Waypoint c10.fragments.most : "Fragments and Splinters"

Section CurrencySplinterSimulacrum : Auto("currency->splinter"), Class == class_currency, BaseType == fragments.generic.splinters
{
	Show t1 { StackSize >= stacksize.commonSplinters.t1; }
	Show t2 { StackSize >= stacksize.commonSplinters.t2; }
	Show t3 { StackSize >= stacksize.commonSplinters.t3; }
	Show t4 { StackSize >= stacksize.commonSplinters.t4; }
	Show t5 { Empty(); }
}

Section FullFragments : Auto("fragments->generic"), Class == class_fragments
{
	Show t1 { BaseType == fragments.generic.t1; }
	Show t2 { BaseType == fragments.generic.t2; }
	Show t3 { BaseType == fragments.generic.t3; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4900]] Misc Map Items
#===============================================================================================================
#!! Waypoint c10.ascendancy.all : "Trial Keys"

Section MiscMapSafe : Auto("MiscMapItemsExtra")
{
	Show TrialKeySanctum { BaseType == "Djinn Barya"; }
	Show TrialKeyUltimatumReward { BaseType == "Inscribed Ultimatum"; Corrupted True; }
	Show TrialKeyUltimatum { BaseType == "Inscribed Ultimatum"; }

	Show RelicKeys { !Currency.S; BaseType == miscmap.keys; }
	Show RelicKeysSafe { !Currency.S; Class == "Vault Keys"; }
}

Section MiscMapItems : Class == "Misc Map Items", Auto("MiscMapItems")
{
	Show restex { !restex; Empty(); }
}

#===============================================================================================================
# [[4900]] Remaining Currency
#===============================================================================================================

Section CurrencyRemaining : Class == class_currency, Auto("Currency")
{
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4900]] Uniques
#===============================================================================================================
#!! Waypoint c11.uniques.all : "Tierlist - Uniques - All"

Section Unique : Rarity Unique, Auto("uniques"), !unique
{

#------------------------------------
# [5702] Exceptions #1
#------------------------------------
	Show SekhemaRing { !*A; BaseType == "Ring"; Sockets > 0; }

#------------------------------------
# [5702] Tier 1 and 2 uniques
#------------------------------------
#!! Waypoint c11.uniques.t1 : "Tierlist - Uniques - T1, T2"

	Show t1 { !TIERS; BaseType == uniques.generic.t1; }
	Show t2 { !*A; BaseType == uniques.generic.t2; }	
#------------------------------------
# [5703] Exceptions #2
#------------------------------------
	Show 2xcorrupteduniques { !*A; !Corrupt; Corrupted True; CorruptedMods >= 2; }

#------------------------------------
# [5705] Multi-Unique bases.
#------------------------------------
	Show multispecialhigh { !*X; !SpecialNoB; BaseType == uniques.generic.multispecialhigh; }
	Show multispecial { !*X; !SpecialNoB; BaseType == uniques.generic.multispecial; }

#------------------------------------
# [5701] Low tier exceptions
#------------------------------------
#!! Waypoint c11.uniques.t1 : "Tierlist - Uniques - Low Tier Uniques"
	Show earlyleague { !*C; !EarlyUniques; BaseType == uniques.generic.earlyleague; }
	Show corrupteduniques { !*C; !Corrupt; Corrupted True; CorruptedMods >= 1; Class == classes_equip; }

#------------------------------------
# [5708] Tier 3 uniques 
#------------------------------------	
	Show t3boss { !*B; !SpecialNoB; BaseType == uniques.generic.t3boss; }
	Show t3 	{ !*B; BaseType == uniques.generic.t3; }
#------------------------------------
# [5709] Tier 4 uniques
#------------------------------------
	Show hideable  { !*D; BaseType == uniques.generic.hideable; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[0200]] Leveling - Salvagable
#===============================================================================================================
#!! Waypoint c20.leveling.salvagable.all: "Leveling - Salvagable bases"

Section Salvagable : Rarity <= Magic, Auto("Leveling->Salvagable"), LVL()
{
	Show QualityMartial    { Class == classes_attack; Quality >= 1; }
	Show QualityCaster 	   { Class == classes_cast; Quality >= 1; }
	Show QualityArmor 	   { Class == classes_armor; Quality >= 1; }
	Show SocketsLarge 	   { Class == classes_equip; Sockets > 0; Height >= 3; }
	Show SocketsSmall 	   { Class == classes_equip; Sockets > 0; Height < 3 }
}

#===============================================================================================================
# [[6000]] Leveling - Hide outdated leveling flasks
#===============================================================================================================
#!! Waypoint c20.leveling.flasks.hidelayer : "Leveling - All flask rules"

Section HideLayer3 : Auto("HideLayer"), Quality 0, Class == class_flasks
{
	Show OutdatedLevelFlaskA { %H0; AreaLevel >= 15; BaseType "Lesser" "Medium"; }
	Show OutdatedLevelFlaskB { %H0; AreaLevel >= 30; BaseType "Greater" "Grand"; }
	Show OutdatedLevelFlaskC { %H0; AreaLevel >= 42; BaseType "Giant" "Colossal"; }
	Show OutdatedLevelFlaskD { %H0; AreaLevel >= 52; BaseType "Gargantuan"; }
	Show OutdatedLevelFlaskE { %H0; AreaLevel >= 62; BaseType "Transcendent"; }
}

#===============================================================================================================
# [[6000]] Leveling - Life Mana Flasks
#===============================================================================================================
#!! Waypoint c20.leveling.flasks.qual : "Leveling - Quality Flasks"

Section LevelingQualityFlasks : Auto("Leveling->flasks->quality"), Class == class_flasklikes, Rarity Normal
{
	Show max  { Quality >= 20; }
	Show high { Quality >= 14; }
	Show any  { Quality >= 1; }
}

#------------------------------------
# [6002] Life flasks
#------------------------------------
#!! Waypoint c20.leveling.flasks.progression : "Leveling - Flask Progression"

Section LevelingLifeFlasks : Class == "Life Flasks", Auto("Leveling->Flasks->Life")
{
	Show t1  { FlaskHighlight(8,  "Medium");}
	Show t2  { FlaskHighlight(15, "Greater");}
	Show t3  { FlaskHighlight(22, "Grand");}
	Show t4  { FlaskHighlight(29, "Giant");}
	Show t5  { FlaskHighlight(39, "Colossal");}
	Show t6  { FlaskHighlight(49, "Gargantuan");}
	Show t7  { FlaskHighlight(59, "Transcendent");}
	Show t8  { FlaskHighlight(65, "Ultimate");}
}

#------------------------------------
# [6002] Mana flasks
#------------------------------------
Section LevelingManaFlasks : Class == "Mana Flasks", Auto("Leveling->Flasks->Mana")
{
	Show t1  { FlaskHighlight(8,  "Medium");}
	Show t2  { FlaskHighlight(15, "Greater");}
	Show t3  { FlaskHighlight(22, "Grand");}
	Show t4  { FlaskHighlight(29, "Giant");}
	Show t5  { FlaskHighlight(39, "Colossal");}
	Show t6  { FlaskHighlight(49, "Gargantuan");}
	Show t7  { FlaskHighlight(59, "Transcendent");}
	Show t8  { FlaskHighlight(65, "Ultimate");}
}

#------------------------------------
# [6002] Charms
#------------------------------------

Section LevelingCharms : Class == class_charms, Auto("Leveling->Charms"), LVL()
{
	Show Selected { BaseType == bases.charms.optimal;} 
	Show Any 	  { Class == "Charms";}
}

#===============================================================================================================
# [[6000]] Leveling - Rules
#===============================================================================================================
#!! Waypoint c21.leveling.gear.all : "Leveling - Gear - All"

#------------------------------------
# [6002] Rares - Decorators
#------------------------------------
#!! Waypoint c21.leveling.decorators.all : "Leveling - Rares - Decorators"

Section LevelingRareDecorator : Auto("Leveling->Decorators->Rare"), Rarity Rare, LVL(), !raredeco
{
	Cont LargeRares 	{ !*large; Height >= 3; Width >= 2; }
	Cont MediumRares1 	{ !*medium; Height >= 3; Width = 1; }
	Cont MediumRares2 	{ !*medium; Height = 2; Width = 2; }
	Cont TinyRares 		{ !*tiny; Height = 1; Width <= 2; }
}

#------------------------------------
# [6002] Rares - Universal
#------------------------------------
Section LevelingRareGear : Rarity Rare, LVL()
{
#!! Waypoint c21.leveling.rares.jewellery : "Leveling - Rares - Belts, Rings, Amulets"
	Section Universal : Auto("Leveling->Rare->universal") !raredeco.t1jewellery
	{
		Show Jewellery  { Class == classes_jewellery; }
	}

#!! Waypoint c21.leveling.rares.armors : "Leveling - Rares - Armour Pieces"
	Section ArmourTypes : Auto("Leveling->Rare->armours"), Class == classes_armor
	{
		Show AR			{ AR(); }
		Show EV			{ EV(); }
		Show ES			{ ES(); }
		Show AREV		{ AREV(); }
		Show ARES		{ ARES(); }
		Show EVES		{ EVES(); }
		
		Show AnythingEarly { AreaLevel < 16; }
	}

	Section WeaponTypes : Auto("Leveling->Rare->weapons")
	{
		Show Wands { Class == "Wands"; }
		Show Sceptres { Class == "Sceptres"; }
		Show Staves { Class == "Staves"; }

		Show BowsQuivers { Class == "Bows" "Quivers"; }
		Show Crossbows { Class == "Crossbows"; }

		Show OneHandMaces { Class == "One Hand Maces"; }
		Show TwoHandMaces { Class == "Two Hand Maces"; }

		Show Quarterstaves { Class == "Quarterstaves"; }
	}

#------------------------------------
# [6002] Rares - Other
#------------------------------------
#!! Waypoint c21.leveling.rares.low : "Leveling - Gear - Low Tier"

	Section Others : Auto("Leveling->Rare->Remaining") Class == classes_equip
	{
		Show Any { Empty(); }
	}
}

#===============================================================================================================
# [[6400]] Leveling - Useful magic and normal items
#===============================================================================================================

#------------------------------------
# [6002] Decorators
#------------------------------------
#!! Waypoint c21.leveling.magicvendor.all : "Leveling - Normal and Magic - Magic Vendor Items"

Section LevelingMagicDecorator : Auto("Decorators->Leveling->Magic"), LVL(), Rarity = Magic
{
	Cont Medium1 	 { Height >= 3; Width = 1; }
	Cont Medium2 	 { Height = 2; Width = 2; }
	Cont NoticeEarly { AreaLevel <= leveling.keylevels.start; }
	Cont Tiny 	 	 { Height = 1; Width <= 2; }
}

#------------------------------------
# [6002] Purpose Picked Items
#------------------------------------
Section LevelingMiscGear : Rarity <= Magic
{
	#!! Waypoint c21.leveling.normalmagic : "Leveling - Remarkable Normal and Magic Gear"
	Section RemarkableNormalMagic : AreaLevel <= leveling.keylevels.act1, Auto("Leveling->NormalMagicRemarkable")
	{
		Show Jewellery { Class == classes_jewellery; }
	}
}

#------------------------------------
# [6002] Conditional Rules
#------------------------------------
#!! Waypoint c21.leveling.firstlevels.all : "Leveling - Normal and Magic - First Levels"

Section NormalMagic
{
	Section ArmourTypes : Auto("Leveling->NormalMagic->armours"), Class == classes_armor, Rarity <= Magic
	{
		ShowD AR			{ AR(); }
		ShowD EV			{ EV(); }
		ShowD ES			{ ES(); }
		ShowD AREV			{ AREV(); }
		ShowD ARES			{ ARES(); }
		ShowD EVES			{ EVES(); }
	}

	Section WeaponTypes : Auto("Leveling->NormalMagic->weapons"), Rarity <= Magic
	{
		ShowD Wands 		{ Class == "Wands"; }
		ShowD Sceptres 		{ Class == "Sceptres"; }
		ShowD Staves 		{ Class == "Staves"; }

		ShowD BowsQuivers 	{ Class == "Bows" "Quivers"; }
		ShowD Crossbows 	{ Class == "Crossbows"; }

		ShowD OneHandMaces 	{ Class == "One Hand Maces"; }
		ShowD TwoHandMaces 	{ Class == "Two Hand Maces"; }

		ShowD Quarterstaves { Class == "Quarterstaves"; }
	}
}

#------------------------------------
# [6002] Others
#------------------------------------

Section OtherNormalMagics : Auto("Leveling->FirstLevels"), Rarity <= Magic
{
	Show FirstAreas 		{ AreaLevel <= 4; }
	Show EarlyBoots 		{ AreaLevel <= 16; Class == "Boots" }
}

Section MagicItemsMisc : Auto("Leveling->Magic->Remaining"), Class == classes_equip, Rarity = Magic, !G7
{
	Section HideLayerMagicLeveling
	{
		HideD LargeMagicBlocker  { AreaLevel >= leveling.keylevels.act1; Height >= 3; Width >= 2 }
		HideD MediumMagicBlocker { AreaLevel >= leveling.keylevels.act2; Height > 1; }
	}

	Show Rest 		 { !ClearBorder; AreaLevel >= leveling.keylevels.act2; AreaLevel <= eglevel; }
	Show Act2 		 { !ClearBorder; AreaLevel >=leveling.keylevels.act1; AreaLevel <= leveling.keylevels.act2 ; }
	Show Act1 		 { !ClearBorder; AreaLevel >=leveling.keylevels.start; AreaLevel <= leveling.keylevels.act1; }
}

#!! Waypoint c22.hide.all : "HIDELAYER - Hide all known untiered items"

#------------------------------------
# [6002] Hide All known Section
#------------------------------------

Section HideLayerFinal : Auto("HideLayer")
{
	Hide Final { Class classes_finalHider; }
}

#------------------------------------
# [6002] Show All unknown Section
#------------------------------------
#!! Waypoint c22.show.all : "SAFETYLAYER - Show all unknown items"

# THIS ENTRY IS CAUGHT IN 3 CASES:
# 1) YOUR FILTER IS OUT OF DATE!
# 2) YOU DID SOMETHING SILLY WHEN EDITING THE FILTER
# 3) YOU ENCOUNTERED A PREVIOUSLY UNKNOWN ITEM (VERY UNLIKELY)

Section AnyRemaining : Auto("AnyRemaining")
{
	Show restex { Empty(); }
}
