##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
##   {META} FUNCTIONS
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Func IdMods(){ Identified True; }
Func Clean(){ Corrupted False; Mirrored False; }
Func Typical(){ Quality = 0; Sockets <= 0; }
Func LVL() { AreaLevel < eglevel; }
Func EG() { AreaLevel >= eglevel }
Func TopMods() { ItemLevel >= egTopMods; }
Func FromTo(minItemLevel, maxArea) { ItemLevel >= minItemLevel; AreaLevel <= maxArea; }

Func AR()  { BaseArmour > 0; BaseEvasion = 0; BaseEnergyShield = 0;}
Func EV()  { BaseArmour = 0; BaseEvasion > 0; BaseEnergyShield = 0;}
Func ES()  { BaseArmour = 0; BaseEvasion = 0; BaseEnergyShield > 0;}
Func AREV(){ BaseArmour > 0; BaseEvasion > 0; BaseEnergyShield = 0;}
Func ARES(){ BaseArmour > 0; BaseEvasion = 0; BaseEnergyShield > 0;}
Func EVES(){ BaseArmour = 0; BaseEvasion > 0; BaseEnergyShield > 0;}

Func FlaskHighlight(level, b){ AreaLevel <= level; BaseType b; }

#===============================================================================================================
# [[0200]] Gold
#===============================================================================================================
#!! Waypoint c0.start : "Start - Override ALL rules"

Section Gold : Auto("Gold"), BaseType == "Gold"
{
	Show stack3 { %D6; !gold_pilehuge;  StackSize >= 5000; }
	Show stack2 { %D6; !gold_pilelarge;  StackSize >= 2500; }
	Show stack1 { %D5; !gold_pilemedium;  StackSize >= 500; }
	Show stack1lvl { %D5; !gold_pilemedium; StackSize >= 250; LVL(); }

	Show any   { %H3; !gold_pilesmall; Empty(); }
}

#===============================================================================================================
# [[0200]] Exotic Bases
#===============================================================================================================
#!! Waypoint c2.exotic.all : "Exotic Items - Breach Rings, Fishing Rods, Quest Items"

Section ExoticBases : Auto("ExoticBases")
{
	# Currently contains mostly undroppable bases
	Show SuperExoticBases { !exotics_SpecialB; BaseType == bases.exotic.misc.t1; Rarity <= Rare; }
	Show KalandraBases { !exotics_SpecialB; BaseType == bases.exotic.kalandra.any; Rarity <= Rare; }

	# Currently contains breach rings
	Show CommonExoticBasesHigh 	{ %D6; !gear_jewelMagic; BaseType == bases.exotic.misc.t2; Rarity <= Magic; TopMods(); }
	Show CommonExoticBases 		{ %D4; !gear_jewelMagicLow; BaseType == bases.exotic.misc.t2; Rarity <= Magic; }
}

Section QuestItemException : Auto("QuestlikeException"), !typebased_quest
{
	# Sanctum keys
	Show QuestLike  { BaseType == questLikeDrops; }
	Show QuestItems { Class == "Quest Items"; }
}

Section Artifacts : Auto("Artifact"), Rarity <= Rare, !exotics_artifactHigh
{
	Show FishingRod { Class == "Fishing Rods"; }
}

#===============================================================================================================
# [[0200]] Exotic Item States
#===============================================================================================================
#!! Waypoint c3.exotic.state.hightier : "Exotic State - Exceptionally High Modtier"

Section HighModtier : Auto("exotic->others")
{
	Show tier5rare { !exotics_SpecialB; Rarity Rare; UnidentifiedItemTier >= 5; Class == classes_equip; }
	Show tier4rare { !gear_rareEquip1; !unknown_s2; !exotics_specialE; Rarity Rare; UnidentifiedItemTier = 4; Class == classes_equip; }
	Show tier23rareTrinkets { %D4; !exotics_specialE; !gear_rareJewellery1; !unknown_s2; Rarity Rare; UnidentifiedItemTier >= 2; Class == classes_jewellery; }
	Show tier3rare { %D4; !gear_rareEquip1; !unknown_s3; Rarity Rare; UnidentifiedItemTier = 3; Class == classes_equip; }
	Show tier2rare { %D3; !gear_rareEquip1; Rarity Rare; UnidentifiedItemTier = 2; Class == classes_equip; }

	Show tier5magic { !exotics_SpecialC; !unknown_s2; Rarity Magic; UnidentifiedItemTier >= 5; Class == classes_equip; }
	Show tier4magic { !gear_highlightDrop2; !unknown_s2; !exotics_specialE; Rarity Magic; UnidentifiedItemTier = 4; Class == classes_equip; }
	Show tier3magic { %D4; !gear_highlightDrop3; !unknown_s3; Rarity Magic; UnidentifiedItemTier = 3; Class == classes_equip; }
	Show tier2magic { %D3; !gear_highlightDrop4; Rarity Magic; UnidentifiedItemTier = 2; Class == classes_equip; }
}

#!! Waypoint c3.exotic.state.all : "Exotic State - Double Corrupted, Overquality"
Section OtherExotics : Auto("exotic->others"), Rarity <= Rare
{
	Show OverQualityAny { !exotics_SpecialB; Quality >= 21; Corrupted False; }
}

#===============================================================================================================
# [[0200]] Chancing Bases and Economy Selected Bases
#===============================================================================================================

##------------------------------------
## [1234] Economy Based Crafting Bases
##------------------------------------
##
##Section Valuable : Clean(), Auto("Crafting->Expensive"), ItemLevel >= 86, Rarity <= Rare
##{
##	Show Any { !exotic.t1; BaseType == expensivebases.any; }
##}

#------------------------------------
# [1234] Crafting and Chancing Bases
#------------------------------------

#!! Waypoint c3.gear.chancing : "Chancing bases"
Section Chancing : Clean(), Rarity Normal, Auto("Chancing")
{
	Show chanceS   { !Tiering_TierS; BaseType == bases.chancing.s; }
	Show chanceA   { !itemProperty_chancea;  BaseType == bases.chancing.a; }
	Show chanceAny { %D2; !itemProperty_chanceb;   BaseType == bases.chancing.any; }
}

#===============================================================================================================
# [[0200]] Endgame Flasks
#===============================================================================================================
#!! Waypoint c3.flasks.endgame : "Flasks (Endgame)"

Section EndgameFlasks : Auto("Endgame->Flasks"), Rarity <= Magic, EG(), Clean(), BaseType == bases.flask.lifemanaassorted
{
	Show TopLevelQualityFlasks { %D5; !itemProperty_toplevelbased2; !typebased_flaskcharms1; ItemLevel >= 83; Quality > 10; }
	Show TopLevelFlasks { %D4; !itemProperty_toplevelbased2; !typebased_flaskcharms1; ItemLevel >= 83; }
	Show EarlyMappingLifeMana { %D1; !typebased_flaskcharms2; FromTo(eglevel, 67); Quality = 0; }
}

#===============================================================================================================
# [[0200]] Endgame Charms
#===============================================================================================================
#!! Waypoint c3.charms.endgame : "Charms (Endgame)"

Section EndgameCharms : Auto("Endgame->Charms"), Rarity <= Magic, EG(), Clean(), Class == class_charms
{
	Show TopQualityCharms { %D6; !exotics_SpecialB; Quality >= 18; ItemLevel >= 82; }

	Show HighT1Charms { %D5; !typebased_flaskcharms1high; BaseType == bases.charms.optimal; ItemLevel >= 83; }
	Show HighOtherCharms { %D4; !typebased_flaskcharms1high; BaseType == bases.charms.all; ItemLevel >= 83; }
	
	Show QualityCharms { %D3; !typebased_flaskcharms1; Empty(); Quality > 0; }

	Show EarlyMappingCharms { %D4; !typebased_flaskcharms2; AreaLevel <= earlyEgLevelEnd; BaseType == bases.charms.optimal; }
	Show AnyCharm { %D2; !typebased_flaskcharms2; Empty(); }
}

#===============================================================================================================
# [[0200]] Normal and Magic Items: Endgame
#===============================================================================================================

Section EndgameCraftingBases : Clean()
{
	#------------------------------------
	# [1234] Salvagables
	#------------------------------------
	#!! Waypoint c4.gear.salvagable : "Salvagable bases (Endgame)"

	Section Salvagable : Rarity <= Magic, Auto("Endgame->Salvagable"), EG()
	{
		# Double Quality Currencies
		Show Quality2MartialAny { !itemProperty_salvage2; %D3; Class == classes_attack; Quality >= 10; }
		Show Quality2CasterAny  { !itemProperty_salvage1; %D3; Class == classes_cast; Quality >= 10; }
		Show Quality2ArmorAny   { !itemProperty_salvage1; %D5; Class == classes_armor; Quality >= 10; }
		Show Quality2Flask	    { !itemProperty_salvage1; %D4; Class == class_flasks; Quality >= 10; }

		# Single Quality Currencies
		Show QualityMartialAny { !itemProperty_salvage2; %D2; Class == classes_attack; Quality >= 1; }
		Show QualityCasterAny  { !itemProperty_salvage2; %D2; Class == classes_cast; Quality >= 1; }
		Show QualityArmorAny   { !itemProperty_salvage2; %D4; Class == classes_armor; Quality >= 1; }
		Show QualityFlask	   { !itemProperty_salvage2; %D4; Class == class_flasks; Quality >= 1; }

		# Artificer Scraps
		Show SocketsLarge1 	   { !itemProperty_salvage2; %D1; Class == classes_equip; Sockets > 0; Height >= 3; Width >= 2; }
		Show SocketsLarge2 	   { !itemProperty_salvage2; %D1; Class == classes_equip; Sockets > 0; Height >= 4; }
		Show SocketsSmall 	   { !itemProperty_salvage2; %D2; Class == classes_equip; Sockets > 0; }
	}

	#------------------------------------
	# [1234] Custom Hiders
	#------------------------------------

	Section ConditionalHiders : Rarity <= Magic, Auto("Endgame->conditionalhiders->crafting"), EG()
	{
		HideD HideWeaponsByType { !hiding_minimize; Class == classes_weapons + "Quivers"; UnidentifiedItemTier <= 2; }
		HideD ArHider { !hiding_minimize; AR(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD EvHider { !hiding_minimize; EV(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD EsHider { !hiding_minimize; ES(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD ArEvHider { !hiding_minimize; AREV(); Class == classes_armor;  UnidentifiedItemTier <= 2; }
		HideD ArEsHider { !hiding_minimize; ARES(); Class == classes_armor;  UnidentifiedItemTier <= 2; }
		HideD EvEsHider { !hiding_minimize; EVES(); Class == classes_armor;  UnidentifiedItemTier <= 2; }
	}

	#------------------------------------
	# [1234] Normal, Magic Crafting Decorators
	#------------------------------------
	#!! Waypoint c4.gear.crafting.decorators : "Crafting Decorators - Visual override for crafting items"

	Section CraftNormalDecorators : Auto("Endgame->normalcraft->Decorator"), Rarity <= Magic, EG()
	{
		Cont RegularGearDecorator      { !itemProperty_regularGear; Class == classes_equip; }
		
		ContD Normal80			  { !gear_unstyled; ItemLevel >= 80; Class == classes_equip; }
		Cont Normal82			  { !itemProperty_toplevelbased1; ItemLevel >= 82; Class == classes_equip; }
		
		Cont QualityDecorator1 	  { !itemProperty_salvage1; Class == classes_equip; Quality >= 10; }
		Cont QualityDecorator2 	  { !itemProperty_salvage2; Class == classes_equip; Quality >= 1; }

		Cont NormalDecoratorJwlry { !gear_unstyled; Class == "Rings" "Amulets"; }
	}

	#------------------------------------
	# [1234] Additional High Value Rules
	#------------------------------------

	Section ExtraCraftingRules : Auto("Endgame->normalcraft->extra"), Rarity <= Magic
	{
		Show Wands { !itemProperty_toplevelbased1; %D5; ItemLevel >= 81; BaseType == "Siphoning Wand" "Attuned Wand" }
	}

	#------------------------------------
	# [1234] Normal, Magic Crafting: Level 82+
	#------------------------------------

	#!! Waypoint c4.gear.crafting.all : "Crafting Bases - Handpicked Magic and Normal Bases"
	Section NormalCrafting : Auto("Endgame->normalcraft->any"), Rarity <= Magic
	{
		# Best itemlevel bases (82)
		Show  t1idealLevel  { !gear_unstyled; %D4; TopMods(); BaseType == derived.general.unbiased.equip.t1; Class == classes_nonJwlryEquip; }
		Show  t2idealLevel  { !gear_unstyled; %D2; TopMods(); BaseType == derived.general.unbiased.equip.t2; Class == classes_nonJwlryEquip; }
		ShowD t3idealLevel  { !gear_unstyled; TopMods(); BaseType == derived.general.unbiased.equip.t3;  Class == classes_nonJwlryEquip; }

	#------------------------------------
	# [1234] Normal, Magic Crafting: Optional Rules
	#------------------------------------

		# Matrix pauses: Optional: highlight +5minion bases for sumonners (81)
		ShowD MinionSceptresOptional { !itemProperty_toplevelbased1; ItemLevel >= 81; Class == "Sceptres"; }

	#------------------------------------
	# [1234] Normal, Magic Crafting: Endgame Progression
	#------------------------------------

		# Matrix proceeds here. Best available bases
		Show t1 		  { !gear_unstyled; EG(); %D4; Class == classes_nonJwlryEquip; BaseType == derived.general.unbiased.equip.t1; }
		Show t2onLevel    { !gear_unstyled; EG(); %D3; Class == classes_nonJwlryEquip; BaseType == derived.general.unbiased.equip.t2; AreaLevel <= 75;  }
		Show t3onLevel 	  { !gear_unstyled; EG(); %D2; Class == classes_nonJwlryEquip; BaseType == derived.general.unbiased.equip.t3; AreaLevel <= 70; }
	}

	#------------------------------------
	# [1234] Normal, Magic Crafting: Rings+Amulets
	#------------------------------------

	#!! Waypoint c4.gear.jewellery : "Jewellery - Endgame Magic&Normal"
	Section Jewellery : Rarity <= Magic, Auto("Endgame->Jewellery"), EG(), Clean(), Class == "Rings" "Amulets"
	{
		Show RingAmuT1idealLevel { %D6; !gear_highlightDrop2; TopMods(); BaseType == derived.rares.jwl.ringsamu.t1; }
		Show RingAmuT2idealLevel { %D5; !gear_highlightDrop2; TopMods(); BaseType == derived.rares.jwl.ringsamu.t2; }
		Show RingAmuT3idealLevel { %D3; !unknown_s3; TopMods(); BaseType == derived.rares.jwl.ringsamu.t3; }

		Show RingAmuT1 { %D5; !gear_highlightDrop3;  BaseType == derived.rares.jwl.ringsamu.t1; }
		Show RingAmuT2 { %D5; !gear_highlightDrop3;  BaseType == derived.rares.jwl.ringsamu.t2; }
		Show RingAmuT3 { %D3; !unknown_s4; BaseType == derived.rares.jwl.ringsamu.t3; }
	}

	#------------------------------------
	# [1234] Normal, Magic Crafting: Belts
	#------------------------------------

	Section Jewellery : Rarity <= Magic, Auto("Endgame->Jewellery"), EG(), Clean(), Class == "Belts"
	{
		Show BeltsT1idealLevel { %D5; !gear_highlightDrop3;  TopMods(); BaseType == derived.rares.jwl.belts.t1; }
		Show BeltsT2idealLevel { %D5; !unknown_s3; TopMods(); BaseType == derived.rares.jwl.belts.t2; }
		Show BeltsT3idealLevel { %D4; !unknown_s4; TopMods(); BaseType == derived.rares.jwl.belts.t3; }

		Show BeltsT1  { %D4; !gear_highlightDrop3; BaseType == derived.rares.jwl.belts.t1; }
		Show BeltsT2  { !unknown_s4; %D3; BaseType == derived.rares.jwl.belts.t2; }
		ShowD BeltsT3 { !unknown_s4; %D2; BaseType == derived.rares.jwl.belts.t3; }
	}

	#------------------------------------
	# [1234] Normal, Magic Crafting: Decorator Removers
	#------------------------------------

	Section DecoratorRemover : Auto("Endgame->normalcraft->Decorator"), Class == classes_equip, EG()
	{
		Cont MagicDecoratorRemover { !misc_decoremovermagic; Rarity Magic; }
		Cont NormalDecoratorRemover { !misc_decoremovernormal; Rarity Normal; }
	}
}

#===============================================================================================================
# [[0200]] Hide Layer 1 - Normal and Magic Endgame Gear
#===============================================================================================================
#!! Waypoint c5.hidelayer.normalmagic : "HIDELAYER - All other endgame equipment normal&magic items"

Section HideLayer1 : EG(), Rarity < Rare, Class == classes_equip + class_flasklikes + class_charms
{
	Show NormalMagicEndgameAny { !gear_UnremarkableDrop; %D0; Auto("LowStrictnessShowLayer"); }
	Hide NormalMagicEndgame { Auto("HideLayer"); }
}

#===============================================================================================================
# [[0200]] Rare Item Decorators
#===============================================================================================================
#!! Waypoint c6.rare.decorator.all : "Rare Endgame Items - Decorators"

Section RareDecorators : Auto("Decorators->rareeg"), Rarity Rare, EG()
{
	Cont BasicRareDecorator { !markup_black; }

	ContD LargeRares 	{ !gear_unstyled; Height >= 3; Width >= 2; Class == classes_equip; }
	ContD MediumRares1 	{ !gear_unstyled; Height >= 3; Width = 1; Class == classes_equip; }
	ContD MediumRares2 	{ !gear_unstyled; Height = 2; Width = 2; Class == classes_equip; }
	Cont TinyRares 		{ !gear_decorareringamuletbelt; Height = 1; Width <= 2; Class == classes_equip; }

	ContD ILVL80 	  { !gear_unstyled; ItemLevel >= 80; Class == classes_equip; }
	Cont ILVL82 	  { !itemProperty_level82; ItemLevel >= 82; Class == classes_equip; }

	# Optional: caster weapons get their most important mods on 81
	Cont ILVL81Caster { %D0; !itemProperty_level82; ItemLevel >= 81; Class == classes_cast; }

	Cont CorruptedRares 		{ !exotics_corrupt; Corrupted True; AnyEnchantment False; Class == classes_equip; }
	Cont CorruptedRaresImplicit { !exotics_corrupthigh; Corrupted True; AnyEnchantment True; Class == classes_equip; }
}

Section EndgameRares : Rarity Rare, ItemLevel >= eglevel
{

#===============================================================================================================
# [[0200]] Endgame - Conditional Hide Layers
#===============================================================================================================
#!! Waypoint c6.rare.optionalhide : "Rare Endgame Items - (Optional) Hiding Corrupted and Mirrored Items"

Section ConditionalRareHider : Auto("ConditionalHide")
{
	HideD IdHider 		 { !hiding_minimize; Identified True; Class == classes_equip; }
	HideD CorruptedRares { !hiding_minimize; Corrupted True; AnyEnchantment False; Identified False; Class == classes_nonJwlryEquip; }
}

#===============================================================================================================
# [[0200]] Endgame - Rare - Jewellery
#===============================================================================================================
#!! Waypoint c6.rare.jewellery.all : "Rare Endgame Items - Amulets, Rings"

	Section EndgameRareRingsAmulets82 : Class == "Rings" "Amulets", Auto("rr->amuringEG"), TopMods()
	{
		Show T1 { %D6; !gear_rareJewellery1; BaseType == derived.rares.jwl.ringsamu.t1; }
		Show T2 { %D6; !gear_rareJewellery1; BaseType == derived.rares.jwl.ringsamu.t2; }
		Show T3 { %D4; !gear_rareJewellery2; BaseType == derived.rares.jwl.ringsamu.t3; }
	}

	Section EndgameRareRingsAmulets : Class == "Rings" "Amulets", Auto("rr->amuring")
	{
		Show T1 { %D6; !gear_rareJewellery1; BaseType == derived.rares.jwl.ringsamu.t1; }
		Show T2 { %D5; !gear_rareJewellery1; BaseType == derived.rares.jwl.ringsamu.t2; }
		Show T3 { %D4; !gear_rareJewellery2; BaseType == derived.rares.jwl.ringsamu.t3; }
	}

#!! Waypoint c6.rare.belts.all : "Rare Endgame Items - Belts"

	Section EndgameRareBelts82 : Class == "Belts", Auto("rr->beltsEG"), TopMods()
	{
		Show T1 { %D6; !gear_rareJewellery1; BaseType == derived.rares.jwl.belts.t1; }
		Show T2 { %D5; !gear_rareJewellery2; BaseType == derived.rares.jwl.belts.t2; }
		Show T3 { %D4; !gear_rareJewellery3; BaseType == derived.rares.jwl.belts.t3; }
	}

	Section EndgameRareBelts : Class == "Belts", Auto("rr->belts")
	{
		Show T1 { %D5; !gear_rareJewellery1; BaseType == derived.rares.jwl.belts.t1; }
		Show T2 { %D4; !gear_rareJewellery2; BaseType == derived.rares.jwl.belts.t2; }
		Show T3 { %D4; !gear_rareJewellery3; BaseType == derived.rares.jwl.belts.t3; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - Droplevel Hiding
#===============================================================================================================

#!! Waypoint c6.rare.drophiders : "Rare Endgame Items - Hide armor and weapon types easily"

	Section ConditionalHiders : Rarity Rare, Auto("Endgame->conditionalhiders->rare")
	{
		HideD HideWeaponsByType { !hiding_minimize; Class == classes_weapons + "Quivers"; UnidentifiedItemTier <= 2; }
		HideD ArHider { !hiding_minimize; AR(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD EvHider { !hiding_minimize; EV(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD EsHider { !hiding_minimize; ES(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD ArEvHider { !hiding_minimize; AREV(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD ArEsHider { !hiding_minimize; ARES(); Class == classes_armor; UnidentifiedItemTier <= 2; }
		HideD EvEsHider { !hiding_minimize; EVES(); Class == classes_armor; UnidentifiedItemTier <= 2; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear
#===============================================================================================================

#!! Waypoint c6.rare.t1.all : "Rare Endgame Items - T1 (75ish+ gear)"

	Section EndgameRareGear : Auto("rr"), Class == classes_nonJwlryEquip
	{
		# T1 rares
		Show T1_top 	{ %D5; !gear_rareEquip1; BaseType == derived.general.unbiased.equip.t1; TopMods(); }
		Show T1_other  	{ %D4; !gear_rareEquip1; BaseType == derived.general.unbiased.equip.t1; ItemLevel <= 81;  }

#!! Waypoint c6.rare.t2.all : "Rare Endgame Items - T2 (70ish+ gear)"
		
		Show T2_top 	{ %D4; !gear_rareEquip1; BaseType == derived.general.unbiased.equip.t2; TopMods(); }
		Show T2_a1  	{ %D3; !gear_rareEquip2; BaseType == derived.general.unbiased.equip.t2; ItemLevel >= 75; ItemLevel <= 81; }
		Show T2_other  	{ %D4; !gear_rareEquip1; BaseType == derived.general.unbiased.equip.t2; ItemLevel <= 74;  }

#!! Waypoint c6.rare.t3.all : "Rare Endgame Items - T3 (65ish+ gear)"

		Show T3_top 	{ %D3; !gear_rareEquip2; BaseType == derived.general.unbiased.equip.t3; TopMods(); }
		Show T3_a1 		{ %D2; !gear_rareEquip3; BaseType == derived.general.unbiased.equip.t3; ItemLevel >= 75; ItemLevel <= 81; }
		Show T3_a2 		{ %D3; !gear_rareEquip2; BaseType == derived.general.unbiased.equip.t3; ItemLevel >= 70; ItemLevel <= 74; }
		Show T3_other 	{ %D4; !gear_rareEquip1; BaseType == derived.general.unbiased.equip.t3; ItemLevel <= 69;  }

#!! Waypoint c6.rare.t4.all : "Rare Endgame Items - T4 (55ish+ gear)"

		Show T4_a1 		{ %D1; !gear_rareEquip3; BaseType == derived.general.unbiased.equip.t4;  ItemLevel >= 75; }
		Show T4_a2 		{ %D2; !gear_rareEquip2; BaseType == derived.general.unbiased.equip.t4;  ItemLevel >= 70; ItemLevel <= 74; }
		Show T4_other 	{ %D3; !gear_rareEquip2; BaseType == derived.general.unbiased.equip.t4;  ItemLevel <= 69; }

#!! Waypoint c6.rare.t5.all : "Rare Endgame Items - T5 (lower)"

		Show T5_a1 		{ %D1; !gear_rareEquip3; ItemLevel >= 75; }
		Show T5_a2 		{ %D2; !gear_rareEquip3; ItemLevel >= 70; ItemLevel <= 74; }
		Show T5_other	{ %D3; !gear_rareEquip2; ItemLevel <= 69; }
	}
}

#===============================================================================================================
# [[0200]] Untiered Rare Catcher
#===============================================================================================================
#!! Waypoint c6.rare.rest : "Rare Endgame Items - Others, Salvagable bases"

Section SalvagableRares : Rarity Rare, Auto("Rare->Salvagable"), ItemLevel >= eglevel
{
	# Double Quality Currencies
	Show Quality2MartialAny { !itemProperty_salvage2; %D3; Class == classes_attack; Quality >= 10; }
	Show Quality2CasterAny  { !itemProperty_salvage1; %D3; Class == classes_cast; Quality >= 10; }
	Show Quality2ArmorAny   { !itemProperty_salvage1; %D5; Class == classes_armor; Quality >= 10; }

	# Single Quality Currencies
	Show QualityMartialAny { !itemProperty_salvage2; %D2; Class == classes_attack; Quality >= 1; }
	Show QualityCasterAny  { !itemProperty_salvage2; %D2; Class == classes_cast; Quality >= 1; }
	Show QualityArmorAny   { !itemProperty_salvage2; %D4; Class == classes_armor; Quality >= 1; }

	# Artificer Scraps
	Show SocketsLarge1 	   { !itemProperty_salvage2; %D1; Class == classes_equip; Sockets > 0; Height >= 3; Width >= 2; }
	Show SocketsLarge2 	   { !itemProperty_salvage2; %D1; Class == classes_equip; Sockets > 0; Height >= 4; }
	Show SocketsSmall 	   { !itemProperty_salvage2; %D2; Class == classes_equip; Sockets > 0; Height < 3 }
}

#===============================================================================================================
# [[0200]] Hide Layer 2 - Rare Gear
#===============================================================================================================
Section HideLayer2 : EG(), Rarity Rare, Class == classes_equip
{
	Show RaresEndgameAny { !gear_UnremarkableDrop; %D0; Auto("LowStrictnessShowLayer"); }
	Hide RaresEndgame {  Auto("HideLayer");  }
}

#===============================================================================================================
# [[0200]] Socketables - Runes and Soul Cores
#===============================================================================================================
#!! Waypoint c7.miscgear.socketables : "Socketables - Runes and Soul Cores"

Section Socketables : Auto("sockets->general"), Class == "Socketable"
{ 
	var allPreferredRunes = socketables.generic.exCommonPref1 + socketables.generic.exCommonPref2 + socketables.generic.exCommonPref3;
	var allCommonRunes = socketables.generic.exCommon1 + socketables.generic.exCommon2 + socketables.generic.exCommon3;
	var allNicheRunes = allCommonRunes - allPreferredRunes;
	var endgameNicheRunes = socketables.generic.exCommon1 - socketables.generic.exCommonPref1;

	Show socketLeveling1 { %D4; !Tiering_CurrencyD; LVL(); BaseType == socketables.generic.exCommonPref1 + socketables.generic.exCommonPref2 + socketables.generic.exCommonPref3; }
	Show socketLeveling2 { %D4; !Tiering_supplylvl2; LVL(); BaseType == allNicheRunes; }

	Show s { !Tiering_TierS; BaseType == socketables.generic.s; }
	Show a { !Tiering_CurrencyA; BaseType == socketables.generic.a; }
	Show b { !Tiering_CurrencyB; BaseType == socketables.generic.b; }
	Show c { %H6; !Tiering_CurrencyC; BaseType == socketables.generic.c; }
	Show d { %H5; !Tiering_CurrencyD; BaseType == socketables.generic.d + socketables.generic.exCommonPref1; }
	Show e { %H4; !Tiering_CurrencyE; BaseType == socketables.generic.e + endgameNicheRunes; }

	Show SupplyLow 	 { %H3; !Tiering_SupplyCurrency2; BaseType == socketables.generic.exCommon2 + socketables.generic.exCommon3; }

	Hide exHide { !hiding_minimize; BaseType == socketables.generic.b + socketables.generic.c + socketables.generic.d + socketables.generic.e + allCommonRunes; }
	Show restex { !misc_unknownitem; BaseType "Soul Core" "Rune" "Talisman"; }
}

#===============================================================================================================
# [[0200]] Jewels
#===============================================================================================================
#!! Waypoint c7.jewels.generic.all : "Jewels"

Section Jewels : Class == "Jewels", Auto("jewels->generic")
{
	Show AnyTimeLost  { !exotics_SpecialB; Rarity <= Rare; BaseType == timeLostJewels; }
	
	Show AnyCorruptedMod 	  { !exotics_SpecialB; Corrupted True; Rarity <= Rare; AnyEnchantment True; }
	Show Any5Modded			  { !exotics_SpecialB; Corrupted True; Rarity <= Rare; HasExplicitMod >=5 "a" "o" "e" "u" "i" "y"; }

	Show AnyRare  	  { !gear_jewelRare; Rarity Rare; BaseType == genericJewels; }
	Show AnyMagic 	  { !gear_jewelMagic; %H5; Rarity <= Magic; BaseType == genericJewels; }
}

#===============================================================================================================
# [[0200]] Relics
#===============================================================================================================
#!! Waypoint c7.relics.generic.all : "Relics (Trial of the Sekhema)"

# Relics currently are not hidable, due to an ingame limitation.
Section TrialRelics : Auto("relics->generic"), !exotics_SpecialD
{
	Show Any { Rarity <= Magic; BaseType == bases.exotic.relics; }
}

#===============================================================================================================
# [[3900]] Gems and Uncut Gems
#===============================================================================================================
#!! Waypoint c8.gems.uncut : "Gems - Uncut"

Section UncutGems : Auto("gems->uncut")
{
	# Level20
	Show Spirit20 { !Tiering_TierS; BaseType == "Uncut Spirit Gem"; ItemLevel >= 20; }
	Show Skill20  { !Tiering_TierS; BaseType == "Uncut Skill Gem"; ItemLevel >= 20; }

	# Level19
	Show Spirit19 { %H5; !typebased_gems1; BaseType == "Uncut Spirit Gem"; ItemLevel = 19; }
	Show Skill19  { %H5; !typebased_gems1; BaseType == "Uncut Skill Gem"; ItemLevel = 19; }

	# Spirit Gem Progression
	Show SpiritGemProgression18 { %H4; !typebased_gems2; BaseType == "Uncut Spirit Gem"; ItemLevel = 18; AreaLevel <= 78; }
	Show SpiritGemProgression17 { %H4; !typebased_gems2; BaseType == "Uncut Spirit Gem"; ItemLevel = 17; AreaLevel <= 76; }
	Show SpiritGemProgression16 { %H4; !typebased_gems2; BaseType == "Uncut Spirit Gem"; ItemLevel = 16; AreaLevel <= 73; }
	Show SpiritGemProgression15 { %H4; !typebased_gems2; BaseType == "Uncut Spirit Gem"; ItemLevel = 15; AreaLevel <= 69; }
	Show SpiritGemProgression14 { %H4; !typebased_gems2; BaseType == "Uncut Spirit Gem"; ItemLevel = 14; AreaLevel <= 65; }

	# Skill Gem Progression
	Show SkillGemProgression18 { %H3; !typebased_gems2; BaseType == "Uncut Skill Gem"; ItemLevel = 18; AreaLevel <= 78; }
	Show SkillGemProgression17 { %H3; !typebased_gems2; BaseType == "Uncut Skill Gem"; ItemLevel = 17; AreaLevel <= 76; }
	Show SkillGemProgression16 { %H3; !typebased_gems2; BaseType == "Uncut Skill Gem"; ItemLevel = 16; AreaLevel <= 73; }
	Show SkillGemProgression15 { %H3; !typebased_gems2; BaseType == "Uncut Skill Gem"; ItemLevel = 15; AreaLevel <= 69; }
	Show SkillGemProgression14 { %H3; !typebased_gems2; BaseType == "Uncut Skill Gem"; ItemLevel = 14; AreaLevel <= 65; }

	# All gems during campaign with sounds
	Show SpiritCampaign  { %H5; !typebased_gems2; BaseType == "Uncut Spirit Gem"; LVL(); }
	Show SkillCampaign   { %H5; !typebased_gems2; BaseType == "Uncut Skill Gem"; LVL(); }
	Show SupportCampaign { %H5; !typebased_gems2; BaseType == "Uncut Support Gem"; LVL(); }

	# Lower highlight for lower level gems in maps
	Show OtherSpiritEg  { %H2; !typebased_gems3; BaseType == "Uncut Spirit Gem"; EG(); }
	Show OtherSkillEg   { %H2; !typebased_gems3; BaseType == "Uncut Skill Gem"; EG(); }
	Show OtherSupportEg { %H3; !typebased_gems3; BaseType == "Uncut Support Gem"; EG(); }

	# Hider for filterblade
	Hide exHide { !hiding_minimize; BaseType == "Uncut Spirit Gem" "Uncut Support Gem" "Uncut Skill Gem";}
}

#!! Waypoint c8.gems.others : "Gems - Specific"

Section Gems : Auto("gems"), Class == class_gems
{
	Show any { !typebased_gems2; Empty(); }
}

#===============================================================================================================
# [[4400]] Waystones
#===============================================================================================================
#!! Waypoint c9.waystones.all : "Waystones - Override All"

Section Waystones : Class == "Waystones"
{
#===============================================================================================================
# [[0200]] Normal Waystone Progression
#===============================================================================================================

#!! Waypoint c9.waystone.special : "Waystones - Override Hider Rules"

	Section MapHiders : Auto("waystone->hiders")
	{		
		HideD corruptedMapHider { !hiding_minimize; Corrupted True; Rarity <= Magic; }
		HideD mirroredMapHider { !hiding_minimize; Mirrored True; Rarity <= Magic; }
	}

#------------------------------------
# [4403] Generic Decorators
#------------------------------------

#!! Waypoint c9.waystone.decorators.all : "Waystones - Decorators"

	Section GenericWaystones : Auto("waystones")
	{		
		Cont decoMap1 { !maps_deco1; WaystoneTier >= 15; }
		Cont decoMap2 { !maps_deco2; WaystoneTier >= 12; WaystoneTier <= 14; }
		
		Cont decoMap3 { !maps_deco3; WaystoneTier >= 6; WaystoneTier <= 11;  }
		Cont decoMap4 { !maps_deco4; WaystoneTier >= 1; WaystoneTier <= 5; }

		Cont deco_wsup_t16 { !maps_decotierupgrade; WaystoneTier >= 16; AreaLevel < 80; }
		Cont deco_wsup_t15 { !maps_decotierupgrade; WaystoneTier >= 15; AreaLevel < 79; }
		Cont deco_wsup_t14 { !maps_decotierupgrade; WaystoneTier >= 14; AreaLevel < 78; }
		Cont deco_wsup_t13 { !maps_decotierupgrade; WaystoneTier >= 13; AreaLevel < 76; }
		Cont deco_wsup_t12 { !maps_decotierupgrade; WaystoneTier >= 12; AreaLevel < 75; }
		Cont deco_wsup_t11 { !maps_decotierupgrade; WaystoneTier >= 11; AreaLevel < 74; }
		Cont deco_wsup_t10 { !maps_decotierupgrade; WaystoneTier >= 10; AreaLevel < 73; }
		Cont deco_wsup_t9  { !maps_decotierupgrade; WaystoneTier >= 9; AreaLevel < 72; }
		Cont deco_wsup_t8  { !maps_decotierupgrade; WaystoneTier >= 8; AreaLevel < 72; }
		Cont deco_wsup_t7  { !maps_decotierupgrade; WaystoneTier >= 7; AreaLevel < 71; }
		Cont deco_wsup_t6  { !maps_decotierupgrade; WaystoneTier >= 6; AreaLevel < 70; }
		Cont deco_wsup_t5  { !maps_decotierupgrade; WaystoneTier >= 5; AreaLevel < 69; }
		Cont deco_wsup_t4  { !maps_decotierupgrade; WaystoneTier >= 4; AreaLevel < 68; }
		Cont deco_wsup_t3  { !maps_decotierupgrade; WaystoneTier >= 3; AreaLevel < 67; }
		Cont deco_wsup_t2  { !maps_decotierupgrade; WaystoneTier >= 2; AreaLevel < 66; }
		Cont deco_wsup_t1  { !maps_decotierupgrade; WaystoneTier >= 1; AreaLevel < eglevel; }

		ContD decoMap1Overleveled  { !maps_decooverlevel; WaystoneTier >= 1; WaystoneTier <= 11; AreaLevel >= 78; }
		ContD decoMap2Overleveled  { !maps_decooverlevel; WaystoneTier >= 1; WaystoneTier <= 8; AreaLevel >= 76; }
		ContD decoMap3Overleveled  { !maps_decooverlevel; WaystoneTier >= 1; WaystoneTier <= 6; AreaLevel >= 74; }
		ContD decoMap4Overleveled  { !maps_decooverlevel; WaystoneTier >= 1; WaystoneTier <= 3; AreaLevel >= 72; }

		# semi-strict, currently: t14 map, find: t1 map, shown based on t1

		Cont deco_corruptedMod  { !exotics_corrupthigh; AnyEnchantment True; }

#------------------------------------
# [4403] Special Maps
#------------------------------------

		Show enchanted1     { %D6; !Maps_SpecialB; AnyEnchantment True; WaystoneTier >= 14; }
		Show enchanted2  	{ %D5; !Maps_SpecialC; AnyEnchantment True; WaystoneTier >= 11; WaystoneTier <= 13; }
		Show enchanted34  	{ %D4; !Maps_SpecialC; AnyEnchantment True; WaystoneTier >= 1;  WaystoneTier <= 10; }

		Show corrupted8high { !Maps_SpecialB; Corrupted True; WaystoneTier >= 14; HasExplicitMod >=8 "a" "o" "e" "u" "i" "y"; }
		Show corrupted8 { %H4; !Maps_SpecialC; Corrupted True; HasExplicitMod >=7 "a" "o" "e" "u" "i" "y"; }

#------------------------------------
# [4403] Waystone progression
#------------------------------------

#!! Waypoint c9.waystone.generic.t16 : "Waystones - t15-t16"

		Show waystone_t16 { !Maps_SpecialB; WaystoneTier >= 16; }
		Show waystone_t15 { !maps_regularhighest; WaystoneTier = 15; }

#!! Waypoint c9.waystone.generic.t14 : "Waystones - t12-t14"
		
		Show waystone_t14 { %D5;  !maps_regularhigh; WaystoneTier = 14; }
		Show waystone_t13 { %DS3; !maps_regularhigh; WaystoneTier = 13; }
		Show waystone_t12 { %DS3; !maps_regularhigh; WaystoneTier = 12; }

#!! Waypoint c9.waystone.generic.t11 : "Waystones - t7-t11"

		Show waystone_t11 { %DS3; !maps_regularmid; WaystoneTier = 11; }
		Show waystone_t10 { %DS3; !maps_regularmid; WaystoneTier = 10; }
		Show waystone_t9  { %DS3; !maps_regularmid; WaystoneTier = 9; }
		Show waystone_t8  { %DS3; !maps_regularmid; WaystoneTier = 8; }
		Show waystone_t7  { %DS3; !maps_regularmid; WaystoneTier = 7; }
		
#!! Waypoint c9.waystone.generic.t6 : "Waystones - T1-T6"

		Show waystone_t6  { %DS3; !maps_regularlow; WaystoneTier = 6; }
		Show waystone_t5  { %DS3; !maps_regularlow; WaystoneTier = 5; }
		Show waystone_t4  { %DS3; !maps_regularlow; WaystoneTier = 4; }
		Show waystone_t3  { %DS3; !maps_regularlow; WaystoneTier = 3; }
		Show waystone_t2  { %DS3; !maps_regularlow; WaystoneTier = 2; }
		Show waystone_t1  { %DS3; !maps_regularlow; WaystoneTier = 1; }

		Show waystone_rares_other { %D4; !maps_regularlow; Rarity Rare; }

		Hide exHide { !hiding_minimize; Rarity <= Rare; WaystoneTier <= 15; }
		Show restex { !misc_unknownitem; Empty(); }
	}
}

#===============================================================================================================
# [[4900]] Currency - Exceptions - Leveling Currencies
#===============================================================================================================
#!! Waypoint c9.currency.leveling.nonstacked : "Tierlist - Currency - Leveling Currency"
Section LevelingCurrencies : Auto("Currency->Leveling"), Class == class_currency, LVL()
{
	Show rare 	  	   { %D5; !Tiering_CurrencyD; !unknown_s2; BaseType == currency.leveling.rare; }
	Show magic    	   { %D4; !Tiering_supplylvl2; !unknown_s2; BaseType == currency.leveling.magic; }
	Show wisdomStart   { %D3; !Tiering_SupplyCurrency3; !unknown_s3; AreaLevel < 17; BaseType == currency.leveling.wisdom; }
	Show wisdom   	   { %D3; !Tiering_SupplyCurrency4; BaseType == currency.leveling.wisdom; }
}

#===============================================================================================================
# [[4900]] Currency - Regular Currency Tiering
#===============================================================================================================
#!! Waypoint c9.currency.single : "Tierlist - Currency - General"

Section CurrencyTiering : Auto("currency"), Class == class_currency
{
	Show s { !Tiering_TierS; BaseType == currency.generic.s; }
	Show a { !Tiering_CurrencyA; BaseType == currency.generic.a; }
	Show b { !Tiering_CurrencyB; BaseType == currency.generic.b; }
	Show c { !Tiering_CurrencyC; BaseType == currency.generic.c; }
	Show d { %H5; !Tiering_CurrencyD; BaseType == currency.generic.d; }
	Show e { %H3; !Tiering_CurrencyE; BaseType == currency.generic.e; }

	# Artifacts and special drops
	Show ArtifactLike { !tiering_specialArtifact; BaseType == currency.generic.supply1; }

	Show SupplyMagic 	 { %H3; !Tiering_SupplyCurrency2; BaseType == currency.generic.supply2; }
	Show SuppliesLow 	 { %H1; !Tiering_SupplyCurrency4; BaseType == currency.generic.supply3; }
	
	Hide exHide 	 { !hiding_minimize; BaseType == currency.generic.b + currency.generic.c + currency.generic.d + currency.generic.e + currency.generic.supply1 + currency.generic.supply2 + currency.generic.supply3; }
}

#===============================================================================================================
# [[4900]] Currency - SPECIAL
#===============================================================================================================

#------------------------------------
# [5104] Distilled Emotions (Delirium)
#------------------------------------
#!! Waypoint c9.currency.emotions.all : "Tierlist - Distilled Emotions (Delirium)"

Section CurrencyEmotions : Auto("currency->emotions"), Class == class_currency
{
	Show s { !Tiering_TierS;     BaseType == currency.emotions.s; }
	Show a { !Tiering_CurrencyA; BaseType == currency.emotions.a; }
	Show b { !Tiering_CurrencyB; BaseType == currency.emotions.b; }
	Show c { %H6; !Tiering_CurrencyC; BaseType == currency.emotions.c; }
	Show d { %H5; !Tiering_CurrencyD; BaseType == currency.emotions.d; }
	Show e { %H4; !Tiering_CurrencyE; BaseType == currency.emotions.e; }
	Hide exHide { !hiding_minimize; BaseType == currency.emotions.b + currency.emotions.c + currency.emotions.d + currency.emotions.e; }
	Show restex { !misc_unknownitem; BaseType "Distilled "; }
}

#------------------------------------
# [5104] Catalysts (breach)
#------------------------------------
#!! Waypoint c9.currency.catalysts.all : "Tierlist - Catalysts (Breach)"

Section CurrencyCatalysts : Auto("currency->catalysts"), Class == class_currency
{
	Show s { !Tiering_TierS;     BaseType == currency.catalysts.s; }
	Show a { !Tiering_CurrencyA; BaseType == currency.catalysts.a; }
	Show b { !Tiering_CurrencyB; BaseType == currency.catalysts.b; }
	Show c { %H6; !Tiering_CurrencyC; BaseType == currency.catalysts.c; }
	Show d { %HS4; !Tiering_CurrencyD; BaseType == currency.catalysts.d; }
	Show e { %HS2; !Tiering_CurrencyE; BaseType == currency.catalysts.e; }

	Hide exHide { !hiding_minimize; BaseType == currency.catalysts.b + currency.catalysts.c + currency.catalysts.d + currency.catalysts.e; }
	Show restex { !misc_unknownitem; BaseType "Catalyst"; }
}

#------------------------------------
# [5104] Essences
#------------------------------------
#!! Waypoint c9.currency.essences.all : "Tierlist - Essences"

Section CurrencyEssence : Auto("currency->essence"), Class == class_currency
{
	Show s { !Tiering_TierS;     BaseType == currency.essence.s; }
	Show a { !Tiering_CurrencyA; BaseType == currency.essence.a; }
	Show b { !Tiering_CurrencyB; BaseType == currency.essence.b; }
	Show c { !Tiering_CurrencyC; BaseType == currency.essence.c; }
	Show d { %H6; !Tiering_CurrencyD; BaseType == currency.essence.d; }
	Show e { %H5; !Tiering_CurrencyE; BaseType == currency.essence.e; }

	Hide exHide { !hiding_minimize; BaseType == currency.essence.b + currency.essence.c + currency.essence.d + currency.essence.e; }
	Show restex { !misc_unknownitem; BaseType "Essence"; }
}

#------------------------------------
# [5104] Omen (ritual)
#------------------------------------
#!! Waypoint c9.currency.omen.all : "Tierlist - Omen (Ritual)"

Section CurrencyOmen : Auto("currency->omen"), Class == "Omen"
{
	Show s { !Tiering_TierS;     BaseType == currency.omen.s; }
	Show a { !Tiering_CurrencyA; BaseType == currency.omen.a; }
	Show b { !Tiering_CurrencyB; BaseType == currency.omen.b; }
	Show c { !Tiering_CurrencyC; BaseType == currency.omen.c; }
	Show d { !Tiering_CurrencyD; BaseType == currency.omen.d; }
	Show e { %H5; !Tiering_CurrencyE; BaseType == currency.omen.e; }

	Hide exHide { !hiding_minimize; BaseType == currency.omen.b + currency.omen.c + currency.omen.d + currency.omen.e; }
	Show restex { !misc_unknownitem; BaseType "Omen "; }
}

#===============================================================================================================
# [[4900]] Misc Map Like
#===============================================================================================================
#!! Waypoint c10.fragments.special : "Special Keys - Pinnacle, Logbook"

Section SpecialMapLike : Auto("maplike->special")
{
	Show vaultKeys { !exotics_artifactHigh; BaseType miscmap.vaultKeys; }
	Show superkeys { !exotics_artifactHigh; Class == "Pinnacle Keys" }

	Show logbooksHigh  { !exotics_artifactHigh; Class == "Expedition Logbooks"; ItemLevel >= 77; }
	Show logbooksLow   { !exotics_artifactLow; %HS5; Class == "Expedition Logbooks"; }
}

#===============================================================================================================
# [[4900]] Uniques
#===============================================================================================================
#!! Waypoint c11.uniques.all : "Tierlist - Uniques - All"

Section Unique : Rarity Unique, Auto("uniques")
{
#------------------------------------
# [5702] Exceptions #1
#------------------------------------
	Show SekhemaRing { !Tiering_UniqueA; BaseType == "Ring"; Sockets > 0; }

#------------------------------------
# [5702] Tier 1 and 2 uniques
#------------------------------------
#!! Waypoint c11.uniques.t1 : "Tierlist - Uniques - T1, T2"

	Show t1 { !Tiering_TierS; BaseType == uniques.generic.t1; }
	Show t2 { !Tiering_UniqueA; BaseType == uniques.generic.t2 + uniques.generic.t2extra; }	

#------------------------------------
# [5705] Multi-Unique bases.
#------------------------------------
	Show multispecialhigh { !Tiering_UniqueX; BaseType == uniques.generic.multispecialhigh; }
	Show multispecial 	  { !Tiering_UniqueX; BaseType == uniques.generic.multispecial; }

#------------------------------------
# [5701] Low tier exceptions
#------------------------------------
#!! Waypoint c11.uniques.t1 : "Tierlist - Uniques - Low Tier Uniques"
	Show earlyleague 	  { !Tiering_UniqueB; BaseType == uniques.generic.earlyleague; }
	Show corrupteduniques { !Tiering_UniqueB; Corrupted True; AnyEnchantment True; Class == classes_equip; }

#------------------------------------
# [5708] Tier 3 uniques 
#------------------------------------	
	Show t3boss { %H5; !Tiering_UniqueBossDrop; BaseType == uniques.generic.t3boss; }
	Show t3 	{ %H5; !Tiering_UniqueB; BaseType == uniques.generic.t3; }
#------------------------------------
# [5709] Tier 4 uniques
#------------------------------------
	Show hideable  { %H4; !Tiering_UniqueC; BaseType == uniques.generic.hideable; }
	Show restex    { !misc_unknownitem; Empty(); }
}

#===============================================================================================================
# [[4900]] Splinters, Tablets, Fragments
#===============================================================================================================
#!! Waypoint c10.fragments.most : "Fragments and Splinters"

Section CurrencySplinterSimulacrum : Auto("currency->splinter"), Class == class_currency, BaseType == fragments.generic.splinters
{
	Show t1 { %D6; !Tiering_Splinter1; StackSize >= stacksize.commonSplinters.t1; }
	Show t2 { %D6; !Tiering_Splinter2; StackSize >= stacksize.commonSplinters.t2; }
	Show t3 { %D6; !Tiering_Splinter3; StackSize >= stacksize.commonSplinters.t3; }
	Show t4 { %D6; !Tiering_Splinter4; StackSize >= stacksize.commonSplinters.t4; }
	Show t5 { %HS5; !Tiering_Splinter5; Empty(); }
}

Section FullFragments : Auto("fragments->generic")
{
	Show s { !Tiering_TierS; BaseType == fragments.generic.s; }
	Show a { !Tiering_fragA; BaseType == fragments.generic.a; }
	Show b { !Tiering_fragB; BaseType == fragments.generic.b; }
	Show c { !Tiering_fragC; BaseType == fragments.generic.c; }
	Show d { !Tiering_fragD; BaseType == fragments.generic.d; }
	Show e { !Tiering_fragE; BaseType == fragments.generic.e; }

	Hide exHide { !hiding_minimize; BaseType == fragments.generic.b + fragments.generic.c + fragments.generic.d + fragments.generic.e; }
	Show restex { !misc_unknownitem; Class class_fragments; }
}

#===============================================================================================================
# [[4900]] Misc Map Items
#===============================================================================================================
#!! Waypoint c10.ascendancy.all : "Trial Keys"

Section MiscMapSafe : Auto("MiscMapItemsExtra")
{
	Show TrialKeyUltimatumReward { !Tiering_fragA; BaseType == "Inscribed Ultimatum"; Rarity >= Magic; }
	

	Show TrialKeySanctumTop 		 { %HS4; !Tiering_fragC; BaseType == "Djinn Barya"; ItemLevel >= 80; }
	Show TrialKeySanctumHigh 		 { %H4; !Tiering_fragC; BaseType == "Djinn Barya"; ItemLevel >= 60; ItemLevel <= 79 }
	Show TrialKeySanctumLow 		 { %HS2; !Tiering_fragD; !unknown_mute; BaseType == "Djinn Barya"; ItemLevel <= 59; }

	Show TrialSpecial 			     { %HS5; !Tiering_fragC; BaseType == "Test of Cunning Barya" "Test of Strength Barya" "Test of Time Barya" "Test of Will Barya"; }

	Show TrialKeyUltimatumTop 		 { %HS4; !Tiering_fragC; BaseType == "Inscribed Ultimatum"; ItemLevel >= 80; }
	Show TrialKeyUltimatumHigh 		 { %H4; !Tiering_fragC; BaseType == "Inscribed Ultimatum"; ItemLevel >= 75; ItemLevel <= 79 }
	Show TrialKeyUltimatumLow 		 { %HS2; !Tiering_fragD; !unknown_mute; BaseType == "Inscribed Ultimatum"; ItemLevel <= 74; }

	Show RelicKeysSafe { !Tiering_TierS; Class == "Vault Keys"; }
}

#===============================================================================================================
# [[4900]] Remaining Currency
#===============================================================================================================

Section CurrencyRemaining : Class == class_currency, Auto("Currency")
{
	Show restex { !misc_unknownitem; Empty(); }
}

#===============================================================================================================
# [[0200]] Leveling - Salvagable
#===============================================================================================================
#!! Waypoint c20.leveling.salvagable.all: "Leveling - Salvagable bases"

Section SalvagableLeveling : Rarity <= Magic, Auto("Leveling->Salvagable"), LVL()
{
	# Double Quality Currencies
	Show Quality2MartialAny { %D4; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_attack; Quality >= 10; }
	Show Quality2CasterAny  { %D4; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_cast; Quality >= 10; }
	Show Quality2ArmorAny   { %D5; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_armor; Quality >= 10; }
	Show Quality2Flask	    { %D5; !itemProperty_salvagelvl1; !unknown_s3; Class == class_flasks; Quality >= 10; }

	# Single Quality Currencies
	Show QualityMartialAny { %D4; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_attack; Quality >= 1; }
	Show QualityCasterAny  { %D4; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_cast; Quality >= 1; }
	Show QualityArmorAny   { %D4; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_armor; Quality >= 1; }
	Show QualityFlask	   { %D4; !itemProperty_salvagelvl1; !unknown_s3; Class == class_flasks; Quality >= 1; }

	# Artificer Scraps
	Show SocketsLarge1 	   { !itemProperty_salvagelvl2; %D3; Class == classes_equip; Sockets > 0; Height >= 3; Width >= 2; }
	Show SocketsLarge2 	   { !itemProperty_salvagelvl2; %D3; Class == classes_equip; Sockets > 0; Height >= 4; }
	Show SocketsSmall 	   { %D3; !itemProperty_salvagelvl1; !unknown_s3; Class == classes_equip; Sockets > 0; Height < 3 }
}

#===============================================================================================================
# [[6000]] Leveling - Hide outdated leveling flasks
#===============================================================================================================
#!! Waypoint c20.leveling.flasks.hidelayer : "Leveling - All flask rules"

Section HideLayer3 : Auto("HideLayer"), Quality 0, Class == class_flasks
{
	Show OutdatedLevelFlaskA { %H0; AreaLevel >= 15; BaseType "Lesser" "Medium"; }
	Show OutdatedLevelFlaskB { %H0; AreaLevel >= 30; BaseType "Greater" "Grand"; }
	Show OutdatedLevelFlaskC { %H0; AreaLevel >= 42; BaseType "Giant" "Colossal"; }
	Show OutdatedLevelFlaskD { %H0; AreaLevel >= 52; BaseType "Gargantuan"; }
	Show OutdatedLevelFlaskE { %H0; AreaLevel >= 62; BaseType "Transcendent"; }
}

#===============================================================================================================
# [[6000]] Leveling - Life Mana Flasks
#===============================================================================================================

#------------------------------------
# [6002] Life flasks
#------------------------------------
#!! Waypoint c20.leveling.flasks.progression : "Leveling - Flask Progression"

Section LevelingLifeFlasks : Class == "Life Flasks", Auto("Leveling->Flasks->Life"), !typebased_flaskcharms2, !unknown_s3
{
	Show t1  { FlaskHighlight(9,  "Medium");}
	Show t2  { FlaskHighlight(15, "Greater");}
	Show t3  { FlaskHighlight(22, "Grand");}
	Show t4  { FlaskHighlight(29, "Giant");}
	Show t5  { FlaskHighlight(39, "Colossal");}
	Show t6  { FlaskHighlight(49, "Gargantuan");}
	Show t7  { FlaskHighlight(59, "Transcendent");}
	Show t8  { FlaskHighlight(65, "Ultimate");}
}

#------------------------------------
# [6002] Mana flasks
#------------------------------------
Section LevelingManaFlasks : Class == "Mana Flasks", Auto("Leveling->Flasks->Mana"), !typebased_flaskcharms2, !unknown_s3
{
	Show t1  { FlaskHighlight(9,  "Medium");}
	Show t2  { FlaskHighlight(15, "Greater");}
	Show t3  { FlaskHighlight(22, "Grand");}
	Show t4  { FlaskHighlight(29, "Giant");}
	Show t5  { FlaskHighlight(39, "Colossal");}
	Show t6  { FlaskHighlight(49, "Gargantuan");}
	Show t7  { FlaskHighlight(59, "Transcendent");}
	Show t8  { FlaskHighlight(65, "Ultimate");}
}

#------------------------------------
# [6002] Charms
#------------------------------------
#!! Waypoint c21.leveling.gear.all : "Leveling - Gear - All"

Section LevelingCharms : Auto("Leveling->Charms"), LVL(), Rarity <= Magic
{
	Show Selected { %D4; !typebased_flaskcharms1; BaseType == bases.charms.optimal;} 
	Show Any 	  { %D2; !typebased_flaskcharms1; Class == "Charms";}
}

#===============================================================================================================
# [[6000]] Leveling - Rules
#===============================================================================================================

#------------------------------------
# [6002] Rares - Decorators
#------------------------------------
#!! Waypoint c21.leveling.decorators.all : "Leveling - Rares - Decorators"

Section LevelingRareDecorator : Auto("Leveling->Decorators->Rare"), Rarity Rare, LVL()
{
	ContD LargeRares 	{ !gear_unstyled; Height >= 3; Width >= 2; }
	ContD MediumRares1 	{ !gear_unstyled; Height >= 3; Width = 1; }
	ContD MediumRares2 	{ !gear_unstyled; Height = 2; Width = 2; }
	Cont  TinyRares 	{ !gear_decorareringamuletbelt; Height = 1; Width <= 2; }
}

#------------------------------------
# [6002] Rares - Universal
#------------------------------------
Section LevelingRareGear : Rarity Rare, LVL()
{
#!! Waypoint c21.leveling.rares.jewellery : "Leveling - Rares - Belts, Rings, Amulets"
	Section Universal : Auto("Leveling->Rare->universal")
	{
		Show Jewellery  { !gear_rareJewellery1; %D6; Class == classes_jewellery; }
	}

#!! Waypoint c21.leveling.rares.armors : "Leveling - Rares - Armour Pieces"
	Section ArmourTypes : Auto("Leveling->Rare->armours"), Class == classes_armor, !gear_rareEquip1
	{
		Show AR			{ %D4; AR(); }
		Show EV			{ %D4; EV(); }
		Show ES			{ %D4; ES(); }
		Show AREV		{ %D4; AREV(); }
		Show ARES		{ %D4; ARES(); }
		Show EVES		{ %D4; EVES(); }
		
		Show AnythingEarly { %H5; AreaLevel < 16; }
	}

	Section WeaponTypes : Auto("Leveling->Rare->weapons"), !gear_rareEquip1
	{
		Show Wands				{ %D4; Class == "Wands"; }
		Show Foci				{ %D4; Class == "Foci"; }
		Show Sceptres			{ %D4; Class == "Sceptres"; }
		Show Staves				{ %D4; Class == "Staves"; }

		Show Bows				{ %D4; Class == "Bows"; }
		Show Quivers			{ %D4; Class == "Quivers"; }
		Show Crossbows			{ %D4; Class == "Crossbows"; }

		Show Spears				{ %D4; Class == "Spears"; }
		Show Bucklers			{ %D4; Class == "Bucklers"; }

		Show OneHandMaces		{ %D4; Class == "One Hand Maces"; }
		Show TwoHandMaces		{ %D4; Class == "Two Hand Maces"; }

		Show Quarterstaves		{ %D4; Class == "Quarterstaves"; }
	}

#------------------------------------
# [6002] Rares - Other
#------------------------------------
#!! Waypoint c21.leveling.rares.low : "Leveling - Gear - Low Tier"

	Section Others : Auto("Leveling->Rare->Remaining") Class == classes_equip, !gear_rareEquip2
	{
		Show Any { %H3; Empty(); }
	}
}

#===============================================================================================================
# [[6400]] Leveling - Useful magic and normal items
#===============================================================================================================

#------------------------------------
# [6002] Decorators
#------------------------------------
#!! Waypoint c21.leveling.magicvendor.all : "Leveling - Normal and Magic - Magic Vendor Items"

Section LevelingMagicDecorator : Auto("Decorators->Leveling->Magic"), Rarity = Magic
{
	Cont LargeMagic  { !unknown_s4; LVL(); Height >= 3; Width >= 2; }
	Cont Medium1 	 { !unknown_s4; LVL(); Height >= 3; Width = 1; }
	Cont Medium2 	 { !unknown_s4; LVL(); Height = 2; Width = 2; }
	Cont NoticeEarly { !unknown_s3; AreaLevel <= leveling.keylevels.start; }
	Cont Tiny 	 	 { !unknown_s3; LVL(); Height = 1; Width <= 2; }
}

#------------------------------------
# [6002] Purpose Picked Items
#------------------------------------
Section LevelingMiscGear
{
	#!! Waypoint c21.leveling.normalmagic : "Leveling - Remarkable Normal and Magic Gear"
	Section RemarkableNormalMagic : Auto("Leveling->NormalMagicRemarkable")
	{
		Show Jewellery  { %D4; !gear_highlightDrop2; Class == classes_jewellery; Rarity <= Magic; }
		Show EarlyBoots { %D5; !gear_highlightDrop2; AreaLevel <= 32; Class == "Boots"; Rarity Magic; }
	}
}

#------------------------------------
# [6002] Conditional Rules
#------------------------------------
#!! Waypoint c21.leveling.firstlevels.all : "Leveling - Normal and Magic - First Levels"

Section NormalMagic
{
	Section ProgressiveHideRule : Auto("Leveling->progressivehide"), Rarity Normal, Class == classes_armor + classes_attack, !hiding_minimize
	{
		HideD normal1 { %RH1; DropLevel < 8; AreaLevel >= 22; }
		HideD normal2 { %RH1; DropLevel < 16; AreaLevel >= 30; }
		HideD normal3 { %RH1; DropLevel < 24; AreaLevel >= 40; }
		HideD normal4 { %RH1; DropLevel < 32; AreaLevel >= 48; }
		HideD normal5 { %RH1; DropLevel < 40; AreaLevel >= 56; }
		HideD normal6 { %RH1; DropLevel < 44; AreaLevel >= 60; }
	}

	Section ProgressiveHideRule : Auto("Leveling->progressivehide"), Rarity Magic, Class == classes_armor + classes_attack, !hiding_minimize
	{
		HideD magic1 { %RH2; DropLevel < 8; AreaLevel >= 22; }
		HideD magic2 { %RH2; DropLevel < 16; AreaLevel >= 30; }
		HideD magic3 { %RH2; DropLevel < 24; AreaLevel >= 40; }
		HideD magic4 { %RH2; DropLevel < 32; AreaLevel >= 48; }
		HideD magic5 { %RH2; DropLevel < 40; AreaLevel >= 56; }
		HideD magic6 { %RH2; DropLevel < 44; AreaLevel >= 60; }
	}

	Section ArmourTypes : Auto("Leveling->NormalMagic->armours"), Class == classes_armor_generic, Rarity <= Magic
	{
		Show AR				{ !gear_unstyled; %D3; AR(); }
		Show EV				{ !gear_unstyled; %D3; EV(); }
		Show ES				{ !gear_unstyled; %D3; ES(); }
		Show AREV			{ !gear_unstyled; %D3; AREV(); }
		Show ARES			{ !gear_unstyled; %D3; ARES(); }
		Show EVES			{ !gear_unstyled; %D3; EVES(); }
	}

	Section WeaponTypes : Auto("Leveling->NormalMagic->weapons"), Rarity <= Magic
	{
		Show Wands 			{ !gear_unstyled; %D3; Class == "Wands"; }
		Show Foci 			{ !gear_unstyled; %D3; Class == "Foci"; }
		Show Sceptres 		{ !gear_unstyled; %D3; Class == "Sceptres"; }
		Show Staves 		{ !gear_unstyled; %D3; Class == "Staves"; }

		Show Bows 			{ !gear_unstyled; %D3; Class == "Bows"; }
		Show Quivers 		{ !gear_unstyled; %D3; Class == "Quivers"; }
		Show Crossbows 		{ !gear_unstyled; %D3; Class == "Crossbows"; }

		Show Spears 		{ !gear_unstyled; %D3; Class == "Spears"; }
		Show Bucklers 		{ !gear_unstyled; %D3; Class == "Bucklers"; }

		Show OneHandMaces 	{ !gear_unstyled; %D3; Class == "One Hand Maces"; }
		Show TwoHandMaces 	{ !gear_unstyled; %D3; Class == "Two Hand Maces"; }

		Show Quarterstaves 	{ !gear_unstyled; %D3; Class == "Quarterstaves"; }
	}
}

#------------------------------------
# [6002] Others
#------------------------------------

Section OtherNormalMagics : Auto("Leveling->FirstLevels")
{
	Show FirstAreasMagic 			{ %D5; !unknown_s4; AreaLevel <= leveling.keylevels.firstZones; Rarity Magic; }
	Show FirstAreasNormal 			{ %D5; !unknown_s4; AreaLevel <= 3; Rarity Normal; }
}

Section MagicItemsMisc : Auto("Leveling->Magic->Remaining"), Class == classes_equip, Rarity = Magic
{
	Show Rest 		 { !gear_unstyled; %D2; AreaLevel >= leveling.keylevels.act2; AreaLevel <= eglevel; }
	Show Act2 		 { !gear_unstyled; %D4; AreaLevel >=leveling.keylevels.act1; AreaLevel <= leveling.keylevels.act2 ; }
	Show Act1 		 { !gear_unstyled; %D4; AreaLevel >=leveling.keylevels.firstZones; AreaLevel <= leveling.keylevels.act1; }
}

#!! Waypoint c22.hide.all : "HIDELAYER - Hide all known untiered items"

#------------------------------------
# [6002] Hide All known Section
#------------------------------------

Section HideLayerFinal : Class == classes_finalHider
{
	Show anyFinal { %D0; Auto("LowStrictnessShowLayer"); }
	Hide Final {  Auto("HideLayer");  }
}

#------------------------------------
# [6002] Show All unknown Section
#------------------------------------
#!! Waypoint c22.show.all : "SAFETYLAYER - Show all unknown items"

# THIS ENTRY IS CAUGHT IN 3 CASES:
# 1) YOUR FILTER IS OUT OF DATE!
# 2) YOU DID SOMETHING SILLY WHEN EDITING THE FILTER
# 3) YOU ENCOUNTERED A PREVIOUSLY UNKNOWN ITEM (VERY UNLIKELY)

Section AnyRemaining : Auto("AnyRemaining")
{
	Show restex { !misc_unknownitem; Empty(); }
}