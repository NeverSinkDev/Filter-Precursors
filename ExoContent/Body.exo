
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
##   {META} FUNCTIONS
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Func IdMods(){ Identified True;  }
Func Clean(){ Corrupted False; }

#===============================================================================================================
# [[0200]] Global overriding rules
#===============================================================================================================

#!! Chapter "High Priority Rules"
#!! Override 010 : "ALL Rules"

Section 6Links : Auto("6L"), LinkedSockets 6, Rarity <= Rare
{
	Show arm { !G1; Corrupted False; Class "Body Armours"; }
	Show wep { !G2; Empty(); }
}

#===============================================================================================================
# [[0200]] High tier influenced items
#===============================================================================================================

#!! Override 020 : "influenced rules"

Section Influenced : Rarity <= Rare
{
#------------------------------------
#   [1234] Influenced Maps
#------------------------------------

Section InfluencedMaps : Auto("maps->influenced"), Class "Maps"
{	
	Show InfShaper { !G2; !maps.T1; HasInfluence Shaper; }
	Show InfElder { !G2; !maps.T1; HasInfluence Elder; }
	Show InfConquerors { !G2; !maps.T1; HasInfluence Crusader Hunter Redeemer Warlord; }
}

#------------------------------------
#   [1234] Common Tier - T1
#------------------------------------

Section InfluencedCommon : Auto("influenced->common"), HasInfluence Crusader Elder Hunter Redeemer Shaper Warlord
{
	## Common influenced High Exclusivity Items like Ritual items and heist items. Shouldn't drop by default, but always highlighted.
	Show t1_exo { !G2; BaseType bases.influenced.exotic1.t1; }
}

#------------------------------------
#   [1234] Specialised Tier - T1
#------------------------------------

Section Crusader : HasInfluence Crusader, Auto("rare->crusader")
{
	Show t11 { !G2; ItemLevel >= 82; BaseType Influenced.Crusader.t11; }
	Show t12 { !G2; ItemLevel >= 85; BaseType Influenced.Crusader.t12; }
	Show t13 { !G2; ItemLevel >= 86; BaseType Influenced.Crusader.t13; }
}

Section Warlord : HasInfluence Warlord, Auto("rare->warlord")
{
	Show t11 { !G2; ItemLevel >= 82; BaseType Influenced.Warlord.t11; }
	Show t12 { !G2; ItemLevel >= 85; BaseType Influenced.Warlord.t12; }
	Show t13 { !G2; ItemLevel >= 86; BaseType Influenced.Warlord.t13; }
}

Section Redeemer : HasInfluence Redeemer, Auto("rare->redeemer")
{
	Show t11 { !G2; ItemLevel >= 82; BaseType Influenced.Redeemer.t11; }
	Show t12 { !G2; ItemLevel >= 85; BaseType Influenced.Redeemer.t12; }
	Show t13 { !G2; ItemLevel >= 86; BaseType Influenced.Redeemer.t13; }
}

Section Hunter : HasInfluence Hunter, Auto("rare->hunter")
{
	Show t11 { !G2; ItemLevel >= 82; BaseType Influenced.Hunter.t11; }
	Show t12 { !G2; ItemLevel >= 85; BaseType Influenced.Hunter.t12; }
	Show t13 { !G2; ItemLevel >= 86; BaseType Influenced.Hunter.t13; }
}

Section Shaper : HasInfluence Shaper, Auto("rare->shaper")
{
	Show t11 { !G2; ItemLevel >= 82; BaseType Influenced.Shaper.t11; }
	Show t12 { !G2; ItemLevel >= 85; BaseType Influenced.Shaper.t12; }
	Show t13 { !G2; ItemLevel >= 86; BaseType Influenced.Shaper.t13; }
}

Section Elder : HasInfluence Elder, Auto("rare->elder")
{
	Show t11 { !G2; ItemLevel >= 82; BaseType Influenced.Elder.t11; }
	Show t12 { !G2; ItemLevel >= 85; BaseType Influenced.Elder.t12; }
	Show t13 { !G2; ItemLevel >= 86; BaseType Influenced.Elder.t13; }
}

#------------------------------------
#   [1234] Common Tier - T2
#------------------------------------

Section InfluencedCommon : Auto("influenced->common"), HasInfluence Crusader Elder Hunter Redeemer Shaper Warlord
{
	## Common influenced Medium Exclusivity Items like Atlas bases. Rare drops and nearly always interesting
	Show t2_exo { !G4; %D5; BaseType bases.influenced.exotic2.t1; }
	## Top Tier Common items of top item level
	Show t2_86 { !G4; %D5; ItemLevel >= 86; BaseType bases.influenced.common1.t1; };
	## Top Tier Common items of item level 86+
	## Show HighTier86 { !G4; %D5; ItemLevel >= 86; BaseType bases.influenced.common2.t1; };
}

#------------------------------------
#   [1234] Specialised Tier - T2
#------------------------------------

	Section Crusader : HasInfluence Crusader, Auto("rare->crusader")
	{
		Show t21 { !G3; %D5; ItemLevel >= 80; BaseType Influenced.Crusader.t21; }
		Show t22 { !G3; %D5; ItemLevel >= 85; BaseType Influenced.Crusader.t22; }
	}

	Section Warlord : HasInfluence Warlord, Auto("rare->warlord")
	{
		Show t21 { !G3; %D5; ItemLevel >= 80; BaseType Influenced.Warlord.t21; }
		Show t22 { !G3; %D5; ItemLevel >= 85; BaseType Influenced.Warlord.t22; }
	}

	Section Redeemer : HasInfluence Redeemer, Auto("rare->redeemer")
	{
		Show t21 { !G3; %D5; ItemLevel >= 80; BaseType Influenced.Redeemer.t21; }
		Show t22 { !G3; %D5; ItemLevel >= 85; BaseType Influenced.Redeemer.t22; }
	}

	Section Hunter : HasInfluence Hunter, Auto("rare->hunter")
	{
		Show t21 { !G3; %D5; ItemLevel >= 80; BaseType Influenced.Hunter.t21; }
		Show t22 { !G3; %D5; ItemLevel >= 85; BaseType Influenced.Hunter.t22; }
	}

	Section Shaper : HasInfluence Shaper, Auto("rare->shaper")
	{
		Show t21 { !G3; %D5; ItemLevel >= 80; BaseType Influenced.Shaper.t21; }
		Show t22 { !G3; %D5; ItemLevel >= 85; BaseType Influenced.Shaper.t22; }
	}

	Section Elder : HasInfluence Elder, Auto("rare->elder")
	{
		Show t21 { !G3; %D5; ItemLevel >= 80; BaseType Influenced.Elder.t21; }
		Show t22 { !G3; %D5; ItemLevel >= 85; BaseType Influenced.Elder.t22; }
	}

#------------------------------------
#   [1234] Remaining
#------------------------------------

	Section Random : HasInfluence Crusader Elder Hunter Redeemer Shaper Warlord, Auto("rare->any")
	{
		Show AnyTrinket  { %D4; !GI; Class "Amulet" "Belts" "Rings"; }
		Show AnyTopLevel { %D4; !GI; !tiny; ItemLevel >= 86; }
		Show Any 		 { %D3; !GI; Empty(); }
	}
}

#===============================================================================================================
# [[9999]] ELDRITCH ITEMS
#===============================================================================================================
#!! Override 045 : "eldritch items"

Section Eldritch : Rarity <= Rare
{
	Section Exarch : Auto("rare->exarch")
	{
		Show t2high  { !G3; %D5; HasSearingExarchImplicit >= 5; }
		Show AnyHigh { !G3; %D4; HasSearingExarchImplicit >= 3; BaseType == bases.eldritch.common.t1; }
		Show Any 	 { !GI; %D3; HasSearingExarchImplicit >= 1; }
	}

	Section Eater : Auto("rare->eater")
	{
		Show t2high  { !G3; %D5; HasEaterOfWorldsImplicit >= 5; }
		Show AnyHigh { !G3; %D4; HasEaterOfWorldsImplicit >= 3; BaseType == bases.eldritch.common.t1; }
		Show Any 	 { !GI; %D3; HasEaterOfWorldsImplicit >= 1; }
	}
}

#===============================================================================================================
# [[0200]] Exotic Bases
#===============================================================================================================
#!! Override 030 : "heist and ritual bases"

# These bases don't usually drop during normal gameplay and are usually only acquired form certain sources
# These are bases such as heist and ritual bases.

Section ExoticBases : Auto("ExoticBases"), Rarity <= Rare
{
	## TODO: == and + together mess up parsing
	Show ExoticHeistBases 	  { !GSH; BaseType bases.exotic.heist.lower bases.exotic.heist.higher }
	Show ExoticRitualBases 	  { !GSH; BaseType bases.exotic.ritual.any }
	Show ExoticExpeditionBases{ %D5; !GSH; BaseType bases.exotic.expedition.any + "Iron Flask" }
	Show ExoticTalismanBases  { !GSH; BaseType == "Greatwolf Talisman" "Rot Head Talisman" }
	Show ExoticBasesMisc 	  { !GSH; BaseType == "Grasping Mail"; }
}

Section ExoticBasesLower : Auto("ExoticBasesLower"), Rarity <= Rare, Corrupted False, !exotic
{
	Show ExoticSacrificial { !GSH; !exotic.t2; BaseType == "Sacrificial Garb"; }
}

#===============================================================================================================
# [[9999]] IDENTIFIED MOD FILTERING
#===============================================================================================================
#!! Override 040 : "identified mod filtering"

Section IDModExceptions : Rarity "Rare", Auto("ExoticMods"), IdMods, !exotic
{
#------------------------------------
#   [1234] ID Mod exceptions - override id mod matching section
#------------------------------------
	Show t1veil     { %HS5; !GSH; !exotic.t1; Mod t1veiled; }
	Show t2veil     { %HS4; !GSH; !exotic.t2; Mod t2veiled; }
}

Section IdModSection : IdMods, !highvalueidmod
{
#------------------------------------
#   [1234] Physical
#------------------------------------
	Section Rare : Rarity "Rare", Auto("RareID"), !GSH
	{
		Section Weapons : Class classes_attack, DropLevel >= 55, Mod xattackphys_Core
		{
			Show Weapon_Phys     { Mod >= 3 xattackphys_Conf; }
			Show Weapon_PhysPure { Mod >= 2 xattackphys_Conf; Corrupted False; }
		}
#------------------------------------
#   [1234] Elemental
#------------------------------------
		Section FastEleWeapons : BaseType == quickWeapons, Mod xattackele_Core
		{
			Show Weapon_Ele { Mod >= 4 xattackele_Norm; }
			Show Weapon_ElePure { Mod >= 3 xattackele_Norm; Corrupted False; }
		}
#------------------------------------
#   [1234] Gembased
#------------------------------------
		Section GemLevels
		{
			Show Gem_Bow { Class "Bows"; Mod >=2 wgems_locallevelbow + ws_dot[1] }
			Show Gem_Caster { Class classes_1hcast; Mod >=2 w_cheatmods + convokingLvl + w_temple_Caster + wgems_alllevels_global + wgems_alllevels_global }
			Show Gem_Staves { Class classes_2hcast; Mod >=2 w_cheatmods + convokingLvl + w_temple_Caster + wgems_alllevels_staff }
		}
#------------------------------------
#   [1234] Caster
#------------------------------------
		Section Caster : Class == classes_1hcast, Mod xcaster_core
		{
			Show Caster_FireWeaponT2  { Mod >= 3 xcaster_firedmg_norm; }
			Show Caster_ColdWeaponT2  { Mod >= 3 xcaster_colddmg_norm; }
			Show Caster_LightWeaponT2 { Mod >= 3 xcaster_lightdmg_norm; }
			Show Caster_PhysWeaponT2  { Mod >= 3 xcaster_physdmg_norm; }
			Show Caster_ChaosWeaponT2 { Mod >= 3 xcaster_chaosdmg_norm; }
		}
#------------------------------------
#   [1234] Spellslinger
#------------------------------------
		Section Spellslinger : Class == "Wands", Mod xslinger_core
		{
			Show Caster_SlingerT2 { Mod >= 3 xslinger_default_norm; }
		}
#------------------------------------
#   [1234] Helmets
#------------------------------------
		Section Helmets : Class "Helmets"
		{
			Show Helmet_Life_based { Mod xhelmet_life_core; Mod >= 4 xhelmet_life_mix2; }
			Show Helmet_ES_based   { Mod xhelmet_es_core; Mod >= 4 xhelmet_es_mix2; }
		}
#------------------------------------
#   [1234] Boots
#------------------------------------
		Section Boots : Class "Boots"
		{
			Show Boots_Life_based { Mod xboots_life_core; Mod >= 4 xboots_life_mix2; }
			Show Boots_ES_based   { Mod xboots_es_core; Mod >= 4 xboots_es_mix2; }
		}
#------------------------------------
#   [1234] Gloves
#------------------------------------
		Section Gloves : Class "Gloves"
		{
			Show Gloves_Life_based { Mod xgloves_life_core; Mod >= 4 xgloves_life_mix2; }
			Show Gloves_ES_based   { Mod xgloves_es_core; Mod >= 4 xgloves_es_mix2; }
		}
#------------------------------------
#   [1234] Shields
#------------------------------------			
		Section Shields : Class "Shields"
		{
			Show Shield_ESFocus   		{ Mod >= 2 xshield_es_core; Mod >= 4 xshield_es_mix; }
			Show Shield_DefenseFocus   { Mod >= 2 xshield_defense_core; Mod >= 4 xshield_defense_mix; DropLevel >= 55; }
			Show Shield_CasterFocus   	{ Mod xshield_caster_core; 	Mod >= 4 xshield_caster_mix; }
			Show Shield_LifeFocus 		{ Mod xshield_life_core; 	Mod >= 4 xshield_life_mix; DropLevel >= 55; }
		}
#------------------------------------
#   [1234] Amulets
#------------------------------------
		Section Amulets : Class "Amulets"
		{
			Show Amu_exalter { Mod "Exalter's"; Corrupted False; Mirrored False; }

			Show Amu_1CoreCaster{ Mod xamu_aux_singlecore; Mod >= 4 xamu_caster_mix; }
			Show Amu_2CoreCaster{ Mod >= 2 xamu_aux_multicore; Mod >= 4 xamu_caster_mix; }

			Show Amu_1CoreDot	{ Mod xamu_aux_singlecore; Mod >= 4 xamu_dot_mix; }
			Show Amu_2CoreDot	{ Mod >= 2 xamu_aux_multicore; Mod >= 4 xamu_dot_mix; }

			Show Amu_1CoreAttack{ Mod xamu_aux_singlecore; Mod >= 4 xamu_attack_mix; }
			Show Amu_2CoreAttack{ Mod >= 2 xamu_aux_multicore; Mod >= 4 xamu_attack_mix; }
		}
#------------------------------------
#   [1234] Rings
#------------------------------------		
		Section Rings : Class "Rings"
		{
			Show Ring_Caster { Mod xring_core; Mod >= 4 xring_cast_mix; }
			Show Ring_Attack { Mod xring_core; Mod >= 4 xring_attack_mix; }
		}
#------------------------------------
#   [1234] Quivers
#------------------------------------	
		Section Quivers : Class "Quivers"
		{
			Show Quiv_Hit { Mod xquiver_core_mods; Mod >= 4 xquiver_mix_hit; }
			Show Quiv_Dot { Mod xquiver_core_mods; Mod >= 4 xquiver_mix_dot; }
		}
#------------------------------------
#   [1234] Body Armours
#------------------------------------	
		Section Body : Class "Body Armours", DropLevel >= 55
		{
			Show Body_Life { Mod xbody_core_life; Mod >= 5 xbody_aux_life; }
			Show Body_Defense { Mod >= 2 xbody_core_defense; Mod >= 4 xbody_aux_life; }
			Show Body_ES { Mod >= 2 xbody_core_es; Mod >= 4 xbody_aux_es; }
		}
#------------------------------------
#   [1234] Belts
#------------------------------------	
		Section Belts : Class "Belts"
		{
			Show Belt_General { Mod xbelt_core; Mod >= 4 xbelt_mix; }
		}
#------------------------------------
#   [1234] Jewels
#------------------------------------	
		Section Jewels : Class "Jewel"
		{
			Show PotentiallyValuableJewel { Mod >= 3 jewels_priority + jewels_general + jewels_mult + jewels_minion }
		}
	}
}

Section IdModSection : IdMods, Corrupted False, Rarity "Magic", Auto("MagicID"), !GSH
{
	Section Weapons : Class classes_attack, DropLevel >= 56
	{
		Show Phys { %D4; Mod >= 1 wdmg_pphys[1] + "of Many"; }
	}

	Section Caster : Class "Wands" "Sceptres" "Shields" "Rune Daggers"
	{
		Show DamageMods { %D4; Mod >= 1 wcast_spell[1] + wcast_fire[1] + wcast_cold[1] + wcast_light[1] + wgems_alllevels_global + convokingMods[1] + convokingLvl; }
	}

	Section Boots : Class "Boots"
	{
		Show Speed { %D4; Mod >= 1 boots_movespeed[1]; }
	}
}

#===============================================================================================================
# [[0200]] Exotic Mods Filtering
#===============================================================================================================

var exotic_incursion = "Citaqualotl" "Guatelitzi" "Matatl" "Puhuarte" "Tacati" "Topotante" "Xopec";
var exotic_delve = "of the Underground" "Subterranean";
var exotic_warband = "Betrayer's" "Brinerot" "Deceiver's" "Mutewind" "Redblade" "Turncoat's";

var exotic_bestiary_t1 = "of Farrul" "of Fenumus";
var exotic_bestiary_t2 = "of Craiceann" "of Saqawal";

var t1veiled = "Catarina's Veiled" "Elreon's Veiled" "Leo's Veiled" "Rin's Veiled" "Vagan's Veiled" "Vorici's Veiled";
var t2veiled = "Gravicius' Veiled" "Guff's Veiled" "Haku's" "It That Fled's Veiled" "Korell's Veiled" "of Aisling's Veil" "of Cameria's Veil" "of Hillock's Veil" "of Janus' Veil" "of Jorgin's Veil" "Riker" "Tora's Veiled";

Section IdModSectionSpecial : IdMods, !exotic
{
	Section Rare : Rarity "Rare", Auto("ExoticMods")
	{
#------------------------------------
#   [1234] Veiled/Betrayal - low prio veiled items
#------------------------------------
#!! Override 050 : "veil, incursion, delve etc. mod items"
		Show DuoVeil    { %D4; !GSH; !exotic.t3; Mod "Veiled"; Mod "of the Veil"; }
		Show SmallVeil1 { %D4; !GS;  !exotic.t3; Mod "Veil"; Width <= 2; Height <= 2; } 
		Show SmallVeil2 { %D4; !GS;  !exotic.t3; Mod "Veil"; Width <= 1; Height <= 4; }
		Show VeilRest   { %D3; !GS;  !exotic.t4; Mod "Veil"; }
#------------------------------------
#   [1234] Incursion/Temple Mods
#------------------------------------
		Show IncursionSpeedTraps { !GSH; %D5; !exotic.t2; Mod "Matatl's"; Class "Boots"; }
		Show IncursionCaster     { !GSH; %D5; !exotic.t2; Mod "Matatl's" "Tacati" "Topotante's"; Class "Shields" "Rune Dagger" "Sceptres" "Staves" "Wands" "Sceptres"; }
		Show IncursionElemental  { !GSH; %D5; !exotic.t2; Mod "Topotante's"; Class "Bows" "Claws" "Daggers" "Thrusting"; }
		Show IncursionJwlry		 { !GSH; %D5; !exotic.t2; Mod exotic_incursion; Class "Amulets" "Belts" "Rings"; }
		Show IncursionGloveHelm  { !GSH; %D5; !exotic.t2; Mod "Puhuarte" "Topotante"; Class "Gloves" "Helmets"; }
		Show IncursionAttack     { !GSH; %D5; !exotic.t2; Mod "of Tacati" "Tacati's"; Class "Bows" "Claws" "Daggers" "One Hand" "Two Hand" "Warstaves"; }
		Show IncursionLifeChest  { !GSH; %D4; !exotic.t2; Mod "Guatelitzi's"; Class "Body Armours"; }
		Show IncursionSumonner   { !GSH; %D4; !exotic.t2; Mod "Citaqualotl's"; Class "Claws" "Daggers" "One Hand" "Sceptres" "Staves" "Wands"; }
		Show IncursionMagic		 { !GS;  %D4; !exotic.t3; Mod exotic_incursion; Rarity Magic; }
		Show IncursionRandom     { !GS;  %D2; !exotic.t3; Mod exotic_incursion; }

#------------------------------------
#   [1234] Bestiary
#------------------------------------
		Show BestiaryValuable { !GSH; !exotic.t2; Mod exotic_bestiary_t1 }
		Show BestiaryOther    { !GSH; %D4; !exotic.t3; Mod exotic_bestiary_t2 }
#------------------------------------
#   [1234] Other
#------------------------------------
		Show DelveFractured    { !GSH; !exotic.t1; Mod exotic_delve; FracturedItem True; };
		Show Delve    { !GSH; %D6; !exotic.t2; Mod exotic_delve };
		Show Warband  { !GS;  %D4; !exotic.t3; Mod exotic_warband };
		Show Essence  { !GSH; %D6; !exotic.t2; Mod "of the Essence" "Essences" };
		Show Crafting { !GS;  %D1; !exotic.t4; Mod "of Crafting" "of Spellcraft" "of Weaponcraft" };
	}
}

#===============================================================================================================
# [[0200]] Exotic Item Classes
#===============================================================================================================
#!! Override 060 : "exotic gear: trinkets, watchstones etc., invitations"

Section ArtefactItemClasses
{	

#------------------------------------
#   [1234] Voidstones
#------------------------------------	
	Section Voidstones : Auto("artefact->trinkets")
	{
		Show Any { !G3; BaseType exotic.voidstones.t1; }
	}

#------------------------------------
#   [1234] Trinkets
#------------------------------------	
	Section Trinkets : Class "Trinkets", Auto("artefact->trinkets")
	{
		Show AnyTrinket { !G3; Empty(); }
	}
#------------------------------------
#   [1234] Secret Society Equipment
#------------------------------------
	Section Fishing : Class "Fishing Rod", Auto("artefact->redacted")
	{
		Show SCP3889 { !G1; Empty(); }
	}
}

#------------------------------------
#   [1234] Craftable Invitations
#------------------------------------	

Section QuestItemException : Auto("QuestlikeException")
{
	Show QuestItems { !QuestLike; Class "Pantheon Soul" "Quest"; }
}

Section Invitations : Auto("exotic->invitation"), !artefact, Rarity <= Rare
{
	Show T1 { !G1; BaseType == exotic.invitations.t1 }
	Show T2 { !G2; BaseType == exotic.invitations.t2 }
	Show T3 { !G3; %D6; BaseType == exotic.invitations.t3 }
}


#===============================================================================================================
# [[0200]] Exotic Item Variations
#===============================================================================================================
#!! Override 070 : "exotic gear: synthesised, fractured, enchanted gear"

Section ExoticVariations : !exotic
{	
#------------------------------------
#   [1234] Double Corruptions
#------------------------------------	
	Section RExoticVariations : Rarity Rare
	{
		Section DoubleCorrupted : Corrupted True, CorruptedMods >= 2, Auto("exotic->corruptions")
		{
			Show DoubleCorruptedJwlry { !GSH; %D6; !exotic.t1; Class "Amulet" "Belt" "Jewel" "Ring"; }
			Show DoubleCorruptedAny   { !GS;  %D5; !exotic.t2; Empty(); }
		}
	}
#------------------------------------
#   [1234] Abyss Jeweled Rares
#------------------------------------	
	Section NMRExoticVariations : Rarity <= Rare
	{
		Section AbyssJewelItems : SocketGroup "A", Auto("exotic->sockets")
		{
			Show AnyNonBelt { !GSH; !exotic.t2; Class classes_nonJwlryEquip; }
		}

#------------------------------------
#   [1234] Synthesised
#------------------------------------
		Section Synthesised : SynthesisedItem True, Auto("exotic->synthesised")
		{
			Show SynthSelected { !GSH; %D6; !exotic.t1; BaseType bases.crafting.synthesised.t1 }
			Show SynthClasses  { !GSH; %D6; !exotic.t1; Class classes_synth }
			Show SynthRandom   { !GS;  %D5; !exotic.t2; Empty(); }
		}
#------------------------------------
#   [1234] Fractured
#------------------------------------		
		Section Fractured : FracturedItem True, Auto("exotic->fractured")
		{
			Show FractSelected { !GSH; %D5; !exotic.t3; BaseType bases.crafting.fractured.t1 }
			Show FractClasses  { !GS;  %D4; !exotic.t3; Class classes_fract }
			Show FractRandom   { !GS;  %D2; !exotic.t4; Empty(); }
		}
#------------------------------------
#   [1234] Enchanted
#------------------------------------
		Section Enchanted : AnyEnchantment True, Auto("exotic->enchanted")
		{
			Show Exotic      { !GSH; %D7; !exotic.t1; Class classes_exoticEnch }
			Show Helmets     { !GSH; %D6; !exotic.t2; Class "Helmets";}
			Show AnointedAmulets     { !GSH; %D6; !exotic.t2; Class "Amulets" "Rings"; Corrupted False; }
			Show GlovesBoots { !GS;  %D2; !exotic.t4; Class "Gloves" "Boots" }
		}
	}
}

#===============================================================================================================
# [[0200]] Recipes and 5links
#===============================================================================================================
#!! Override 120 : "5links and 6sockets"

#------------------------------------
# [1234] Link Based
#------------------------------------

Section SocketsLinks : Rarity <= Rare, Auto("SocketsLinks"), !recipe
{
	Show 5LinksLeveling	{ %D4; !G3; !V2; !exotic.t2; LinkedSockets >= 5; AreaLevel <= 67; }
	Show 5Link6Sockets	{ %D4; !G5H; !*t1; !special; Sockets >= 6; LinkedSockets >= 5; }
	Show 5Links			{ %D3; !GS; !exotic.t3; LinkedSockets >= 5; AreaLevel >= 67; }
	Show 6Sockets		{ %DS3; !G5H; !*t1; Sockets >= 6; }
}

#===============================================================================================================
# [[0200]] High Level Crafting Bases
#===============================================================================================================
#!! Override 130 : "High level crafting bases"

#------------------------------------
# [1234] Expensive Atlas 86 Bases - matched by economy
#------------------------------------

Section Valuable : Clean(), Auto("Crafting->Expensive"), ItemLevel >= 86, Rarity <= Rare
{
	Show Any { !GSH; !exotic.t1; %D6; BaseType == expensivebases.any; }
}

#------------------------------------
# [1234] Perfection-Based-Filtering
#------------------------------------

Section EndgamePerfectionItems : Clean(), BaseDefencePercentile >= 99, !bestrolls
{
	Section PerfectArmours86 : Auto("Crafting->PerfectArmours"), ItemLevel >= 86, Rarity <= Rare, Class classes_armor
	{
		Show t1 { !G2;  %D6; BaseType == bases.perfection.general.t1; }
		Show t2 { !G3;  %D5; BaseType == bases.perfection.general.t2; }
		Show t3 { !GEX; %D4; BaseType == bases.perfection.general.t3; }
	}
}

#------------------------------------
# [1234] ILVL 86
#------------------------------------

Section EndgameCraftingBases : Clean(), !craftspecial, !craftgeneral
{
	Section CraftRareDecorators : Auto("Decorator->craftingrare"), Rarity Rare, !raredeco, !GEX
	{
		Cont RareDecoratorILVL75 { !raredeco.ilvl75; ItemLevel >= 75; }
		Cont RareDecoratorILVL84 { !raredeco.ilvl84; ItemLevel >= 84; }
		Cont RareDecoratorILVL86 { !raredeco.ilvl86; ItemLevel >= 86; }
		Cont RareDecoratorGear   { !raredeco.t1equip; ItemLevel >= 68; Class classes_nonJwlryEquip; }
		Cont RareDecoratorJwlry  { !raredeco.t1jewellery; ItemLevel >= 68; Class classes_jewellery; }
	}

	Section CraftNormalDecorators : Auto("Decorator->craftingrare"), Rarity <= Magic, ItemLevel >= 68, !GEX
	{
		Cont NormalDecorator { !Low; Class classes_nonJwlryEquip classes_jewellery; };
	}

	Section ILVL86 : Auto("normalcraft->i86"), ItemLevel >= 86, Rarity <= Rare
	{
		Show t1 { !G3;  %D6; !craftspecial.I86; BaseType == bases.crafting.general.t1; }
		Show t2 { !GEX; %D4; !craftgeneral.I86; BaseType == bases.crafting.general.t2; }
		Show t3 { !GEX; %D3; !craftgeneral.I86; BaseType == bases.crafting.general.t3; }
	}

#------------------------------------
# [1234] ILVL 84
#------------------------------------

	Section ILVL84 : Auto("normalcraft->i84"), ItemLevel >= 84, Rarity <= Rare
	{
		Show t1  { !G4;  %D4; !craftspecial.I84; BaseType == bases.crafting.general.t1; }
		Show t2  { !GEX; %D2; !craftgeneral.I84; BaseType == bases.crafting.general.t2; }
		ShowD t3 { !GEX; !craftgeneral.I84; BaseType == bases.crafting.general.t3; }
	}

#------------------------------------
# [1234] ILVL ANY
#------------------------------------

	Section ILVLANY : Auto("normalcraft->rest"), ItemLevel <= 83, ItemLevel >= 68, Rarity <= Rare
	{
		Show t1  { !G5;  %D2; !craftspecial.ANY; BaseType == bases.crafting.general.t1; }
		Show t2  { !GEX; %D0; !craftgeneral.ANY; BaseType == bases.crafting.general.t2; }
		ShowD t3 { !GEX; !craftgeneral.ANY; BaseType == bases.crafting.general.t3; }
	}

	Section DecoratorRemover : Auto("Decorator->craftinggeneric"), Class classes_equip, ItemLevel >= 68, !GEX
	{
		Cont RareDecoratorRemover { Rarity Rare; }
		Cont MagicDecoratorRemover { Rarity Magic; }
		Cont NormalDecoratorRemover { Rarity Normal; }
	}
}

# Minimal list of bases for harvest specific crafting. This list is really not conclusive, but you can adjust it yourself on filterblade or here.
# Having this list too long will lead to being too flooded with these drops.

Section AdditionalCrafting : Auto("normalcraft->extra"), Rarity < Magic, ItemLevel >= 68, ItemLevel <= 83, Clean()
{
	Show any { !GEX; %D1; BaseType bases.crafting.early; }
}

#------------------------------------
# [1234] RGB Endgame
#------------------------------------
#!! Override 140 : "Chromatic and Chisel Recipes"

Section RGBendgame : SocketGroup "RGB", Rarity < Rare, AreaLevel >= 67, Auto("EndgameRGB"), !recipe
{
	Show RGBSmall1	{ !G6H; %H2; !*t2; !SF40; Width <=2; Height <=2; }
	Show RGBSmall2	{ !G6H; %H2; !*t2; !SF40; Width <=1; Height <=4; }
	Show RGBLarge	{ !G6;  %H0; !*t3; !SF40; Width >=2; Height >=4; }
	Show RGBMedium	{ !G6;  %H1; !*t3; !SF40; Width >=2; Height = 3; }
}
#------------------------------------
# [1234] Chisel Recipes
#------------------------------------
Section ChiselRecipe : BaseType "Gavel" "Rock Breaker" "Stone Hammer", Auto("ChiselRecipe"), !recipe, !GEX
{
	Show Chisel20 				{ %D1; !*t2; Quality >= 20; Rarity < Unique; }
	Show ChiselHighQualNormal 	{ %D0; !*t3; Corrupted False; Quality > 14; Rarity Normal; }
	Show ChiselHighQualMagic  	{ %D0; !*t3; Corrupted False; Quality > 17; Rarity Magic; }
	Show ChiselAnyQualMagic  	{ %D0; !*t3; Corrupted False; Rarity Magic; }
	Show ChiselAnyQualNormal 	{ %D0; !*t3; Corrupted False; Rarity Normal; }
}

#===============================================================================================================
# [[0200]] Chancing Bases
#===============================================================================================================
#!! Override 150 : "Chancing bases"

Section Chancing : Clean(), Rarity Normal, Auto("chancing"), Mirrored False, !chancing, !GEX
{
	Show hh { %D1; BaseType == bases.chancing.higher; }
	Show t2 { %D1; BaseType == bases.chancing.any; }
}


#===============================================================================================================
# [[0200]] Endgame Flasks
#===============================================================================================================
#!! Override 160 : "Endgame Flasks"

Section EndgameFlasks : Auto("EndgameFlasks"), Rarity <= Magic, AreaLevel >= 68, !utilflasks
{

#------------------------------------
# [2701] Super Endgame Flasks
#------------------------------------

	Section SuperEndgameFlasks : !GEX
	{
		Show Utility85  { !G3; !utilflasks.LT1; %D4; ItemLevel >= 85; Class "Utility Flasks"; BaseType bases.flask.utilityassorted; }
		Show Utility84  { !G4; !utilflasks.LT2; %D4; ItemLevel >= 84; Class "Utility Flasks"; BaseType bases.flask.utilityassorted; }
		Show Utility82  { !G4; !utilflasks.LT3; %D3; ItemLevel >= 82; Class "Utility Flasks"; }
		Show LifeMana82 { !G5; !recipe.t2; %D3; ItemLevel >= 82;  BaseType bases.flask.lifemanaassorted; }
	}

#------------------------------------
# [2701] High quality assorted flasks
#------------------------------------

	Section HighQualityEndgameFlasks : Quality >= 15, !GEX
	{
		Show HighQualUtility  { !G5; %D3; !*lt1; AreaLevel <= 77; BaseType bases.flask.utilityassorted; }
		Show HighQUalLifeMana { !G6; %D2; !recipe.t2; AreaLevel <= 72; BaseType bases.flask.lifemanaassorted; }
	}

	Section 20QualEndgameFlasks : Quality >= 20, !G5
	{
		Show Any20QualFlask { %D3; !recipe.ts1; BaseType "Flask"; }
	}
#------------------------------------
# [2701] Utility OR quality flasks
#------------------------------------

	Section UtilityEndgameFlasks
	{
		Show AsortedUtility { %D2; !G6H; !*lt2; BaseType bases.flask.utilityassorted; AreaLevel <= 75; }
		Show AnyUtility 	{ %D2; !G6;  !*lt3; Class "Utility Flasks"; AreaLevel <= 72; }
	}

	Section QualityEndgameFlasks
	{
		Show QualityHigh { %D2; !G6H; !recipe.t2; BaseType "Flask"; Quality >= 15; AreaLevel <= 77; }
		Show QualityLow  { %D1; !G6; !recipe.t3; BaseType "Flask"; Quality >= 1; AreaLevel <= 77; }
	}
#------------------------------------
# [2705] Early mapping life/mana/utility flasks
#------------------------------------
	Section EarlyMappingLifeManaFlasks : BaseType bases.flask.lifemanaassorted
	{
		Show EarlyMappingLifeMana { %D2; !G7H; !Low; AreaLevel <= 69; }
	}
}

#===============================================================================================================
# [[0200]] Misc Rules
#===============================================================================================================
#!! Override 170 : "Overquality and endgame 4links"

Section MiscEndgameRules : Auto("MiscEndgameRules"), Clean(), Rarity < Rare, !GEX
{
	Show Overquality       { %D1; !exotic.t4; Quality >= 29; ItemLevel >= 75; DropLevel >= 50; Rarity <= Rare; Class classes_equip }
	Show EarlyEndgame4Link { %D1; !Low; LinkedSockets >= 4; AreaLevel <= 72; AreaLevel >= 68; Class "Body Armours" "Boots" "Gloves" "Helmets"; }
}

Section AnimatedWeapons : Auto("AnimatedWeapons"), !AnimatedWeapon, !GEX
{
	ShowD normalmelee  { Rarity Normal; Class "Claws" "Daggers" "One Hand" "Rune Dagger" "Thrusting" "Sceptres" "Staves" "Two Hand" "Warstaves";}
	ShowD normalranged { Rarity Normal; Class "Bows" "Wands";}
	ShowD magicmelee   { Rarity Magic; Class "Claws" "Daggers" "One Hand" "Rune Dagger" "Thrusting" "Sceptres" "Staves" "Two Hand" "Warstaves";}
	ShowD magicranged  { Rarity Magic; Class "Bows" "Wands";}
}

#===============================================================================================================
# [[0200]] Hide Layer 1 - Normal and Magic Endgame Gear
#===============================================================================================================

Section HideLayer1 : Auto("HideLayer")
{
	Hide NormalMagicEndgame { AreaLevel >= 68; Rarity < Rare; Class classes_equip + "Flask"; }
}

#===============================================================================================================
# [[0200]] Rare Item Decorators
#===============================================================================================================
#!! Chapter "Rare Endgame Items"
#!! Override 210 : "Rare continue/style sections sections"

Section RareDecorators : Auto("Decorators->rareeg"), Rarity Rare, ItemLevel >= 68, Class classes_equip, !raredeco, !GEX
{
	Cont LargeRares 	{ !*large; Height >= 3; Width >= 2; }
	Cont MediumRares1 	{ !*medium; Height >= 3; Width = 1; }
	Cont MediumRares2 	{ !*medium; Height = 2; Width = 2; }
	Cont TinyRares 		{ !*tiny; Height = 1; Width <= 2; }

	Cont ILVL68 { !*ilvl68; ItemLevel >= 68; }
	Cont ILVL75 { !*ilvl75; ItemLevel >= 75; }
	Cont ILVL84 { !*ilvl84; ItemLevel >= 84; }
	Cont ILVL86 { !*ilvl86; ItemLevel >= 86; }

	Cont CorruptedRares { !*corrupt; Corrupted True; CorruptedMods 0; }
	Cont CorruptedRaresImplicit { !*corruptimpl; Corrupted True; CorruptedMods >= 1; }
}

Section EndgameRares : Rarity Rare, ItemLevel >= 68
{
#===============================================================================================================
# [[0200]] Endgame - Rare - Exotic Corrupted Items
#===============================================================================================================
#!! Override 220 : "Talismans"

	Section BreachRings : Class "Rings", BaseType "Breach", Auto("rare->exotic->breachrings")
	{
		Show High { %HS2; !G4; !exotic.t2; ItemLevel >= 82; }
		Show Any  { %HS1; !G5; !exotic.t3; Empty(); }
	}

	Section Talismans : Class "Amulets", AnyEnchantment True, Auto("rare->exotic->talisman"), ItemLevel >= 68
	{
		Show T1AttackTalisman { %H5; !GSH; BaseType bases.talismans.attack.any + bases.talismans.universal.any + bases.talismans.damagetypes.any; Mod xamu_aux_multicore;  Mod >=4 xamu_attack_mix }
		Show T1CasterTalisman { %H5; !GSH; BaseType bases.talismans.caster.any + bases.talismans.universal.any + bases.talismans.damagetypes.any; Mod xamu_aux_multicore;  Mod >=4 xamu_caster_mix; }
		Show T1DotTalisman    { %H5; !GSH; BaseType bases.talismans.caster.any + bases.talismans.universal.any + bases.talismans.damagetypes.any; Mod xamu_aux_multicore;  Mod >=4 xamu_dot_mix; }

		Show T2StatTalisman   { %H4; !GS; BaseType bases.talismans.stats.any; Mod acc_allat[3]; Mod str[3] + dex[3] + int[3]; }

		Show T3DecentTypeTalisman { %H3; !G4; BaseType bases.talismans.universal.any; };
		
		Show Any { %H2; !G5; BaseType "Talisman"; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Accessoires
#===============================================================================================================

	Section OptionalRare : Auto("RareOptional")
	{
		HideD IdHider { !GEX; !Shrink; Identified True; Class classes_equip; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Accessoires
#===============================================================================================================
#!! Override 230 : "Rings and Amulets"

	Section EndgameRareRingsAmulets : Class "Rings" "Amulets", Auto("rr->amuring")
	{
		Show T1 { !GRJ1; %D4; BaseType bases.rares.jwl.ringsamu.t1; }
		Show T2 { !GRJ2; %D3; BaseType bases.rares.jwl.ringsamu.t2; }
		Show T3 { !GRJ3; %D2; BaseType bases.rares.jwl.ringsamu.t3; }
	}

	Section EndgameRareBelts : Class "Belts", Auto("rr->belts")
	{
		Show T1 { !GRJ1; %D4; BaseType bases.rares.jwl.belts.t1; }
		Show T2 { !GRJ2; %D3; BaseType bases.rares.jwl.belts.t2; }
		Show T3 { !GRJ3; %D2; BaseType bases.rares.jwl.belts.t3; }
	}

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - T1 - handpicked
#===============================================================================================================
#!! Override 240 : "T1 rares - handpicked"	
	Section EndgameRareGear : Auto("rr")
	{
		Show T1weapons { !GR1; %D3; BaseType bases.rares.eg.t1.weapons }
		Show T1armours { !GR1; %D3; BaseType bases.rares.eg.t1.armours }

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - T2 - handpicked
#===============================================================================================================
#!! Override 250 : "T2 rares - handpicked"
		
		Show T2weapons { !GR2; %D3; BaseType bases.rares.eg.t2.weapons }
		Show T2armours { !GR2; %D3; BaseType bases.rares.eg.t2.armours }

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - T2 - handpicked
#===============================================================================================================
#!! Override 255 : "Identified Item Handling"

		Show IdentifiedItemHandling { %D3; !GS; !exotic.t4; Identified True; Corrupted False; Mirrored False; Class classes_equip; }

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - T3 - droplevel-based
#===============================================================================================================
#!! Override 260 : "T3 rares - droplevel-based"

		Show t3runedaggers { !GR3; %D2; DropLevel >= bases.rares.eg.t3runedaggers; Class "Rune Daggers"; }
		Show t3daggers 	{ !GR3; %D2; DropLevel >= bases.rares.eg.t3daggers; Class "Daggers"; }
		Show t3claws { !GR3; %D2; DropLevel >= bases.rares.eg.t3claws; Class "Claws"; }
		Show t3wands { !GR3; %D2; DropLevel >= bases.rares.eg.t3wands; Class "Wands"; }
		Show t3foils { !GR3; %D2; DropLevel >= bases.rares.eg.t3foils; Class "Thrusting One Hand Swords"; Height 4; }
		Show t3swords1h { !GR3; %D2; DropLevel >= bases.rares.eg.t3swords1h; Class "One Hand Swords"; Height < 4 }
		Show t3maces1h { !GR3; %D2; DropLevel >= bases.rares.eg.t3maces1h; Class "One Hand Maces"; }
		Show t3axes1h { !GR3; %D2; DropLevel >= bases.rares.eg.t3axes1h; Class "One Hand Axes"; }
		Show t3sceptres { !GR3; %D2; DropLevel >= bases.rares.eg.t3sceptres; Class "Sceptres"; }
		Show t3warstaves { !GR3; %D2; DropLevel >= bases.rares.eg.t3warstaves; Class "Warstaves"; }
		Show t3staves  { !GR3; %D2; DropLevel >= bases.rares.eg.t3staves; Class "Staves"; }
		Show t3swords2h { !GR3; %D2; DropLevel >= bases.rares.eg.t3swords2h; Class "Two Hand Swords"; }
		Show t3axes2h  { !GR3; %D2; DropLevel >= bases.rares.eg.t3axes2h; Class "Two Hand Axes"; }
		Show t3maces2h { !GR3; %D2; DropLevel >= bases.rares.eg.t3maces2h; Class "Two Hand Maces"; }
		Show t3bows    { !GR3; %D2; DropLevel >= bases.rares.eg.t3bows; Class "Bows"; }
		Show t3boots   { !GR3; %D2; DropLevel >= bases.rares.eg.t3boots; Class "Boots"; }
		Show t3gloves  { !GR3; %D2; DropLevel >= bases.rares.eg.t3gloves; Class "Gloves"; }
		Show t3helmets { !GR3; %D2; DropLevel >= bases.rares.eg.t3helmets; Class "Helmets"; }
		Show t3body    { !GR3; %D2; DropLevel >= bases.rares.eg.t3body; Class "Body Armours"; }
		Show t3shields { !GR3; %D2; DropLevel >= bases.rares.eg.t3shields; Class "Shields"; }
		Show t3quivers { !GR3; %D2; DropLevel >= bases.rares.eg.t3quivers; Class "Quivers"; }

#===============================================================================================================
# [[0200]] Endgame - Rare - Gear - T4 - rest
#===============================================================================================================
#!! Override 270 : "T4 rares remaining"

		Show t4endgamerares { !GR4; %D1; Class rare_gear_classes; }
	}
}

#===============================================================================================================
# [[0200]] Hide Layer 2 - Rare Gear
#===============================================================================================================
Section HideLayer2 : Auto("HideLayer")
{
	Hide RaresEndgame { ItemLevel >= 68; Rarity Rare; Class classes_equip; }
}

#===============================================================================================================
# [[0200]] Jewels
#===============================================================================================================
#!! Chapter "Endgame crafting and recipe items"
#!! Override 275 : "Jewel"

Section Jewels : !jewels
{
#------------------------------------
# [1234] Special Cases
#------------------------------------
	Section IdentifiedJewels : Identified True, Auto("jewels->special"), !UniqueSound, !GS
	{
		Section CorruptedJewels : Corrupted True, Rarity Rare, CorruptedMods >= 1, !*rare
		{
			Show 1modcorrupted { !Special; %H4; Mod jewels_corruptedModsMinimum; BaseType "Cobalt Jewel" "Crimson Jewel" "Viridian Jewel"; }
		}

		Section IdedUncorruptedJewels : Corrupted False, Rarity <= Rare, Class "Jewel"
		{
			Show 1moduncorrupted { !exotic.t3; %H4; HasExplicitMod "Shimmering" "Vivid" "Stalwart" "Resplendent"; }
		}
	}

#------------------------------------
# [1234] Abyss Jewels
#------------------------------------
	Section AbyssJewels : Class "Abyss Jewel", Auto("jewels->abyss")
	{
		Show VeryHighRare  { %H5;  !G4;  !*rare;  !High; Rarity Rare; ItemLevel >= 86; }
		Show VeryHighMagic { %H5;  !G4;  !*magic; !High; Rarity <= Magic; ItemLevel >= 86; }
		
		Show CorruptedAbyssJewel { %H5; !G4; !*rare; !High; Rarity Rare; Corrupted True; }
		
		Show HighRare      { %H3;  !G5H; !*rare;  !Medium; Rarity Rare; ItemLevel >= 82; }
		Show HighMagic     { %HS3; !G6H; !*magic; !Medium; Rarity <= Magic; ItemLevel >= 82; }
		Show AnyRare       { %HS2; !G5H; !*rare;  Rarity Rare; }
		Show AnyMagic      { %H2;  !G6H; !*magic; Rarity <= Magic; }
	}
#------------------------------------
# [1234] Generic Jewels
#------------------------------------
	Section GenericJewels : Class "Jewel", BaseType "Cobalt Jewel" "Crimson Jewel" "Viridian Jewel", Auto("jewels->generic")
	{
		Show AnyRare  { %HS3; !G5H; !*rare; !V4; Rarity Rare; }
		Show AnyMagic { %H3; !G6H; !*magic; Rarity <= Magic; }
	}

#------------------------------------
# [1234] Cluster Jewels: Eco-Based-Large
#------------------------------------

	Section ClusterJewelsEconomy : Auto("jewels->clustereco"), Rarity <= Rare, !*cluster
	{
		Section T1clusterjewels : !G2, !VF1, !High, !TopTierColors
		{
			# Large N12 T1
			Show N12_I84_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 12; EnchantmentPassiveNode jewels.cluster.N12_I84_T1; }
			Show N12_I75_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 12; EnchantmentPassiveNode jewels.cluster.N12_I75_T1; }
			Show N12_I68_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 12; EnchantmentPassiveNode jewels.cluster.N12_I68_T1; }

			# Large N11 T1
			Show N11_I84_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 11; EnchantmentPassiveNode jewels.cluster.N11_I84_T1; }
			Show N11_I75_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 11; EnchantmentPassiveNode jewels.cluster.N11_I75_T1; }
			Show N11_I68_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 11; EnchantmentPassiveNode jewels.cluster.N11_I68_T1; }

			# Large N10 T1
			Show N10_I84_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 10; EnchantmentPassiveNode jewels.cluster.N10_I84_T1; }
			Show N10_I75_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 10; EnchantmentPassiveNode jewels.cluster.N10_I75_T1; }
			Show N10_I68_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 10; EnchantmentPassiveNode jewels.cluster.N10_I68_T1; }

			# Large N9 T1
			Show N9_I84_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 9; EnchantmentPassiveNode jewels.cluster.N9_I84_T1; }
			Show N9_I75_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 9; EnchantmentPassiveNode jewels.cluster.N9_I75_T1; }
			Show N9_I68_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 9; EnchantmentPassiveNode jewels.cluster.N9_I68_T1; }

			# Large N8 T1
			Show N8_I84_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 8; EnchantmentPassiveNode jewels.cluster.N8_I84_T1; }
			Show N8_I75_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 8; EnchantmentPassiveNode jewels.cluster.N8_I75_T1; }
			Show N8_I68_T1 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 8; EnchantmentPassiveNode jewels.cluster.N8_I68_T1; }

			# Medium N6 T1
			Show N6_I84_T1 { BaseType "Medium Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 6; EnchantmentPassiveNode jewels.cluster.N6_I84_T1; }
			Show N6_I75_T1 { BaseType "Medium Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 6; EnchantmentPassiveNode jewels.cluster.N6_I75_T1; }
			Show N6_I68_T1 { BaseType "Medium Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 6; EnchantmentPassiveNode jewels.cluster.N6_I68_T1; }

			# Medium N4-5 T1
			Show N4_I84_T1 { BaseType "Medium Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum <= 5; EnchantmentPassiveNode jewels.cluster.N4_I84_T1; }
			Show N4_I75_T1 { BaseType "Medium Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum <= 5; EnchantmentPassiveNode jewels.cluster.N4_I75_T1; }
			Show N4_I68_T1 { BaseType "Medium Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum <= 5; EnchantmentPassiveNode jewels.cluster.N4_I68_T1; }

			# Small N3 T1
			Show N3_I84_T1 { BaseType "Small Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 3; EnchantmentPassiveNode jewels.cluster.N3_I84_T1; }
			Show N3_I75_T1 { BaseType "Small Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 3; EnchantmentPassiveNode jewels.cluster.N3_I75_T1; }
			Show N3_I68_T1 { BaseType "Small Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 3; EnchantmentPassiveNode jewels.cluster.N3_I68_T1; }

			# Small N2 T1
			Show N2_I84_T1 { BaseType "Small Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 2; EnchantmentPassiveNode jewels.cluster.N2_I84_T1; }
			Show N2_I75_T1 { BaseType "Small Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 2; EnchantmentPassiveNode jewels.cluster.N2_I75_T1; }
			Show N2_I68_T1 { BaseType "Small Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 2; EnchantmentPassiveNode jewels.cluster.N2_I68_T1; }
		}

		Section T2clusterjewels : !G3, !V2, !High, !TierTwoColors
		{
			# Large N12 T2
			Show N12_I84_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 12; EnchantmentPassiveNode jewels.cluster.N12_I84_T2; }
			Show N12_I75_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 12; EnchantmentPassiveNode jewels.cluster.N12_I75_T2; }
			Show N12_I68_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 12; EnchantmentPassiveNode jewels.cluster.N12_I68_T2; }

            # Large N11 T2
			Show N11_I84_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 11; EnchantmentPassiveNode jewels.cluster.N11_I84_T2; }
			Show N11_I75_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 11; EnchantmentPassiveNode jewels.cluster.N11_I75_T2; }
			Show N11_I68_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 11; EnchantmentPassiveNode jewels.cluster.N11_I68_T2; }

			# Large N10 T2
			Show N10_I84_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 10; EnchantmentPassiveNode jewels.cluster.N10_I84_T2; }
			Show N10_I75_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 10; EnchantmentPassiveNode jewels.cluster.N10_I75_T2; }
			Show N10_I68_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 10; EnchantmentPassiveNode jewels.cluster.N10_I68_T2; }

			# Large N9 T2
			Show N9_I84_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 9; EnchantmentPassiveNode jewels.cluster.N9_I84_T2; }
			Show N9_I75_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 9; EnchantmentPassiveNode jewels.cluster.N9_I75_T2; }
			Show N9_I68_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 9; EnchantmentPassiveNode jewels.cluster.N9_I68_T2; }

			# Large N8 T2
			Show N8_I84_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 8; EnchantmentPassiveNode jewels.cluster.N8_I84_T2; }
			Show N8_I75_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 8; EnchantmentPassiveNode jewels.cluster.N8_I75_T2; }
			Show N8_I68_T2 { BaseType "Large Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 8; EnchantmentPassiveNode jewels.cluster.N8_I68_T2; }

			# Medium N6 T2
			Show N6_I84_T2 { BaseType "Medium Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 6; EnchantmentPassiveNode jewels.cluster.N6_I84_T2; }
			Show N6_I75_T2 { BaseType "Medium Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 6; EnchantmentPassiveNode jewels.cluster.N6_I75_T2; }
			Show N6_I68_T2 { BaseType "Medium Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 6; EnchantmentPassiveNode jewels.cluster.N6_I68_T2; }

			# Medium N4-5 T2
			Show N4_I84_T2 { BaseType "Medium Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum <= 5; EnchantmentPassiveNode jewels.cluster.N4_I84_T2; }
			Show N4_I75_T2 { BaseType "Medium Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum <= 5; EnchantmentPassiveNode jewels.cluster.N4_I75_T2; }
			Show N4_I68_T2 { BaseType "Medium Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum <= 5; EnchantmentPassiveNode jewels.cluster.N4_I68_T2; }

			# Small N3 T2
			Show N3_I84_T2 { BaseType "Small Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 3; EnchantmentPassiveNode jewels.cluster.N3_I84_T2; }
			Show N3_I75_T2 { BaseType "Small Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 3; EnchantmentPassiveNode jewels.cluster.N3_I75_T2; }
			Show N3_I68_T2 { BaseType "Small Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 3; EnchantmentPassiveNode jewels.cluster.N3_I68_T2; }

			# Small N2 T2
			Show N2_I84_T2 { BaseType "Small Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum = 2; EnchantmentPassiveNode jewels.cluster.N2_I84_T2; }
			Show N2_I75_T2 { BaseType "Small Cluster Jewel"; ItemLevel >= 75; EnchantmentPassiveNum = 2; EnchantmentPassiveNode jewels.cluster.N2_I75_T2; }
			Show N2_I68_T2 { BaseType "Small Cluster Jewel"; ItemLevel >= 68; EnchantmentPassiveNum = 2; EnchantmentPassiveNode jewels.cluster.N2_I68_T2; }
		}
	}

#------------------------------------
# [1234] Cluster Jewels: Random
#------------------------------------

	Section ClusterJewels : Auto("jewels->cluster"), Rarity <= Rare, !*cluster
	{
		Show OptimalHighLarge	{ !G3; %D5; !V2; !High; BaseType "Large Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum <= 8; }
		Show HighLarge 			{ !G3; %D5; !V3; !High; BaseType "Large Cluster Jewel"; EnchantmentPassiveNum <= 8; }
		Show Large 				{ !G4; %D5; !V4; BaseType "Large Cluster Jewel"; }

		Show OptimalHighMedium  { !G3; %D4; !V2; !High; BaseType "Medium Cluster Jewel"; ItemLevel >= 84; EnchantmentPassiveNum <= 5; }
		Show HighMedium 	    { !G3; %D4; !V3; !High; BaseType "Medium Cluster Jewel"; EnchantmentPassiveNum <= 5; }
		Show Medium 		    { !G4; %D4; !V4; BaseType "Medium Cluster Jewel"; }

		Show HighSmall 			{ !G3; %D4; !V3; !High; BaseType "Small Cluster Jewel"; ItemLevel >= 84; }
		Show Small 				{ !G4; %D4; !V4; BaseType "Small Cluster Jewel"; }
	}
}

#===============================================================================================================
# [[0200]] Heist Gear
#===============================================================================================================
#!! Chapter "Heist Gear"
Section HeistFollowerGear : Rarity <= Rare
{
#------------------------------------
# [3001] Heist Cloak
#------------------------------------
#!! Override 310 : "Heist Cloaks"
	Section HeistCloak : Class "Heist Cloak", Auto("Heist->Cloak")
	{
		Show t1highlevel { !G3; %HS5; BaseType bases.heist.cloak.t1; ItemLevel >= levels_t1_heist_cloak; }
		Show t1 { !G3; %H5; BaseType bases.heist.cloak.t1; }
		Show t2 { !G4; %HS4; BaseType bases.heist.cloak.t2; }
		Show t3any { !G5; %H3; Empty(); }
	}
#------------------------------------
# [3002] Heist Brooch
#------------------------------------
#!! Override 320 : "Heist Brooch"
	Section HeistBrooch : Class "Heist Brooch", Auto("Heist->Brooch")
	{
		Show t1highlevel { !G3; %HS5;  BaseType bases.heist.brooch.t1; ItemLevel >= levels_t1_heist_brooch; }
		Show t1 { !G3; %H5;  BaseType bases.heist.brooch.t1; }
		Show t2 { !G4; %HS4;  BaseType bases.heist.brooch.t2; }
		Show t3any { !G5; %H3;  Empty(); }
	}
#------------------------------------
# [3003] Heist Gear
#------------------------------------
#!! Override 330 : "Heist Gear"
	Section HeistGear : Class "Heist Gear", Auto("Heist->Gear")
	{
		Show t1highlevel { !G3; %HS5;  BaseType bases.heist.gear.t1; ItemLevel >= levels_t1_heist_gear; }
		Show t1 { !G3; %H5;  BaseType bases.heist.gear.t1; }
		Show t2 { !G4; %HS4;  BaseType bases.heist.gear.t2; }
		Show t3any { !G5; %H3;  Empty(); }
	}
#------------------------------------
# [3004] Heist Tool
#------------------------------------
#!! Override 340 : "Heist Tool"
	Section HeistTools : Class "Heist Tool", Auto("Heist->Tool")
	{
		Show t1highlevel { !G3; %HS5; BaseType bases.heist.tool.t1; ItemLevel >= levels_t1_heist_tool; }
		Show t1 { !G3; %H5; BaseType bases.heist.tool.t1; }
		Show t2 { !G4; %HS4; BaseType bases.heist.tool.t2; }
		Show t3any { !G5; %H3; Empty(); }
	}
}

#===============================================================================================================
# [[3900]] Gem Tierlists
#===============================================================================================================
#!! Chapter Gems
#!! Override 410 : "All Gems - incl. awakened, alt and very valuable"

Section Gems : Class "Gems", !Gems
{
#------------------------------------
# [3901] Exceptional Gems - Awakened and AltQuality
#------------------------------------
	Section GemsExceptional : Auto("gems-exceptional")
	{
		Show AwaT1 	{ !G1; !*T1; BaseType gems.t1awa; }
		Show AwaAny { !G2; !*P1; BaseType "Awakened"; }
		
		Show DivT1 	{ !G1; !*T1; GemQualityType Divergent; BaseType gems.t1div; }
		Show AnoT1 	{ !G1; !*T1; GemQualityType Anomalous; BaseType gems.t1ano; }
		Show PhaT1 	{ !G1; !*T1; GemQualityType Phantasmal; BaseType gems.t1pha; }
		Show AltAny { !G2; !*P1; AlternateQuality True; }
		
		Show 2020z 	{ !G2; !*T1; Quality >= 20; GemLevel >= 20; BaseType gems.t1_2020z }
		Show 2120 	{ !G2; !*T1; Quality >= 20; GemLevel >= 21; BaseType gems.t1_2120 }
		Show 2123 	{ !G2; !*T1; Quality >= 23; GemLevel >= 21; BaseType gems.t1_2123 }
		
        ## Empower-class gems that are currently super-expensive
		Show SpecialWorldDrops { !G1; !*T1; BaseType gems.t1_normal; }

		## Quality Vaal gems worth leveling
		Show Vaal20 { !G2; !*P1; Quality >= 20; BaseType gems.t2_2020vaal }
	}

#------------------------------------
# [3901] Exceptional Gems - Special gems
#------------------------------------
#!! Override 420 : "empower and enlighten type gems"

	Section GemsSpecial : Auto("gems-special")
	{
		Show ex6lvlgems { !G2; !*P1; BaseType gems.untiered.sixlevelgems; GemLevel >= 6; }

		Show exSpecialE4 { !G1; !*T1; BaseType gems.untiered.empowerclassgems; GemLevel >= 4; }
		Show exSpecialE2 { !G1; !*P1; BaseType gems.untiered.empowerclassgems; GemLevel >= 2; }
		Show exSpecialEQ { !G2; !*P1; BaseType gems.untiered.empowerclassgems; Quality >= 15; Corrupted False; }
		Show exSpecial { !G3; !*P2; BaseType gems.untiered.specialGems; }
	}

#------------------------------------
# [3902] High Quality and Leveled Gems
#------------------------------------
#!! Override 440 : "quality, leveled and generic gems"

	Section GemsGeneric : Auto("gems-generic")
	{
		Show LT1 { !G2; !G2; !*P1; GemLevel >= 21 }
		Show QT1 { !G3; !G2; !*P1; Quality >= 23 }

		Cont DecoGemsVaalBgDrop { !GEX; !*VaalGem; BaseType "Vaal"; }

		Show QT2 { !G3; %D5; !*P2; Quality >= 19 }
		Show LT2 { !G4; %D4; !*P3; GemLevel >= 20 }

		Show QT3 { !G4; %D3; !*P3; Quality >= 14 }
		Show LT3 { !G5; %D2; !*P4; GemLevel >= 18 }

		Show QT4Lvl { %D4; !G5; !*P3; Quality >= 1; AreaLevel <= 67 }	
		Show QT4 { %D2; !G5; !*P4; Quality >= 1; }	
		Show LT4 { %D0; !G6; !*P4; GemLevel >= 2; }

		Show  FirstZone    { !GS; !*FirstLevel; AreaLevel 1; }
		Show  LevelingVaal { %H4; !G4; !*VaalLvl; AreaLevel <= 67; BaseType "Vaal"; }
		Show  Leveling     { %H2; !G6; !*Leveling; AreaLevel <= 67; }

		Show CorruptedVaalAny { %D3; !G6H; !*VaalGem; BaseType "Vaal"; }

		Show any { %H0; !G7; !*P5; Empty(); }
	}
}

#===============================================================================================================
# [[3900]] REPLICA UNIQUES
#===============================================================================================================
#!! Chapter "Maps, fragments, maplike items, replicas"
#!! Override 510 : "replicas uniques and unique maps"

Section Replicas : Auto("uniques->replicas"), Replica True, Rarity Unique
{
	Show t1 { !G1; BaseType == uniques.replicas.t1; }
	Show t2 { !G2; BaseType == uniques.replicas.t2; }
	Show multi { !G3; BaseType == uniques.replicas.multi; }
	Show t3 { !G4; BaseType == uniques.replicas.t3; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4400]] Special Maps
#===============================================================================================================
#!! Override 520 : "all maps, incl. uniques"

Section Maps : Class "Maps", !Maps
{

#------------------------------------
# [4402] Unique Maps
#------------------------------------
	Section UniqueMaps : Rarity Unique, Auto("uniques->maps")
	{
		Show ex { !G1; !Maps.HighHarbingerMap; BaseType uniques.maps.ex; MapTier 16; }
		Show t1 { !G1; BaseType == uniques.maps.t1; }
		Show t2 { !G2; BaseType == uniques.maps.t2; }
		Show t3 { !G3; %H5; BaseType == uniques.maps.t3; }
		Show t4 { !G4; %H4; BaseType == uniques.maps.t4; }
		Show restex { Empty(); }
	}

#------------------------------------
# [4404] Blighted maps
#------------------------------------
#!! Override 530 : "blighted maps, enchanted maps, maps with special mods"

	Section BlightedMaps : Auto("maps->blighted")
	{
		Show uber { !G2; !*SpecialHigh; UberBlightedMap True; }
		Show t1  { !G2; !*SpecialHigh; MapTier >= Maps.Blighted.HighTier; BlightedMap True; }
		Show Any { %H5; !G3; !*SpecialLow; BlightedMap True; }
	}

#------------------------------------
# [4405] Delirium/Blight/Enchanted Maps!
#------------------------------------

	Section EnchantedMaps : AnyEnchantment True, Auto("maps->enchanted")
	{
		Show t1  { !G3; !*SpecialHigh; MapTier >= Maps.Enchanted.HighTier }
		Show Any { %H5; !G4; !*SpecialLow; Empty(); }
	}

	Section ScourgedMap : Auto("maps->scourged")
	{
		Show t1  { !G3; !*SpecialHigh; MapTier >= Maps.Enchanted.HighTier; Scourged True; }
		Show Any { %H5; !G4; !*SpecialLow; Empty(); Scourged True; }
	}

#------------------------------------
# [4406] Beyond-Nemesis Maps, for those juicy sextants.
#------------------------------------
	Section IdentifiedMaps : Identified True, Auto("maps->Identified")
	{
		Show NemesisBeyond { %D5; !G3; !*SpecialLow; HasExplicitMod "Otherworldly"; HasExplicitMod "Antagonist's"; }
	}

#===============================================================================================================
# [[0200]] Normal Map Progression
#===============================================================================================================

#------------------------------------
# [4403] Generic Decorators
#------------------------------------

#!! Override 540 : "Map decorators"

	Section GenericMaps : Auto("maps")
	{		
		Cont deco_zone1general { !GEX; !*deco_map_zone12; MapTier >= 14; }
		Cont deco_zone2general { !GEX; !*deco_map_zone12; MapTier >= 11; MapTier <= 13; }
		Cont deco_zone3general { !GEX; !*deco_map_zone34; MapTier >= 6; MapTier <= 10; }
		Cont deco_zone4general { !GEX; !*deco_map_zone34; MapTier >= 1; MapTier <= 5; }

#------------------------------------
# [4403] Map progression
#------------------------------------

#!! Override 541 : "T11-T16 maps"

		Cont deco_mapup_t16 { !GEX; MapTier >= 16; AreaLevel < 83; }
		Show maps_a_t16 { !GM1; !*z1; MapTier >= 16; }
		Cont deco_mapup_t15 { !GEX; MapTier >= 15; AreaLevel < 82; }
		Show maps_a_t15 { !GM1; !*z1; MapTier = 15; }
		Cont deco_mapup_t14 { !GEX; MapTier >= 14; AreaLevel < 81; }
		Show maps_a_t14 { !GM1; !*z1; MapTier = 14; }

		Cont deco_mapup_t13 { %D4; !GEX; MapTier >= 13; AreaLevel < 80; }
		Show maps_b_t13 { !GM2; %H5; !*z2; MapTier = 13; }
		Cont deco_mapup_t12 { %D4; !GEX; MapTier >= 12; AreaLevel < 79; }
		Show maps_b_t12 { !GM2; %H5; !*z2; MapTier = 12; }
		Cont deco_mapup_t11 { %D4; !GEX; MapTier >= 11; AreaLevel < 78; }
		Show maps_b_t11 { !GM2; %H5; !*z2; MapTier = 11; }

#!! Override 550 : "T16-T10 maps"

		Cont deco_mapup_t10 { %D3; !GEX; MapTier >= 10; AreaLevel < 77; }
		Show maps_c_t10 { !GM3; %H4; !*z3; MapTier = 10; }
		Cont deco_mapup_t9  { %D3; !GEX; MapTier >= 9; AreaLevel < 76; }
		Show maps_c_t9  { !GM3; %H4; !*z3; MapTier = 9; }
		Cont deco_mapup_t8  { %D3; !GEX; MapTier >= 8; AreaLevel < 75; }
		Show maps_c_t8  { !GM3; %H4; !*z3; MapTier = 8; }
		Cont deco_mapup_t7  { %D3; !GEX; MapTier >= 7; AreaLevel < 74; }
		Show maps_c_t7  { !GM3; %H4; !*z3; MapTier = 7; }
		Cont deco_mapup_t6  { %D3; !GEX; MapTier >= 6; AreaLevel < 73; }
		Show maps_c_t6  { !GM3; %H4; !*z3; MapTier = 6; }

#!! Override 560 : "T1-T5 maps"

		Cont deco_mapup_t5  { %D3; !GEX; MapTier >= 5; AreaLevel < 72; }
		Show maps_d_t5  { !GM4; %H4; !*z4; MapTier = 5; }
		Cont deco_mapup_t4  { %D3; !GEX; MapTier >= 4; AreaLevel < 71; }
		Show maps_d_t4  { !GM4; %H4; !*z4; MapTier = 4; }
		Cont deco_mapup_t3  { %D3; !GEX; MapTier >= 3; AreaLevel < 70; }
		Show maps_d_t3  { !GM4; %H4; !*z4; MapTier = 3; }
		Cont deco_mapup_t2  { %D3; !GEX; MapTier >= 2; AreaLevel < 69; }
		Show maps_d_t2  { !GM4; %H4; !*z4; MapTier = 2; }
		Cont deco_mapup_t1  { %D3; !GEX; MapTier >= 1; AreaLevel < 68; }
		Show maps_d_t1  { !GM4; %H4; !*z4; MapTier = 1; }

		Show restex { Empty(); }
	}
}

#------------------------------------
# [4403] Labyrinth items, Offerings
#------------------------------------
#!! Override 570 : "labyrinth offerings"

Section Labyrinth : Auto("LabyrinthOfferings")
{
	Show Offerings { !G4; %H4; BaseType "Offering to the Goddess"; }
	Show OfferingsUpgraded { !G3; BaseType "Dedication to the Goddess" "Gift to the Goddess" "Tribute to the Goddess"; }
}

#===============================================================================================================
# [[4500]] Heist Contracts and Blueprints
#===============================================================================================================
#!! Override 580 : "heist contracts and blueprints"

Section HeistUniqueMapLike : Rarity Unique, Class "Blueprint" "Contract", Auto("Uniques->Heist")
{
	Show Any { !G4; Empty(); }
}

Section HeistContracts : Auto("Heist->Contract"), Class "Contract"
{
	Show HandPicked { !G5; %H5; BaseType Heist.Contract.Handpicked; }
	Show Any { !G5; %H5; Empty(); }
}

Section HeistBlueprint : Auto("Heist->Blueprint"), Class "Blueprint"
{
	Show HandPicked { !G4; BaseType Heist.Blueprint.Handpicked; }
	Show Any { !G4; Empty(); }
}

#===============================================================================================================
# [[4500]] Expedition Logbooks
#===============================================================================================================
#!! Override 581 : "logboookss"

Section Logbooks : Auto("Expedition->Logbook->High"), BaseType "Expedition Logbook"
{
	Show Any { !G2; Empty(); }
}

Section Logbooks : Auto("Expedition->Logbook->Any"), Class "Expedition Logbook"
{
	Show Any { !G2; Empty(); }
}

#===============================================================================================================
# [[4500]] Fragments
#===============================================================================================================
#!! Override 590 : "scarabs and fragments tierlists"

Section MapFragments : Class "Map Fragments"
{
#------------------------------------
# [4701] Exceptions
#------------------------------------
	Section StackedFragments : Auto("Fragments->stacked")
	{
		Show t3 { !G3; %HS4; BaseType fragments.generic.t4; StackSize >= 3; }
	}

#------------------------------------
# [4701] Scarabs
#------------------------------------
	Section Scarabs : Auto("Fragments->scarabs")
	{
		Show t1 { !G1; BaseType == fragments.scarabs.t1; }
		Show t2 { !G2; BaseType == fragments.scarabs.t2; }
		Show t3 { !G3; BaseType == fragments.scarabs.t3; }
		Show t4 { !G4; %HS4; BaseType == fragments.scarabs.t4; }
		Show restex { BaseType "Scarab"; }
	}

#------------------------------------
# [4702] Regular Fragment Tiering
#------------------------------------
	Section FragsGeneric : Auto("Fragments")
	{
		Show t1 { !G1; BaseType == fragments.generic.t1; }
		Show t2 { !G2; BaseType == fragments.generic.t2; }
		Show t3 { !G3; %H5; BaseType == fragments.generic.t3; }
		Show t4 { !G4; %HS3; BaseType == fragments.generic.t4; }
		Show restex { Empty(); }
	}
}

#===============================================================================================================
# [[4900]] Currency - Exceptions - Leveling Currencies
#===============================================================================================================
#!! Override 610 : "Leveling Currency"

Section LevelingCurrencies : Auto("Currency->Leveling"), Class "Currency", AreaLevel <= 67, !Currency
{
	Show essences { %D4; !G4;  !*t5alchemy; !Maximize; !LevelCurrency; BaseType currency.leveling.essences; }
	Show trans 	  { %D4; !G5H; !Currency.t8trans; !Maximize; !LevelCurrency; BaseType == currency.leveling.trans; }
	Show aug      { %D4; !G5;  !Currency.t9armour; !Maximize; BaseType == currency.leveling.aug; }
	Show portal   { %D4; !G6H; !Currency.tportal; !Maximize; BaseType == currency.leveling.portal; }
	Show wisdom   { %D4; !G6H; !Currency.twisdom; !Maximize; BaseType == currency.leveling.wisdom; }
}

#===============================================================================================================
# [[4800]] Currency - Exceptions - Stacked Currency
#===============================================================================================================
#!! Chapter "Currencylike item tierlists 1"
#!! Override 620 : "Stacked Currency"

#------------------------------------
# [4702] Supplies: High Stacking
#------------------------------------

Section StackedSuppliesHigh : Auto("Currency->StackedSuppliesHigh"), Class "Currency", !currency
{	
	# Whetstones, augments and transmutes
	Show t1	{ %H5; !*t5alchemy; !G4; StackSize >= 10; BaseType == currency.stacked.supplies.higher; }
	Show t2	{ %H4; !*t6chrom; !G5;   StackSize >= 6; BaseType == currency.stacked.supplies.higher; }
	Show t3	{ %H3; !*t7chance; !G6H; StackSize >= 3; BaseType == currency.stacked.supplies.higher; }
}

#------------------------------------
# [4702] Supplies: Low Stacking
#------------------------------------

Section StackedSuppliesLow : Auto("Currency->StackedSuppliesLow"), Class "Currency", !currency
{	
	# armourers
	Show t1	{ %H5; !G4; !*t6chrom;  StackSize >= 10; BaseType == currency.stacked.supplies.lower; }
	Show t2	{ %H4; !G5H; !*t7chance; StackSize >= 6; BaseType == currency.stacked.supplies.lower; }
	Show t3	{ %H3; !G5; !*t8trans; StackSize >= 3; BaseType == currency.stacked.supplies.lower; }
}

#------------------------------------
# [4702] Supplies: Portal Stacking
#------------------------------------

Section StackedSuppliesPortal : Auto("Currency->StackedSuppliesPortal"), Class "Currency", !currency
{	
	Show t1	{ %H5; !G5; !*tportHigh; StackSize >= 10; BaseType == currency.stacked.supplies.portal; }
	Show t2	{ %H3; !G5; !*tportHigh; StackSize >= 6; BaseType == currency.stacked.supplies.portal; }
	Show t3	{ %H2; !G6H; !*tportal;  StackSize >= 3; BaseType == currency.stacked.supplies.portal; }
}

#------------------------------------
# [4702] Supplies: Wisdom Stacking
#------------------------------------

Section StackedCurrencyWisdom : Auto("Currency->StackedSuppliesWisdom"), Class "Currency", !currency
{	
	Show t1	{ %H5; !*twisdHigh; !G5; StackSize >= 10; BaseType == currency.stacked.supplies.wisdom; }
	Show t2	{ %H3; !*twisdHigh; !G5; StackSize >= 6; BaseType == currency.stacked.supplies.wisdom; }
	Show t3	{ %H2; !*twisdom; !G6H;  StackSize >= 3; BaseType == currency.stacked.supplies.wisdom; }
}

#------------------------------------
# [4702] Stacked Currencies: 6x
#------------------------------------

Section StackedCurrencySix : Auto("Currency->StackedSix"), Class "Currency", StackSize >= 6, !currency
{
	Show t1	{ !G1; !*t1exalted; BaseType == currency.stackedSix.t1 + currency.stackedSixStatic.t1; }
	Show t2	{ !G2; !*t2divine; BaseType == currency.stackedSix.t2 + currency.stackedSixStatic.t2; }
	Show t3	{ !G3; !*t3annul; BaseType == currency.stackedSix.t3 + currency.stackedSixStatic.t3 ; }
	Show t4	{ !G3; !*t4chaos; BaseType == currency.stackedSix.t4 + currency.stackedSixStatic.t4; }
	Show t5	{ !G4; %H5; !*t5alchemy; BaseType == currency.stackedSix.t5 + currency.stackedSixStatic.t5; }
	Show t6	{ !G4; %H4; !*t6chrom; BaseType == currency.stackedSix.t6 + currency.stackedSixStatic.t6; }
	Show t7	{ !G5; %H3; !*t7chance; BaseType == currency.stackedSix.t7 + currency.stackedSixStatic.t7; }
}

#------------------------------------
# [4702] Stacked Currencies: 3x
#------------------------------------

Section StackedCurrencyThree : Auto("Currency->StackedThree"), Class "Currency", StackSize >= 3, !currency
{
	Show t1	{ !G1; !*t1exalted; BaseType == currency.stackedThree.t1 + currency.stackedThreeStatic.t1; }
	Show t2	{ !G2; !*t2divine; BaseType == currency.stackedThree.t2 + currency.stackedThreeStatic.t2; }
	Show t3	{ !G3; !*t3annul; BaseType == currency.stackedThree.t3 + currency.stackedThreeStatic.t3; }
	Show t4	{ !G3; !*t4chaos; BaseType == currency.stackedThree.t4 + currency.stackedThreeStatic.t4; }
	Show t5	{ !G4; %H5; !*t5alchemy; BaseType == currency.stackedThree.t5 + currency.stackedThreeStatic.t5; }
	Show t6	{ !G4; %H4; !*t6chrom; BaseType == currency.stackedThree.t6 + currency.stackedThreeStatic.t6; }
	Show t7	{ !G5; %H3; !*t7chance; BaseType == currency.stackedThree.t7 + currency.stackedThreeStatic.t7; }
}

#------------------------------------
# [4702] Stacked Currencies: Splinters
#------------------------------------

Section StackedCurrencySplintersHigh : Auto("Currency->StackedSplintersHigh"), Class "Currency", !currency
{
	Show t1	{ !G2; !*t2divine; StackSize >= 25; BaseType currency.stacked.splinters1; }
	Show t2	{ !G3; !*t3annul; StackSize >= 6; BaseType currency.stacked.splinters1; }
	Show t3	{ !G3; !*t4chaos; StackSize >= 2; BaseType currency.stacked.splinters1; }
}

Section StackedCurrencySplintersLow : Auto("Currency->StackedSplintersLow"), Class "Currency", !currency
{
	Show t1	{ !G3; !*t3annul; StackSize >= 40; BaseType currency.stacked.splinters2; }
	Show t2	{ !G3; !*t4chaos;   StackSize >= 6; BaseType currency.stacked.splinters2; }
	Show t3	{ %H5; !G4; !*t5alchemy; StackSize >= 2; BaseType currency.stacked.splinters2; }
}

#------------------------------------
# [5104] Heist Coins
#------------------------------------

Section CurrencyCoinsHeist : Auto("currency->heist"), Class "Currency"
{
	Show HighStack { %H5; !G4; !Coins.Huge; StackSize >= 500; BaseType == "Rogue's Marker"; }
	Show Any { %H4; !G5; !Coins.Large; BaseType == "Rogue's Marker"; }
}

#===============================================================================================================
# [[4900]] Currency - Regular Currency Tiering
#===============================================================================================================
#!! Override 630 : "Regular Currency"

Section CurrencyTiering : Auto("Currency"), Class "Currency", !Currency
{
	Show t1exalted 	{ !G1; !*t1exalted; BaseType == currency.generic.t1; }
	Show t2divine 	{ !G2; !*t2divine; BaseType == currency.generic.t2divine; }
	Show t3annul 	{ !G3; !*t3annul; BaseType == currency.generic.t3annul; }
	Show t4chaos 	{ !G4; !*t4chaos; BaseType == currency.generic.t4chaos; }
	Show t5alchemy 	{ !G4;  %H5; !*t5alchemy; BaseType == currency.generic.t5alchemy ; }
	Show t6chrom 	{ !G5H; %H4; !*t6chrom; BaseType == currency.generic.t6chrom; }
	Show t7chance 	{ !G5;  %H3; !*t7chance; BaseType == currency.generic.t7chance; }
	Show t8trans 	{ !G6H; %H3; !*t8trans; BaseType == currency.generic.t8trans; }
	Show t9armour 	{ !G6H; %H2; !*t9armour; BaseType == currency.generic.t9armour; }
	Show tportal 	{ !G6;  %H2; !*tportal; BaseType == currency.generic.tportal; }
	Show twisdom 	{ !G6;  %H2; !*twisdom; BaseType == currency.generic.twisdom; }
}

#===============================================================================================================
# [[4900]] Currency - SPECIAL
#===============================================================================================================

#------------------------------------
# [5103] Incursion - Vials
#------------------------------------
#!! Override 640 : "Vials, Delirium Orbs"

Section CurrencyVials : Auto("vials"), Class "Currency", !Currency
{
	Show t1 { !G1; !*t1exalted; BaseType == currency.vials.t1; }
	Show t2 { !G2; !*t2divine; BaseType == currency.vials.t2; }
	Show t3 { !G4; %H5; !*t4chaos; BaseType == currency.vials.t3; }
	Show restex { BaseType "Vial of"; }
}

#------------------------------------
# [5104] Delirum Orbs
#------------------------------------

Section DeliriumOrbs : Auto("currency->deliriumorbs"), Class "Currency", !Currency
{
	Show t1 { !G1; !*t1exalted; BaseType == currency.deliriumorb.t1; }
	Show t2 { !G2; !*t2divine; BaseType == currency.deliriumorb.t2; }
	Show t3 { !G4; !*t4chaos; BaseType == currency.deliriumorb.t3; }
	Show restex { BaseType "Delirium Orb"; }
}

#------------------------------------
# [5104] Delve - Resonators
#------------------------------------
#!! Override 650 : "Resonators, Fossils"

Section CurrencyDelveResonator : Auto("currency->resonator"), Class "Delve Stackable Socketable Currency", !Currency
{
	Show t1 { !G2; !*t2divine; BaseType == currency.resonator.t1; }
	Show t2 { !G3; %H5; !*t4chaos; BaseType == currency.resonator.t2; }
	Show t3 { !G4; %H4; !*t6chrom; BaseType == currency.resonator.t3; }
	Show restex { Empty(); }
}

#------------------------------------
# [5104] Delve - Fossils
#------------------------------------

Section CurrencyDelveFossil : Auto("currency->fossil"), Class "Currency", !Currency
{
	Show t1 { !G1; !*t1exalted; BaseType == currency.fossil.t1; }
	Show t2 { !G2; !*t2divine; BaseType == currency.fossil.t2; }
	Show t3 { !G4;  %HS5; !*t4chaos; BaseType == currency.fossil.t3; }
	Show t4 { !G5H; %HS4; !*t6chrom; BaseType == currency.fossil.t4; }
	Show restex { BaseType "Fossil"; }
}

#------------------------------------
# [5104] Blight - Oils
#------------------------------------
#!! Override 660 : "Blight Oils"

Section CurrencyBlightOils : Auto("currency->oil"), Class "Currency", !Currency
{
	Show t1 { !G1; !*t1exalted; BaseType == currency.oil.t1; }
	Show t2 { !G2; !*t2divine; BaseType == currency.oil.t2; }
	Show t3 { !G4; %HS5; !*t4chaos; BaseType == currency.oil.t3; }
	Show t4 { !G5; %HS3; !*t6chrom; BaseType == currency.oil.t4; }
	Show restex { BaseType "Oil"; }
}

#------------------------------------
# [5104] Expedition Currencies
#------------------------------------
#!! Override 661 : "Expedition"

Section Expedition : Class "Currency", !Currency
{
	Section : Auto("currency->expedition->reroll")
	{
		Show Any { !G3; !*t3annul; BaseType == currency.expedition.reroll; }
	}
}

#------------------------------------
# [5104] Essences
#------------------------------------
#!! Override 670 : "Essences"

Section CurrencyEssence : Auto("currency->essence"), Class "Currency", !Currency
{
	Show t1 { !G2; !*t2divine; BaseType currency.essence.t1; }
	Show t2 { !G3; !*t3annul; BaseType currency.essence.t2; }
	Show t3 { !G4;  %H5; !*t4chaos; BaseType currency.essence.t3; }
	Show t4 { !G5;  %HS3; !*t7chance; BaseType currency.essence.t4; }
	Show t5 { !G5H; %H2; !*t8trans; BaseType currency.essence.t5; }
	Show t6 { !G5;  %H1; !*t8trans; BaseType currency.essence.t6; }
}

#------------------------------------
# [5104] Incubators
#------------------------------------
#!! Override 680 : "Incubators"

Section CurrencyIncubators : Auto("currency->incubators"), Class "Incubator", !Currency
{
	Show leveledex { %H5; !G3; !*t4chaos; ItemLevel >= 81; BaseType == currency.incubators.leveledex; }

	Show t1 { !G1; !*t1exalted; BaseType == currency.incubators.t1; }
	Show t2 { !G2; !*t2divine; BaseType == currency.incubators.t2; }
	Show t3 { !G4; %H5; !*t4chaos; BaseType == currency.incubators.t3; }
	Show t4 { !G4; %H3; !*t6chrom; BaseType == currency.incubators.t4; }
	Show restex { Empty(); }
}

Section Archnemesis : Auto("exotic->archnemesis"), Class "Archnemesis Mod"
{
	Show reagents { !G4; !QuestLite; ArchnemesisMod archnemesis.reagents; }
	Show special  { !G4; !QuestLike; ArchnemesisMod archnemesis.special; }
	Show results  { !G4; !QuestLike; ArchnemesisMod archnemesis.reciperesults; }
	
	Show restex { !G4; !QuestLike; Empty(); }
}

#------------------------------------
# [5104] Others
#------------------------------------
#!! Override 690 : "Harbinger Scrolls"

Section CurrencyExotic : Auto("currency->others"), Class "Currency", !Currency
{
	Show harbinger { !G2; !*t2divine; BaseType == "Deregulation Scroll" "Electroshock Scroll" "Fragmentation Scroll" "Haemocombustion Scroll" "Specularity Scroll" "Time-light Scroll"; }
	Show misc { !G3; !*t2divine; BaseType "Imprint" "Unshaping Orb"; }
}

#===============================================================================================================
# [[4900]] Currency - Splinters
#===============================================================================================================

#------------------------------------
# [5112] Breach and Legion Splinters
#------------------------------------
#!! Override 720 : "Breach and Simulacrum Splinters"

Section CurrencySplintersRegular : Auto("currency->splinter"), Class "Currency", !Splinters
{
	Show t1 { %H6; !G4; !*t1; BaseType == currency.splinters.t1; }
	Show t2 { %H5; !G5; !*t2; BaseType == currency.splinters.t2; }
	Show t3 { %H4; !G5; !*t3; BaseType == currency.splinters.t3; }
}

#------------------------------------
# [5112] Simulacrum Splinters
#------------------------------------

Section CurrencySplinterSimulacrum : Auto("currency->splinter->simulacrum"), Class "Currency", BaseType "Simulacrum Splinter"
{
	Show t1 { !G1; !Currency.t1exalted; !Splinters.Stylize; StackSize >= stacksize.simulacrum.t1; }
	Show t2 { !G2; !Currency.t2divine; !Splinters.Stylize;  StackSize >= stacksize.simulacrum.t2; }
	Show t3 { !G3; !Currency.t3annul; !Splinters.Stylize; StackSize >= stacksize.simulacrum.t3; }
	Show t4 { !G4; !Currency.t4chaos; !Splinters.Stylize; StackSize >= stacksize.simulacrum.t4; }
	Show t5 { %H5; !G5; Empty(); !Splinters.t2 }
}

#===============================================================================================================
# [[4900]] Divination Cards
#===============================================================================================================
#!! Override 730 : "Divination Cards"

Section DivinationCards : Auto("divination"), Class "Divination", !divi
{
	Show t1 	{ !G1; !*t1;	BaseType == divination.t1; }
	Show t2 	{ !G2; !*t2;	BaseType == divination.t2; }
	Show t3 	{ !G3;!*t3;	BaseType == divination.t3; }
	Show tnew 	{ !G3; !*tnew;	BaseType == divination.tnew; }
	Show t4c 	{ %H5; !G4; !*t4;	BaseType == divination.t4c; }
	Show t5c 	{ %H3; !G5; !*t5;	BaseType == divination.t5c; }
	Show t4 	{ %HS3; !G5H; !*t4;	BaseType == divination.t4; }
	Show t5 	{ %H1; !G6; !*t5; !Shrink;	BaseType == divination.t5; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4900]] Remaining Currency
#===============================================================================================================
#!! Override 740 : "Remaining Currency"

Section CurrencyRemaining : Class "Currency", Auto("Currency")
{
	HideD UntieredItems { !shrink; }
	Hide scrollfragments { !shrink; BaseType "Scroll Fragment"; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4900]] Questlike-Items1 (override uniques)
#===============================================================================================================
#!! Override 750 : "Metamorph Samples"

Section Metamorph : Class "Metamorph", Auto("Metamorph")
{
	Show Any { !QuestLike; Empty(); }
}

Section HeistTarget : Class "Heist Target", Auto("HeistTarget")
{
	Show Any { !QuestLike; Empty(); }
}

#===============================================================================================================
# [[4900]] Uniques
#===============================================================================================================
#!! Override 760 : "All uniques"

Section Unique : Rarity Unique, Auto("uniques"), !unique
{

#------------------------------------
# [5701] Exceptions #1
#------------------------------------
	Show exSquire { !G1; !*t1; BaseType == "Elegant Round Shield"; Sockets >= "3WWW"; }
	Show exTabula { !G2; !*t2; BaseType == "Simple Robe"; SocketGroup "WWWWWW"; }
	Show exSynth  { !G2; !*t2; Class "Rings"; SynthesisedItem True; }
	Show ex6link  { !G1; !*t1; LinkedSockets 6; }
	Show exHarby  { !G3; !*HarbyUnique; Class "Piece"; }
#------------------------------------
# [5702] Tier 1 uniques
#------------------------------------
	Show t1 { !G1; !*t1; BaseType == uniques.generic.t1; }
#------------------------------------
# [5703] Exceptions #2
#------------------------------------
	Show 2xcorrupteduniques { !G2; !*t2; Corrupted True; CorruptedMods >= 2; }
	Show 2xabyss 			{ !G2; !*t2; Sockets >= "AA"; Class "Boots" "Gloves" "Helmets" }
	Show 5link 				{ %D4; !G3; !*t2; LinkedSockets 5; }
#------------------------------------
# [5704] Tier 2 uniques
#------------------------------------
	Show t2 { !G2; !*t2; BaseType == uniques.generic.t2; }	

#------------------------------------
# [5705] Multi-Unique bases.
#------------------------------------
# These bases have multiple uniques. One of the uniques, is a high value one
# While others are cheap. We give them a high quality display, while making a normal unique
# Sound to prevent false excitement.
	Show multispecial { !GSH; !*t3; !SpecialNoB; BaseType == uniques.generic.multispecial; }
	
# We treat 2x scourged uniques as multispecial items as well, since we don't know their mods or behaviour	
	Show scourged { %D5; !GSH; !*t3; !SpecialNoB; Scourged True; }

# For those 6 sockets	
	Show 6S 	  { %D5; !GSH; !*t4; !special; Sockets >= 6 }

#------------------------------------
# [5701] Exceptions Fated Uniques
#------------------------------------

	Show fated1    { !G2; !*t2; BaseType == uniques.generic.fatedt1; Identified True; Corrupted False; }
	Show fated2    { !GSH; %H4; !*t4; !special; BaseType == uniques.generic.fatedt2; Identified True; Corrupted False; }

#------------------------------------
# [5701] Low tier exceptions
#------------------------------------

#!! Override 770 : "Only low tier uniques"
	Show earlyleague { !G3; %H4; !*t4; !EarlyUniques; BaseType == uniques.generic.earlyleague; }
	Show highvinktar { !G3; %D4; !*t3; BaseType == "Imperial Staff"; ItemLevel >= 82; }
	Show exjewels    { !GSH; !*t4; !special; BaseType == "Cobalt Jewel" "Crimson Jewel" "Viridian Jewel" "Ghastly Eye Jewel" "Hypnotic Eye Jewel" "Murderous Eye Jewel" "Searching Eye Jewel"; }

#------------------------------------
# [5708] Tier 3 uniques 
#------------------------------------	
	Show t3boss {  !G4; !*t4; BaseType == uniques.generic.t3boss; }
	Show t3 	{  !G4; %H4; !*t4; BaseType == uniques.generic.t3; }

	Show recipeUniqueRings { !G5H; %D2; !*t4; !special; Class "Rings"; }
#------------------------------------
# [5709] Tier 4 uniques
#------------------------------------	
	Show hideable2 { !G5H; %H3; !*t5; BaseType == uniques.generic.hideable2; }
	Show hideable  { !G5H; %H3; !*t5; BaseType == uniques.generic.hideable; }
	Show restex { Empty(); }
}

#===============================================================================================================
# [[4900]] Misc Map Items
#===============================================================================================================
#!! Override 780 : "Quest Items and Relic Keys"

Section MiscMapSafe : Auto("MiscMapItemsExtra")
{
	Show RelicKeys { !G1; !Currency.t1exalted; BaseType miscmap.keys; }
	Show InscribedUltimatum { !G2; !fragments.t2; BaseType "Inscribed Ultimatum"; }
	Show AlvaTemple { !G2; !fragments.t2; BaseType "Chronicle of Atzoatl"; }
}

Section MiscMapItems : Class "Misc Map Items", Auto("MiscMapItems")
{
	Show restex { !restex; Empty(); }
}

#===============================================================================================================
# [[4900]] Questlike-Items2
#===============================================================================================================

Section Questlike : Auto("Questlike")
{
	Show Invitations { !QuestLike; BaseType "Maven's"; }
	Show LabyrinthConsumable { !QuestLike; Class "Labyrinth"; }
	Show IncursionConsumable { !QuestLike; Class "Incursion Item"; }
}

#===============================================================================================================
# [[6000]] Hide outdated leveling flasks
#===============================================================================================================
#!! Chapter "Leveling - flasks, rares, 4links"
#!! Override 810 : "All leveling rules incl. utility flasks"

Section HideLayer3 : Auto("HideLayer"), Quality 0, Class "Life Flask" "Mana Flask"
{
	Hide OutdatedLevelFlaskA { AreaLevel >= 15; BaseType "Large" "Medium" "Small"; }
	Hide OutdatedLevelFlaskB { AreaLevel >= 30; BaseType "Grand" "Greater"; }
	Hide OutdatedLevelFlaskC { AreaLevel >= 48; BaseType "Colossal" "Giant" "Sacred"; }
	Hide OutdatedLevelFlaskD { AreaLevel >= 60; BaseType "Hallowed" "Sanctified"; }
}

#===============================================================================================================
# [[6000]] Leveling - Flasks
#===============================================================================================================

Func FlaskHighlight(level, b){ AreaLevel <= level; BaseType b; }

#------------------------------------
# [6002] Utility Flasks
#------------------------------------

Section LevelingUtilityFlasks : Auto("Leveling->flasks->utility")
{
	Show Quicksilver 		{ !G3; !utilflasks.LT1; !LevelFlaskHigh; BaseType "Quicksilver Flask"; }
	Show AsortedUtility 	{ !G4; !utilflasks.LT2; !LevelFlask; BaseType bases.flask.utilityassorted; }
	Show Any 				{ !G5; %H3; !utilflasks.LT3; Class "Utility Flask"; }
}

Section LevelingQualityFlasks : Auto("Leveling->flasks->quality"), Class "Flask"
{
	Show max  { !G5; %D3; !recipe.ts1; Quality >= 20; }
	Show high { !G6; %D2; !recipe.t2; Quality >= 15; }
	Show any  { !G7; %D1; !recipe.t3; Quality >= 1; }
}

#------------------------------------
# [6002] Hybrid flasks
#------------------------------------
#!! Override 820 : "leveling life and mana flasks"

Section LevelingHybridFlasks : Class "Hybrid Flask", Auto("Leveling->Flasks->Hybrid"), !HybridFlask, !G6H
{
	Show t1 { %H2; FlaskHighlight(20, "Small");}
	Show t2 { %H2; FlaskHighlight(30, "Medium");}
	Show t3 { %H2; FlaskHighlight(40, "Large");}
	Show t4 { %H2; FlaskHighlight(50, "Colossal");}
	Show t5 { %H2; FlaskHighlight(60, "Sacred");}
	Show t6 { %H2; FlaskHighlight(67, "Hallowed");}
}

#------------------------------------
# [6002] Life flasks
#------------------------------------
Section LevelingLifeFlasks : Class "Life Flask", Auto("Leveling->Flasks->Life"), !LifeFlask, !G6H
{
	Show t1  { FlaskHighlight(5, "Small");}
	Show t2  { FlaskHighlight(8, "Medium");}
	Show t3  { FlaskHighlight(13, "Large");}
	Show t4  { FlaskHighlight(19, "Greater");}
	Show t5  { FlaskHighlight(25, "Grand");}
	Show t6  { FlaskHighlight(31, "Giant");}
	Show t7  { FlaskHighlight(37, "Colossal");}
	Show t8  { FlaskHighlight(43, "Sacred");}
	Show t9  { FlaskHighlight(51, "Hallowed");}
	Show t10 { FlaskHighlight(60, "Sanctified");}
	Show t11 { FlaskHighlight(68, "Divine");}
	Show t12 { FlaskHighlight(68, "Eternal");}
}

#------------------------------------
# [6002] Mana flasks
#------------------------------------
Section LevelingManaFlasks : Class "Mana Flask", Auto("Leveling->Flasks->Mana"), !ManaFlask, !G6H
{
	Show t1 {FlaskHighlight(5, "Small");}
	Show t2 {FlaskHighlight(8, "Medium");}
	Show t3 {FlaskHighlight(13, "Large");}
	Show t4 {FlaskHighlight(19, "Greater");}
	Show t5 {FlaskHighlight(25, "Grand");}
	Show t6 {FlaskHighlight(31, "Giant");}
	Show t7 {FlaskHighlight(37, "Colossal");}
	Show t8 {FlaskHighlight(43, "Sacred");}
	Show t9 {FlaskHighlight(51, "Hallowed");}
	Show t10 {FlaskHighlight(60, "Sanctified");}
	Show t11 {FlaskHighlight(68, "Divine");}
	Show t12 {FlaskHighlight(68, "Eternal");}
}

#===============================================================================================================
# [[6000]] Leveling - Rules
#===============================================================================================================
#!! Override 830 : "leveling: 4links and chromatic socket items"

#------------------------------------
# [6002] Links and Sockets
#------------------------------------

Section LevelingLinksAndSockets : ItemLevel <= 68, Auto("Leveling->Rare->SocketsLinks"), Rarity Rare, !G5
{
	Show 4linkrares 			{ %D4; !SF45; !FourLink; LinkedSockets >= 4; } 
}

#------------------------------------
# [6002] Rares - Decorators
#------------------------------------
#!! Override 840 : "leveling: all rare rules"

Section LevelingRareDecorator : Auto("Decorators->Leveling->Rare"), Rarity Rare, ItemLevel <= 68, !raredeco, !GEX
{
	Cont LargeRares 	{ !*large; Height >= 3; Width >= 2; }
	Cont MediumRares1 	{ !*medium; Height >= 3; Width = 1; }
	Cont MediumRares2 	{ !*medium; Height = 2; Width = 2; }
	Cont TinyRares 		{ !*tiny; Height = 1; Width <= 2; }
}

#------------------------------------
# [6002] Rares - Universal
#------------------------------------

Section LevelingRareGear : Rarity Rare
{
	Section Universal : Auto("Leveling->Rare->universal") !raredeco.t1jewellery, !GRJ1
	{
		Show RusticSash { %D5; !SF45; BaseType "Rustic Sash"; !LVLMelee; !FixMelee; }
		Show Jewellery  { %D5; !SF45; Class == leveling.classes.jwlry; }
	}

#!! Override 840 : "leveling: rare armours"

	Section Armour : Auto("Leveling->Rare->armours"), !GR1
	{
		Show BootsFocus { %D4; !raredeco.t1equip; !SF45; !noticehigh; Class == "Boots"; }
		Show General 	{ %D4; !raredeco.t1equip; !SF45; !noticehigh; Class == leveling.classes.armour; }
		Show BodyArmours{ %D4; !raredeco.t2equip; !SF40; Class == "Body Armours"; }
		Show Shields 	{ %D4; !raredeco.t2equip; !SF40; Class == "Shields"; }
		Show Quivers 	{ %D4; !LVLArcher; !SF40; Class == "Quivers"; }
	}

#------------------------------------
# [6002] Rares - Caster
#------------------------------------
#!! Override 850 : "leveling: class specific leveling weapons"

	Section Caster : Auto("Leveling->Rare->caster"), !LVLCaster, !GR2
	{
		Show EarlyLevels { %D4; !LVLCaster; !Maximize; Class == leveling.classes.caster; ItemLevel <= 16; }
		Show General     { %D4; !LVLCaster; !SF40; Class == leveling.classes.caster; }
	}

#------------------------------------
# [6002] Rares - Archer
#------------------------------------
	Section Archer : Auto("Leveling->Rare->archer"), Class == "Bows", !GR2
	{
		Show l1 { %D4; !LVLArcher; !Maximize; ItemLevel <= 16 }
		Show l2 { %D4; !LVLArcher; !SF40; ItemLevel <= 20; DropLevel >= 8; }
		Show l3 { %D4; !LVLArcher; !SF40; ItemLevel <= 26; DropLevel >= 14; }
		Show l4 { %D4; !LVLArcher; !SF40; ItemLevel <= 32; DropLevel >= 20; }
		Show l5 { %D4; !LVLArcher; !SF40; ItemLevel <= 38; DropLevel >= 26; }
		Show l6 { %D4; !LVLArcher; !SF40; ItemLevel <= 44; DropLevel >= 32; }
		Show l7 { %D4; !LVLArcher; !SF40; ItemLevel <= 50; DropLevel >= 38; }
		Show l8 { %D4; !LVLArcher; !SF40; ItemLevel <= 56; DropLevel >= 44; }
		Show l9 { %D4; !LVLArcher; !SF40; ItemLevel <= 58; DropLevel >= 50; }
		Show l10{ %D4; !LVLArcher; !SF40; ItemLevel <= 68; DropLevel >= 56; }
	}

#------------------------------------
# [6002] Rares - Melee
#------------------------------------
	Section Melee : Auto("Leveling->Rare->melee"), Class == leveling.classes.melee, !GR2
	{
		Show l1 { %D4; !LVLMelee; !Maximize; ItemLevel <= 16 }
		Show l2 { %D4; !LVLMelee; !SF40; ItemLevel <= 20; DropLevel >= 8; }
		Show l3 { %D4; !LVLMelee; !SF40; ItemLevel <= 26; DropLevel >= 14; }
		Show l4 { %D4; !LVLMelee; !SF40; ItemLevel <= 32; DropLevel >= 20; }
		Show l5 { %D4; !LVLMelee; !SF40; ItemLevel <= 38; DropLevel >= 26; }
		Show l6 { %D4; !LVLMelee; !SF40; ItemLevel <= 44; DropLevel >= 32; }
		Show l7 { %D4; !LVLMelee; !SF40; ItemLevel <= 50; DropLevel >= 38; }
		Show l8 { %D4; !LVLMelee; !SF40; ItemLevel <= 56; DropLevel >= 44; }
		Show l9 { %D4; !LVLMelee; !SF40; ItemLevel <= 58; DropLevel >= 50; }
		Show l10{ %D4; !LVLMelee; !SF40; ItemLevel <= 68; DropLevel >= 56; }
	}

#!! Override 860 : "leveling: remaining rare items"

	Section Vendorable : Auto("Leveling->Rare->Remaining"), !raredeco.t4equip
	{
		Show ChromaticRares { %D3; !G5; !SF40; !Recipes.Accent; SocketGroup "RGB"; }
		Show UnderLevel68 { %D1; !GR3; !SF35; AreaLevel >=42; }
		Show UnderLevel42 { %D1; !GR3; !SF35; AreaLevel >=24; ItemLevel <= 42; }
		Show UnderLevel24 { %D2; !GR3; !SF40; AreaLevel >=16; ItemLevel <= 24; }
		Show UnderLevel16 { %D3; !GR3; !SF40; AreaLevel >=1;  ItemLevel <= 16; }
	}
}

#===============================================================================================================
# [[6400]] Leveling - Useful magic and normal items
#===============================================================================================================
#!! Chapter "Leveling - remaining normal and magic items"
#!! Override 910 : "Linked Gear"

#------------------------------------
# [6002] Purpose Picked Items
#------------------------------------
Section LevelingMiscGear : Rarity <= Magic
{
	Section FourLinkedGear : LinkedSockets >= 4, Auto("Leveling->NormalMagic->4L"), !G5
	{
		Show General { %D4; !SF45; !FourLink; Empty(); }
	}

	Section Chromatic : Auto("Leveling->NormalMagic->RGB"), SocketGroup "RGB", !G5
	{
		Show RGBSmall1	{ %D3; !SF45; !Recipe.t2; Width <=2; Height <=2; }
		Show RGBSmall2	{ %D3; !SF45; !Recipe.t2; Width <=1; Height <=4; }
		Show RGBLarge	{ %D2; !SF40; !Recipe.t3; Width >=2; Height >=4; }
		Show RGBMedium	{ %D2; !SF40; !Recipe.t3; Width >=2; Height = 3; }
	}

	Section ThreeLinkedGear : LinkedSockets >= 3, Auto("Leveling->NormalMagic->3L"), !G6H, !GLVL1
	{
		Show EarlyThreeLinks 	{ %D3; !ThreeLink; !SF40; AreaLevel <= leveling.keylevels.threelinkEarly; }
		Show General 			{ %D2; !ThreeLink; !SF35; AreaLevel <= leveling.keylevels.threelink; }
	}

#!! Override 920 : "Act 1-3 specific gear"

	Section Act1 : AreaLevel <= leveling.keylevels.act1, Auto("Leveling->NormalMagic->act1"), !G6H, !GLVL1
	{
		Show CasterWeapons { %D4; !LVLCaster; !ThreeLink; Sockets >= 3; Class "Wands" "Sceptres"; Rarity Magic; AreaLevel <= leveling.keylevels.act1; }
		Show CasterCraftRings { %D4; !NoticeNM0; !SF45; BaseType leveling.bases.act1.craftrings; }
		Show General { %D4; !NoticeNM0; !SF45; BaseType leveling.bases.act1.general; }
		Show Boots { %D4; !NoticeNM0; !SF45; Rarity Magic; Class "Boots"; }
		Show Quivers { %D4; !LVLArcher; !SF40; Class "Quivers" }
		Show Physical { %D4; !NoticeNM0; !SF40; BaseType "Rustic Sash" "Iron Ring"; }
		Show Jewellery { %D4; !NoticeNM1; !SF40; Class classes_jewellery; }
	}
	
	Section Act2 : AreaLevel >= leveling.keylevels.act1, AreaLevel <= leveling.keylevels.act2, Auto("Leveling->NormalMagic->act2"), !G6, !GLVL2
	{
		Show CasterCraftRings { %D3; !NoticeNM2; !SF35; BaseType leveling.bases.act1.craftrings; }
		Show Physical { %D3; !NoticeNM2; !SF35; !LVLMelee; BaseType "Rustic Sash"; }
	}

	Section LaterActs : Auto("Leveling->NormalMagic->otheracts"), !low, !G7, !GLVL2
	{
		Show HighPhysQuivers { %D2; !NoticeNM2; !SF35; BaseType leveling.bases.quivers.best; }
		Show FireResistGear  { %D2; !NoticeNM2; !SF35; BaseType "Ruby Ring"; AreaLevel >= leveling.keylevels.act2; AreaLevel <= leveling.keylevels.act6 }
		Show GeneralCrafting { %D2; !NoticeNM2; !SF35; AreaLevel >= leveling.keylevels.act3; BaseType leveling.bases.generalcrafting; }
		ShowD SummonShield { !NoticeNM2; !SF40; AreaLevel <= leveling.keylevels.act5; BaseType "Bone Spirit Shield" }
	}
}

#------------------------------------
# [6002] Normals
#------------------------------------
#!! Override 930 : "first levels gear"

Section FirstLevels : Auto("Leveling->FirstLevels")
{
	Show EarlyBodyArmours	{ %H1; !GEX; !NoticeNM3; AreaLevel >= 2; AreaLevel <= leveling.keylevels.start; Rarity Normal; Class "Body Armours"; }
	Show ThreeSocketedGear 	{ %H3; !G6H; !NoticeNM2; !SF40; Rarity <= Magic; Sockets >= 3; AreaLevel <= leveling.keylevels.start; Class "Boots" "Gloves" "Helmets" "Shields"; }
	Show FirstAreas 		{ %H3; !G7; !NoticeNM3; AreaLevel <= 4; Rarity Normal; }
}

#------------------------------------
# [6002] Weapon Progression
#------------------------------------
#!! Override 940 : "weapon progression"

Func ProgressionRow (rar, il, dl){ ItemLevel <= il; DropLevel >= dl; Rarity <= rar; }

Section WeaponProgression : Rarity Normal, Class == leveling.classes.melee leveling.classes.archer, Auto("Leveling->WeaponProgression"), !NoticeNM3, !GEX
{
	Show r01 { %H2; ProgressionRow(Normal, 9,5); }
	Show r02 { %H2; ProgressionRow(Normal, 11,8); }
	Show r03 { %H2; ProgressionRow(Normal, 14,11); }
	Show r04 { %H2; ProgressionRow(Normal, 16,13); }
	Show r05 { %H2; ProgressionRow(Normal, 18,16); }
	Show r06 { %H2; ProgressionRow(Normal, 20,18); }
	Show r07 { %H2; ProgressionRow(Normal, 22,20); }
	Show r08 { %H2; ProgressionRow(Normal, 24,22); }
	Show r09 { %H2; ProgressionRow(Normal, 26,24); }
	Show r10 { %H2; ProgressionRow(Normal, 28,26); }
	Show r11 { %H2; ProgressionRow(Normal, 30,28); }
	Show r12 { %H2; ProgressionRow(Normal, 32,30); }
	Show r13 { %H2; ProgressionRow(Normal, 34,32); }
	Show r14 { %H2; ProgressionRow(Normal, 36,34); }
	Show r15 { %H2; ProgressionRow(Normal, 40,38); }
	Show r16 { %H2; ProgressionRow(Normal, 42,40); }
	Show r17 { %H2; ProgressionRow(Normal, 44,42); }
	Show r18 { %H2; ProgressionRow(Normal, 46,44); }
	Show r19 { %H2; ProgressionRow(Normal, 48,46); }
	Show r20 { %H2; ProgressionRow(Normal, 50,48); }
	Show r21 { %H2; ProgressionRow(Normal, 52,50); }
	Show r22 { %H2; ProgressionRow(Normal, 54,52); }
	Show r23 { %H2; ProgressionRow(Normal, 56,54); }
	Show r24 { %H2; ProgressionRow(Normal, 58,56); }
	Show r25 { %H2; ProgressionRow(Normal, 60,58); }
	Show r26 { %H2; ProgressionRow(Normal, 62,60); }
	Show r27 { %H2; ProgressionRow(Normal, 64,62); }
	Show r28 { %H2; ProgressionRow(Normal, 66,64); }
	Show r29 { %H2; ProgressionRow(Normal, 68,66); }
}

#------------------------------------
# [6002] Remaining Magics
#------------------------------------
#!! Override 950 : "magic vendor items"

Section LevelingMagicDecorator : Auto("Decorators->Leveling->Magic"), ItemLevel <= 68, Rarity = Magic, !GEX
{
	Cont Medium1 { !NoticeLow;  Height >= 3; Width = 1; }
	Cont Medium2 { !NoticeLow;  Height = 2; Width = 2; }
	Cont Tiny 	 { !NoticeHigh; Height = 1; Width <= 2; }
}

Section MagicItemsMisc : Auto("Leveling->Magic->Remaining"), Rarity = Magic, !G7
{
	Section HideLayerMagicLeveling
	{
		Hide LargeMagicBlocker  { AreaLevel >= leveling.keylevels.act1; Height >= 3; Width >= 2 }
		Hide MediumMagicBlocker { AreaLevel >= leveling.keylevels.act2; Height > 1; }
	}

	Show Rest 		 { %H1; !ClearBorder; !SF30; AreaLevel >= leveling.keylevels.act3; AreaLevel <= 68; }
	Show Act2 		 { %H2; !ClearBorder; !SF35; AreaLevel >=leveling.keylevels.act1; AreaLevel <= leveling.keylevels.act2 ; }
	Show Act1 		 { %H3; !ClearBorder; !SF35; AreaLevel >=leveling.keylevels.start;  AreaLevel <= leveling.keylevels.act1; }
	Show FirstLevels { %H3; !ClearBorder; !SF40; AreaLevel >=1;  AreaLevel <= leveling.keylevels.start; }
}

#!! Override 960 : "don't override anything"

#------------------------------------
# [6002] Hide All known Section
#------------------------------------

Section HideLayerFinal : Auto("HideLayer")
{
	Hide Final { Class "Amulets" "Belts" "Body Armour" "Boots" "Bows" "Claws" "Daggers" "Flask" "Gloves" "Heist Brooch" "Heist Cloak" "Heist Gear" "Heist Tool" "Helmets" "Jewel" "One Hand" "Quivers" "Rings" "Rune Dagger" "Sceptre" "Shields" "Staves" "Two Hand" "Wand" "Warstaves"; }
}

#------------------------------------
# [6002] Show All unknown Section
#------------------------------------

# THIS ENTRY IS CAUGHT IN 3 CASES:
# 1) YOUR FILTER IS OUT OF DATE!
# 2) YOU DID SOMETHING SILLY WHEN EDITING THE FILTER
# 3) YOU ENCOUNTERED A PREVIOUSLY UNKNOWN UNIQUE

Section AnyRemaining : Auto("AnyRemaining")
{
	Show restex { Empty(); }
}