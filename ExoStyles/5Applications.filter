#------------------------------------
# Applications - PRE-RARE
#------------------------------------

Style Global
{
	Apply(meta.global, ALL => UniversalPreProc.ApplyToAll);
}

Style LibrarySectionBased
{
	# General
	Apply(meta.hide ,HideLayer* => !UniversalHideLayer.any);

	# PRERARES

	Apply(6L, 6Links.arm => SixLinkVariant.t1);
	Apply(6L, 6Links.wep => SixLinkVariant.t2);

	Apply(influenced, Influenced.t1* => InfluencedVariant.t1);
	Apply(influenced, Influenced.t2* => InfluencedVariant.t2);

	Apply(influenced, Influenced.Any* => !InfluencedRandom.Any);

	Apply(special.exotic, exoticbases => !UniversalExotic.t1);
	Apply(special.id, IdModSection => !IdModsMulti.t2);

	Apply(artefact, ArtefactItemClasses => !Artefact.t1);

	Apply(tier.invitation, Invitations => InvitationTierList);
	Apply(crafting, AdditionalCrafting.any => CraftGeneralStrategy.ANY);

	# RARES

	Apply(rares.jwl, BreachRings => !RaresJewellery.t3);

	Apply(talisman, Talismans.* => !RaresJewellery.t3);
	Apply(talisman, Talismans.T1* => !UniversalExotic.t1);
	Apply(talisman, Talismans.T2* => !UniversalExotic.t2);
	Apply(talisman, Talismans.T3* => !UniversalExotic.t3);
	Apply(talisman, Talismans.Any => !UniversalExotic.t4);

	Apply(rares.jwl, EndgameRareRingsAmulets => RaresJewellery);
	Apply(rares.jwl, EndgameRareBelts => RaresJewellery);
	Apply(rares.gear, EndgameRareGear.t1* => RaresArmoursWeapons.t1);
	Apply(rares.gear, EndgameRareGear.t2* => RaresArmoursWeapons.t2);
	Apply(rares.gear, EndgameRareGear.t3* => RaresArmoursWeapons.t3);
	Apply(rares.gear, EndgameRareGear.t4* => RaresArmoursWeapons.t4);
	Apply(meta.removers,  DecoratorRemover => DecoratorRemoverStrategy);

	Apply(heist, HeistFollowerGear.t1 => HeistFollowerGearStrategy.t1);
	Apply(heist, HeistFollowerGear.t1highlevel => HeistFollowerGearStrategy.t1highlevel);
	Apply(heist, HeistFollowerGear.t2 => HeistFollowerGearStrategy.t2);
	Apply(heist, HeistFollowerGear.t3any => HeistFollowerGearStrategy.t3any);

	# Tierlists and Maps
	
	Apply(tier.uniquereplica, Replicas => ReplicaTierList);
	Apply(tier.uniquemaps, UniqueMaps => UniqueMapStrat);
	Apply(influenced, InfluencedMaps* => !InfluencedMapsStrategy.Any)

	Apply(deco.maps, Maps.deco_mapup* => !GeneralMapProgressionStrategy.deco_mapup);
	Apply(tier.fragments, Labyrinth => ExoticFragments);

	Apply(tier.uniquemaps, HeistUniqueMapLike => !UniqueMapStrat.T2);

	Apply(heistmaps, HeistContracts => !HeistMapLike.Any);
	Apply(heistmaps, HeistBlueprint => !HeistMapLikeHigh.Any);

	Apply(tier.fragments, MapFragments => FragmentTierStrat);
	Apply(tier.fragments, MapFragments.T1p => FragmentExceptions.Any);
	
	Apply(tier.fragments, CurrencyProphecy.t1* => FragmentTierStrat.t1);
	Apply(tier.fragments, CurrencyProphecy.t2* => FragmentTierStrat.t2);
	Apply(tier.fragments, CurrencyProphecy.t3* => FragmentTierStrat.t3);
	Apply(tier.fragments, CurrencyProphecy.t4* => FragmentTierStrat.t4);
	Apply(tier.fragments, CurrencyProphecy.t5* => FragmentTierStrat.t5);
}

Style LibraryTagBased
{
	Apply(meta.safe, *.restex => !UniversalValueAccents.restex);

	## Pre-Rare
	Apply(jewels, $jewels => JewelStrategy);
	Apply(special.exotic, $exotic => UniversalExotic);
	Apply(recipe, $recipe => RecipeStrategy);

	Apply(special.crafts, $craftspecial => CraftSpecialStrategy);
	Apply(crafting, $craftgeneral => CraftGeneralStrategy);

	Apply(deco.rares, $raredeco.t1equip => RaresArmoursWeapons.t1);
	Apply(deco.rares, $raredeco.t2equip => RaresArmoursWeapons.t2);
	Apply(deco.rares, $raredeco.t3equip => RaresArmoursWeapons.t3);
	Apply(deco.rares, $raredeco.t4equip => RaresArmoursWeapons.t4);
	Apply(deco.rares, $raredeco.t1jewellery => RaresJewellery.t1);

	Apply(flasks, $utilflasks => UtilityFlasksStrategy);

	## Rare
	Apply(meta.remover, $raredeco => EndgameRareDecorators)

	## Gems
	Apply(gems, $Gems => GemStrategy);

	Apply(uniques.maps, $Maps.HighHarbingerMap => UniqueMapStrat.t1);
	Apply(maps.general, $Maps => GeneralMapProgressionStrategy);

	# Currency
	Apply(currency.def, $currency.t1exalted => t1exalted.Any);
	Apply(currency.def, $currency.t2divine => t2divine.Any);
	Apply(currency.def, $currency.t3annul => t3annul.Any);
	Apply(currency.def, $currency.t4chaos => t4chaos.Any);
	Apply(currency.def, $currency.t5alchemy => t5alchemy.Any);
	Apply(currency.def, $currency.t6chrom => t6chrom.Any);
	Apply(currency.def, $currency.t7chance => t7chance.Any);
	Apply(currency.def, $currency.t8trans => t8trans.Any);
	Apply(currency.def, $currency.t9armour => t9armour.Any);
	Apply(currency.def, $currency.tportal => tportal.Any);
	Apply(currency.def, $currency.twisdom => twisdom.Any);

	Apply(divi, $divi.t1 => t1divi.Any);
	Apply(divi, $divi.t2 => t2divi.Any);
	Apply(divi, $divi.t3 => t3divi.Any);
	Apply(divi, $divi.t4 => t4divi.Any);
	Apply(divi, $divi.t5 => t5divi.Any);
	Apply(divi, $divi.tnew => tnewdivi.Any);

	Apply(tier.fragments, fragments.t1* => FragmentTierStrat.t1);
	Apply(tier.fragments, CurrencyProphecy.t2* => FragmentTierStrat.t2);
	Apply(tier.fragments, CurrencyProphecy.t3* => FragmentTierStrat.t3);
	Apply(tier.fragments, CurrencyProphecy.t4* => FragmentTierStrat.t4);
	Apply(tier.fragments, CurrencyProphecy.t5* => FragmentTierStrat.t5);

	Apply(currency.def, $currency.eqChaos => t4chaos.Any);
	Apply(currency.def, $currency.eqAlchemy => t5alchemy.Any);
	Apply(currency.def, $currency.eqAnnul => t3annul.Any);

	Apply(currency.coins, $Coins => Coins);
	Apply(splinters, $Splinters => SplinterStrategy);

	Apply(uniques.def, $unique.t1 => t1uni.Any);
	Apply(uniques.def, $unique.t2 => t2uni.Any);
	Apply(uniques.def, $unique.t3 => t3uni.Any);
	Apply(uniques.def, $unique.t4 => t4uni.Any);
	Apply(uniques.def, $unique.t5 => t5uni.Any);
	Apply(uniques.harby, $unique.harbyunique => harbyunique.Any);
	# Apply($unique.tnew => tnewdivi.Any);
}

Style LibraryGlobal
{
	Apply(accents, ALL => UniversalValueAccents);
}